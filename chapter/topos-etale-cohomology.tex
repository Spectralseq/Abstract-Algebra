\chapter{The theory of topos and \'etale cohomology of schemes}
\section{Fibre category}\label{fibre cat category section}
\subsection{Categories over a fixed category}\label{fibre cat E-category subsection}
Let $\mathcal{E}$ be a category in a fixed universe, which is an object of $\mathbf{Cat}$. We consider the category $\mathbf{Cat}_{/\mathcal{E}}$ of objects of $\mathbf{Cat}$ lying over $\mathcal{E}$; by definition, an object of this category is a functor $p:\mathcal{F}\to \mathcal{E}$. We say that the category $\mathcal{F}$, endowed with the functor $p$ (called the \textbf{structural functor} of $\mathcal{F}$), is a category over $\mathcal{E}$, or an $\mathcal{E}$-category. By definition, a morphism of $\mathcal{E}$-categories $p:\mathcal{F}\to \mathcal{E}$, $q:\mathcal{G}\to \mathcal{E}$ is a functor $f:\mathcal{F}\to \mathcal{G}$ such that $qf=p$. We denote by $\Hom_{/\mathcal{E}}(\mathcal{F},\mathcal{G})$ the set of morphism of $\mathcal{F}$ to $\mathcal{G}$ (also called \textbf{$\mathcal{E}$-functors}). The composition of $\mathcal{E}$-functors is given by that of the category $\mathbf{Cat}$.\par
Now consider two $\mathcal{E}$-functors $f,g:\mathcal{F}\to \mathcal{G}$ and a morphism of functor $u:f\to g$. We say that $u$ is an $\mathcal{E}$-homomorphism or a homomorphism of $\mathcal{E}$-functors, if for any object $\xi\in\Ob(\mathcal{F})$, we have
\[q(u(\xi))=\id_{p(\xi)},\]
in other words, if $S=p(\xi)=q(f(\xi))=q(g(\xi))$ is the corresponding object in $\mathcal{E}$, the morphism
\[u(\xi):f(\xi)\to g(\xi)\]
in $\mathcal{G}$ is an $\id_S$-morphism (in genera, for a morphism $\alpha:T\to S$ in $\mathcal{E}$ and a $\mathcal{E}$-category $q:\mathcal{G}\to \mathcal{E}$, a morphism $v$ in $\mathcal{G}$ is called an $\alpha$-morphism if $q(v)=\alpha$). If we have a third $\mathcal{E}$-functor $h:\mathcal{F}\to \mathcal{G}$ and an $\mathcal{E}$-homomorphism $v:g\to h$, then $vu$ is also an $\mathcal{E}$-morphism. Therefore, the $\mathcal{E}$-functors from $\mathcal{F}$ to $\mathcal{G}$ and the $\mathcal{E}$-homomorphisms  for a subcategory of the category $\sHom(\mathcal{F},\mathcal{G})$ of functors from $\mathcal{F}$ to $\mathcal{G}$, which is called the \textbf{category of $\mathcal{E}$-functors} from $\mathcal{F}$ to $\mathcal{G}$, denoted by $\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G})$.\par
We note that there is a natural composition law on the category $\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G})$. In other words, we have a composition functor
\begin{equation}\label{fiber cat Hom_E composition functor-1}
\circ:\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G})\times \sHom_{/\mathcal{E}}(\mathcal{G},\mathcal{H})\to \sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{H})
\end{equation}
where $\mathcal{F}$, $\mathcal{G}$ and $\mathcal{H}$ are $\mathcal{E}$-categories. For this, we recall that there is a composition functor
\begin{equation}\label{fiber cat Hom_E composition functor-2}
\sHom(\mathcal{F},\mathcal{G})\times\sHom(\mathcal{G},\mathcal{H})\to \sHom(\mathcal{F},\mathcal{H})
\end{equation}
which on objects is the composition map $(f,g)\mapsto gf$ of $\mathcal{E}$-functors $f:\mathcal{F}\to \mathcal{G}$ and $g:\mathcal{G}\to \mathcal{H}$, and on morphisms, it transform $(u,v)$, where $u:f\to f'$, $v:g\to g'$ are arrows of $\sHom(\mathcal{F},\mathcal{G})$ and $\sHom(\mathcal{G},\mathcal{H})$, to the arrow
\[v\circ u:gf\to g'f'\]
defined by the relation
\[(v\circ u)(\xi)=v(f'(\xi))\cdot g(u(\xi))=g'(u(\xi))\cdot v(f(\xi)).\]
(We use product to denote vertical composition, and $\circ$ by horizental composition.) We thus obtain a homomorphism from $gf$ to $g'f'$, which satisfies the following identities (hence we obtain the functor (\ref{fiber cat Hom_E composition functor-2})):
\[\id_g\circ\id_f=\id_{gf},\quad (v'\circ u')\circ(v\circ u)=(v'\circ v)\circ(u'\circ u).\]
Recall also that we have an associativity formula for the composition functor (\ref{fiber cat Hom_E composition functor-2}), which is expressed on the one hand by the associativity $(hg)f=h(gf)$ of the composition of functors, and on the other hand by the formula
\[(w\circ v)\circ u=w\circ(v\circ u)\]
where $u:f\to f'$, $v:g\to g'$, $v:h\to h'$ are morphisms of functors. It is now immediate that if $\mathcal{F}$ and $\mathcal{G}$ are $\mathcal{E}$-functors, the functor (\ref{fiber cat Hom_E composition functor-2}) induces the functor (\ref{fiber cat Hom_E composition functor-1}), as the horizental composition of two $\mathcal{E}$-functors is clearly an $\mathcal{E}$-functor. Again, the induced functor (\ref{fiber cat Hom_E composition functor-1}) also satisfies the associativity, expressed by $(hg)f=h(gf)$ and $(w\circ v)\circ u=w\circ(v\circ u)$. We also note that the functor $\circ$ also satisfies the following formule:
\[v\circ\id_\mathcal{F}=v,\quad \id_\mathcal{G}\circ u=u,\]
where for simplicity we write $v\circ f$ or $u\circ g$ instead of $v\circ u$, if $u$ (resp. $v$) is the identity automorphism of $f$ (resp. $g$). We then conclude that the category $\mathcal{Cat}_{/\mathcal{E}}$, with the Hom category $\sHom_{/\mathcal{E}}$ and the composition functor $\circ$, is a strict $2$-category.\par
It follows from our definition of $\circ$ that $\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G})$ is a functor on $\mathcal{F}$, $\mathcal{G}$, on the product category $\mathbf{Cat}_{/\mathcal{E}}^{\op}\times\mathbf{Cat}_{/\mathcal{E}}$. In fact, if $g:\mathcal{G}\to \mathcal{G}'$ and $f:\mathcal{F}'\to \mathcal{F}$ are $\mathcal{E}$-functors, then we have the corresponding functors
\begin{gather*}
g_*:\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G})\to \sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G}')\\
f^*:\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G})\to \sHom_{/\mathcal{E}}(\mathcal{F}',\mathcal{G}).
\end{gather*}

We now consider the base change of $\mathcal{E}$-categories. First, as $\mathbf{Cat}$ admits (small) projective limits, so does the category $\mathbf{Cat}_{/\mathcal{E}}$, and in particular the Cartesian products exist, which can be interpreted as fiber products in $\mathbf{Cat}$. If $\mathcal{F}$ and $\mathcal{G}$ are two categories over $\mathcal{E}$, we denote by $\mathcal{F}\times_{\mathcal{E}}\mathcal{G}$ their product in $\mathbf{Cat}_{/\mathcal{E}}$, i.e. their fiber product over $\mathcal{E}$ in $\mathbf{Cat}$. Therefore, $\mathcal{F}\times_{\mathcal{E}}\mathcal{G}$ is endowed with two projection $\mathcal{E}$-functors $\pr_1$ and $\pr_2$, which define, for any category $\mathcal{H}$ over $\mathcal{E}$, a bijection
\[\Hom_{/\mathcal{E}}(\mathcal{H},\mathcal{F}\times_\mathcal{G}\mathcal{G})\stackrel{\sim}{\to }\Hom_{/\mathcal{E}}(\mathcal{H},\mathcal{F})\times\Hom_{/\mathcal{E}}(\mathcal{H},\mathcal{G}).\]
This bijection in fact provides an isomorphism of categories
\[\sHom_{/\mathcal{E}}(\mathcal{H},\mathcal{F}\times_\mathcal{G}\mathcal{G})\stackrel{\sim}{\to }\sHom_{/\mathcal{E}}(\mathcal{H},\mathcal{F})\times\sHom_{/\mathcal{E}}(\mathcal{H},\mathcal{G})\]
which has components $h\mapsto\pr_1\circ h$ and $h\mapsto\pr_2\circ h$ on $2$-morphisms. We also remark that, as in the case of products of sets, we have
\[\Ob(\mathcal{F}\times_{\mathcal{E}}\mathcal{G})=\Ob(\mathcal{F})\times_{\Ob(\mathcal{E})}\Ob(\mathcal{G}),\quad \Arr(\mathcal{F}\times_{\mathcal{E}}\mathcal{G})=\Arr(\mathcal{F})\times_{\Arr(\mathcal{E})}\Arr(\mathcal{G}).\]

Now let $\lambda:\mathcal{E}'\to \mathcal{E}$ be a base change functor. For any category $\mathcal{F}$ over $\mathcal{E}$, we consider $\mathcal{F}\times_{\mathcal{E}}\mathcal{E}'$ as a category over $\mathcal{E}'$ via the canonical projection $\pr_2$. Since this construction is clearly functorial over $\mathcal{F}$, we obtain a base change functor
\[\lambda^*:\mathbf{Cat}_{/\mathcal{E}}\to \mathbf{Cat}_{/\mathcal{E}'},\]
(which is adjoint to the restriction functor). As is the general case, the base change functor commutes with projective limits, and in particular transforms fiber products over $\mathcal{E}$ to fiber products over $\mathcal{E}'$.\par
Let $\mathcal{F}$ and $\mathcal{G}$ be two categories over $\mathcal{E}$, we want to define a canonical isomorphism
\begin{equation}\label{fiber cat Hom set under base change isomorphism}
\sHom_{/\mathcal{E}'}(\mathcal{F}',\mathcal{G}')\stackrel{\sim}{\to }\sHom_{/\mathcal{E}}(\mathcal{F}',\mathcal{G})
\end{equation}
where $\mathcal{F}'=\mathcal{F}\times_\mathcal{E}\mathcal{E}'$, $\mathcal{G}'=\mathcal{G}\times_\mathcal{E}\mathcal{E}'$. For this, we consider the functor $\pr_1:\mathcal{G}'\to \mathcal{G}$ and define (\ref{fiber cat Hom set under base change isomorphism}) by
\[\sHom(\mathcal{F}',\mathcal{G}')\stackrel{\sim}{\to }\sHom(\mathcal{F}',\mathcal{G}),\quad F\mapsto\pr_1\circ F.\]
It remains to verify that this induces a functor when restricted to $\mathcal{E}$-functors, and is bijective. But we note that if $F,G$ are $\mathcal{E}'$-functors $\mathcal{F}'\to \mathcal{G}'$, then the map $u\mapsto\pr_1\circ u$ induces an bijection
\[\Hom_{/\mathcal{E}'}(F,G)\stackrel{\sim}{\to }\Hom_{/\mathcal{E}}(F,\pr_1\circ G)\]
whence our assertion.\par
From the isomorphism (\ref{fiber cat Hom set under base change isomorphism}), we see that $\sHom_{/\mathcal{E}'}(\mathcal{F}\times_\mathcal{E}\mathcal{E}',\mathcal{G}\times_\mathcal{E}\mathcal{E}')$ can be considered as a functor on $\mathcal{E}'$, $\mathcal{F}$ and $\mathcal{G}$, from the category $\mathbf{Cat}_{/\mathcal{E}}^{\op}\times\mathbf{Cat}_{/\mathcal{E}}^{\op}\times\mathbf{Cat}_{/\mathcal{E}}$ to $\mathbf{Cat}$, which is isomorphic to the functor $\sHom_{/\mathcal{E}'}(\mathcal{F}\times_\mathcal{E}\mathcal{E}',\mathcal{G})$. In particular, for fixed $\mathcal{F}$ and $\mathcal{G}$, we obtain a functor
\[\mathcal{E}'\mapsto\sHom_{/\mathcal{E}'}(\mathcal{F}',\mathcal{G}')=\sHom_{/\mathcal{E}'}(\mathcal{F}\times_\mathcal{E}\mathcal{E}',\mathcal{G}\times_\mathcal{E}\mathcal{E}')\]
and in particular the functor $\lambda:\mathcal{E}'\to \mathcal{E}$ defines a morphism
\begin{equation}\label{fiber cat Hom set under base change morphism}
\lambda^*_{\mathcal{F},\mathcal{G}}:\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G})\to \sHom_{/\mathcal{E}'}(\mathcal{F}',\mathcal{G}')
\end{equation}
which we will now explain. For an $\mathcal{E}$-functor $f:\mathcal{F}\to \mathcal{G}$, the morphism $\lambda^*_{\mathcal{F},\mathcal{G}}$ sends $f$ to its base change $f'=f\times_{\mathcal{E}}\mathcal{E}'$. On the other hand, if $f,g:\mathcal{F}\to \mathcal{G}$ are two $\mathcal{E}$-functors and $u:f\to g$ is a morphism of $\mathcal{E}$-functors, then $u$ is associated with the morphism $u':f'\to g'$, where for $\xi'=(\xi,S')\in\Ob(\mathcal{F}')$ (with $\xi\in\Ob(\mathcal{F})$, $S'\in\Ob(\mathcal{E}')$, $p(\xi)=\lambda(S')=S$), the morphism
\[u'(\xi'):f'(\xi')=(f(\xi),S')\to g'(\xi')=(g(\xi),S')\]
is defined by the formula
\[u'(\xi')=(u(\xi),\id_{S'}),\]
which is an $S'$-morphism in $\mathcal{G}'$ because $q(u(\xi))=\lambda(\id_{S'})=\id_S$.\par
Now consider an $\mathcal{E}$-functor $\lambda':\mathcal{E}''\to \mathcal{E}'$ and the corresponding functor
\[\sHom_{/\mathcal{E}'}(\mathcal{F}\times_\mathcal{E}\mathcal{E}',\mathcal{G}\times_\mathcal{E}\mathcal{E}')\to \sHom_{/\mathcal{E}''}(\mathcal{F}\times_\mathcal{E}\mathcal{E}'',\mathcal{G}\times_\mathcal{E}\mathcal{E}'').\]
This is none other than the functor (\ref{fiber cat Hom set under base change morphism}) by taking $\mathcal{F}'$ and $\mathcal{G}'$ over $\mathcal{E}'$ and considering $\mathcal{E}''$ as an $\mathcal{E}'$-category, in view the transitivity of base change:
\[\mathcal{F}'\times_{\mathcal{E}'}\mathcal{E}''\stackrel{\sim}{\to }\mathcal{F}''=\mathcal{F}\times_{\mathcal{E}}\mathcal{E}'',\quad \mathcal{G}'\times_{\mathcal{E}'}\mathcal{E}''\stackrel{\sim}{\to }\mathcal{G}''=\mathcal{G}\times_{\mathcal{E}}\mathcal{E}''.\]
which implies a canonical isomorphism
\[\sHom_{/\mathcal{E}''}(\mathcal{F}'\times_\mathcal{E}'\mathcal{E}'',\mathcal{G}'\times_\mathcal{E}'\mathcal{E}'')\stackrel{\sim}{\to }\sHom_{/\mathcal{E}''}(\mathcal{F}\times_\mathcal{E}\mathcal{E}'',\mathcal{G}\times_\mathcal{E}\mathcal{E}'').\]

The functors we have just defined are compatible with the composition law $\circ$ on $\sHom$. More precisely, if $\mathcal{F}$, $\mathcal{G}$, $\mathcal{H}$ are categories over $\mathcal{E}$ and we put
\[\mathcal{F}'=\mathcal{F}\times_\mathcal{E}\mathcal{E}',\quad \mathcal{G}'=\mathcal{G}\times_\mathcal{E}\mathcal{E}',\quad \mathcal{H}'=\mathcal{H}\times_\mathcal{E}\mathcal{E}',\]
then we have a commutative diagram
\[\begin{tikzcd}
\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G})\times\sHom_{/\mathcal{E}}(\mathcal{G},\mathcal{H})\ar[r,"\circ"]\ar[d,swap,"\lambda^*_{\mathcal{F},\mathcal{G}}\times\lambda^*_{\mathcal{G},\mathcal{H}}"]&\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{H})\ar[d,"\lambda^*_{\mathcal{F},\mathcal{H}}"]\\
\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G})\times\sHom_{/\mathcal{E}}(\mathcal{G},\mathcal{H})\ar[r,"\circ"]&\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{H})
\end{tikzcd}\]
The commutativity of this diagram is often expressed by the following formule:
\[(gf)'=g'f',\quad (v\circ u)'=(v'\circ u')\]
where $g,f$ and $v,u$ are $\mathcal{E}$-functors or homomorphism of $\mathcal{E}$-functors.\par
In the following, we will be mainly interested in the functor $\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G})$ (and certain subcategories of it) when $\mathcal{F}=\mathcal{G}$, so we introduce the following notation:
\[\bm{\Gamma}(\mathcal{G}/\mathcal{E})=\sHom_{/\mathcal{E}}(\mathcal{E},\mathcal{G}),\quad \Gamma(\mathcal{G}/\mathcal{E})=\Ob(\bm{\Gamma}(\mathcal{G}/\mathcal{E}))=\Hom_{/\mathcal{E}}(\mathcal{E},\mathcal{G}).\]
\begin{remark}
If the category $\mathcal{E}$ is a point, i.e., $\Ob(\mathcal{E})$ and $\Arr(\mathcal{E})$ are both reduced to a singleton (which signifies that $\mathcal{E}$ is a final object in $\mathbf{Cat}$), then an $\mathcal{E}$-category is just an ordinary category, so $\mathbf{Cat}_{/\mathcal{E}}$ is isomorphic to $\mathbf{Cat}$. Moreover, the category $\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G})$ are nothing but the usual category $\sHom(\mathcal{F},\mathcal{G})$. Recall that we have the following adjoint formula
\[\Hom(\mathcal{H},\sHom(\mathcal{F},\mathcal{G}))\stackrel{\sim}{\to }\Hom(\mathcal{F}\times\mathcal{H},\mathcal{G}).\]
which allows us to axiomatically interpret $\sHom(\mathcal{F},\mathcal{G})$ as an internal object of $\mathbf{Cat}$, and any formula for $\sHom$ can be extended to any category such that "Hom objects" exsits. There is also an analogous formula of $\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G})$, for arbitrary category $\mathcal{E}$:
\[\Hom(\mathcal{H},\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G}))\stackrel{\sim}{\to }\Hom_{/\mathcal{E}}(\mathcal{F}\times\mathcal{H},\mathcal{G}).\]
In the way, the preceding properties we given for $\sHom$ extends to any category such that the objects $\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{E})$ exsits.
\end{remark}
\subsection{Categorical fibers and \texorpdfstring{$\mathcal{E}$}{E}-equivalences}
Let $\mathcal{F}$ be a category over $\mathcal{E}$, and $S\in\Ob(\mathcal{E})$. We define the \textbf{categorical fiber} of $\mathcal{F}$ at $S$ to be the subcategory $\mathcal{F}_S$ of $\mathcal{F}$, obtained by taking the inverse image of the point subcategory $\{S\}$ of $\mathcal{E}$ defined by $S$. In other words, the objets of $\mathcal{F}_S$ are objects $\xi$ of $\mathcal{F}$ such that $p(\xi)=S$, and morphisms of $\mathcal{F}_S$ are morphisms $u$ of $\mathcal{F}$ such that $p(u)=\id_S$, i.e., the $S$-morphisms in $\mathcal{F}$. Alternatively, $\mathcal{F}_S$ is canonically isomorphic to the fiber product $\mathcal{F}\times_\mathcal{E}\{S\}$, so for any base change $\lambda:\mathcal{E}'\to \mathcal{E}$ and any $S'\in\Ob(\mathcal{E}')$, the projection $\pr_1:\mathcal{F}'=\mathcal{F}\times_\mathcal{E}\mathcal{E}'\to \mathcal{F}$ induces an isomorphism $\mathcal{F}'_{S'}=\mathcal{F}_S$, where $S=\lambda(S')$.
\begin{proposition}\label{fiber cat fully faithful functor base change}
Let $f:\mathcal{F}\to \mathcal{G}$ be an $\mathcal{E}$-functor. If $f$ is fully faithful, then for any base change $\mathcal{E}'\to \mathcal{E}$, the corresponding functor $f':\mathcal{F}'=\mathcal{F}\times_\mathcal{E}\mathcal{E}'\to \mathcal{G}'=\mathcal{G}\times_\mathcal{E}\mathcal{E}'$ is fully faithful.
\end{proposition}
\begin{proof}
The varification is immediate from the definition of $\mathcal{F}'$, $\mathcal{G}'$ and $f'$. More generally, we can prove that any projective limit of fully faithful functors is fully faithful.
\end{proof}
We note that the analogous assertion of \cref{fiber cat fully faithful functor base change}, with "fully faithful" replaced by "equivalence of categories", is flase. For example, if $f:\mathcal{F}\to \mathcal{E}$ is an equivalence of categories and $g:\mathcal{E}\to \mathcal{F}$ is its inverse, then for an object $S\in\Ob(\mathcal{E})$, the induced base change functor $f_S:\mathcal{F}_S\to \{S\}$ is essentially closed if and only if $g(S)$ is an object of $\mathcal{F}_S$ (which means $g$ is a section of $\mathcal{F}$ over $\mathcal{E}$, or equivalently $f\circ g=\id_\mathcal{E}$). However, we have the following result.
\begin{proposition}\label{fiber cat functor E-equivalence iff base change}
Let $f:\mathcal{F}\to \mathcal{G}$ be an $\mathcal{E}$-functor. The following conditions are equivalent:
\begin{enumerate}
\item[(\rmnum{1})] There exists an $\mathcal{E}$-functor $g:\mathcal{G}\to \mathcal{F}$ and $\mathcal{E}$-isomorphisms
\[gf\stackrel{\sim}{\to }\id_{\mathcal{F}},\quad fg\stackrel{\sim}{\to }\id_{\mathcal{G}}.\]
\item[(\rmnum{2})] For any base change $\mathcal{E}'\to \mathcal{E}$, the functor $f':\mathcal{F}'=\mathcal{F}\times_\mathcal{E}\mathcal{E}'\to \mathcal{G}'=\mathcal{G}\times_\mathcal{E}\mathcal{E}'$ is an equivalence of categories.
\item[(\rmnum{3})] $f$ is an equivalence of categories, and for any $S\in\Ob(\mathcal{E})$, the functor $f_S:\mathcal{F}_S\to \mathcal{G}_S$ induced by $f$ is an equivalence of categories.
\item[(\rmnum{3}')] $f$ is faithfully flat, and for any $S\in\Ob(\mathcal{E})$ and $\eta\in\Ob(\mathcal{G}_S)$, there exists $\xi\in\Ob(\mathcal{F}_S)$ and an $S$-isomorphism $u:f(\xi)\to \eta$.
\end{enumerate}
If these conditions are satisfied, we then say that $f$ is an \textbf{equivalence of categories over $\mathcal{E}$}, or an \textbf{$\mathcal{E}$-equivalence}.
\end{proposition}
\begin{proof}
Clearly (\rmnum{1}) implies that $f$ is an equivalence of categories (this is defined by the same condition, but the inverse is not required to be an $\mathcal{E}$-functor). On the other hand, it follows from the functoriality of base change that condition (\rmnum{1}) is preserved under base change, so (\rmnum{1}) implies (\rmnum{2}). Evidently (\rmnum{2})$\Rightarrow$(\rmnum{3}), because $\mathcal{F}_S$ can be considered as a fiber product of $f$, and it is trivial that (\rmnum{3}) implies (\rmnum{3}'). It then remains to prove that (\rmnum{3}')$\Rightarrow$(\rmnum{1}). For this, we choose for each $\eta\in\Ob(\mathcal{G})$ an object $g(\eta)\in\Ob(\mathcal{F})$ and an $S$-isomorphism $u(\eta):f(g(\eta))\to \eta$, where $S=q(\eta)$ (this is possible by condition (\rmnum{3}')). The fact that $f$ is fully faithful implies that $g$ can be considered as a functor from $\mathcal{G}$ to $\mathcal{F}$, and the $u(\eta)$ then define a homomorphism (hence an isomorphism) $u:fg\stackrel{\sim}{\to }\id_\mathcal{G}$. Moreover, by construction $g$ is an $\mathcal{E}$-functor and $u$ is an $\mathcal{E}$-homomorphism. By composition we see that $u\circ f:\mathcal{F}\to \mathcal{G}$ is an $\mathcal{E}$-homomorphism, isomorphic to $f$. Since $f$ is fully faithful, we then obtain a functorial isomorphism $v:gf\to \id_\mathcal{F}$, defined by the condition that $f\circ v=u\circ f$, and it is clear that $v$ is also an $\mathcal{E}$-homomorphism.
\end{proof}
\begin{corollary}\label{fiber cat functor equivalence is E-equivalence if transportable}
Suppose that the structural functor $p:\mathcal{F}\to \mathcal{E}$ is transportable, i.e. for any isomorphism $\alpha:T\to S$ in $\mathcal{E}$ and any object $\xi$ in $\mathcal{F}_T$, there exists an object $\eta$ in $\mathcal{F}_S$ and an isomorphism $u:\xi\to \eta$ such that $p(u)=\alpha$. Then any $\mathcal{E}$-functor $f:\mathcal{F}\to \mathcal{G}$ which is an equivalence of categories, is an $\mathcal{E}$-equivalence.
\end{corollary}
\begin{proof}
If $f$ is an an equivalence of categories, then for any $S\in\Ob(\mathcal{E})$ and $\eta\in\Ob(\mathcal{G}_S)$, there exists $\xi\in\Ob(\mathcal{F})$ and an isomorphism $u:f(\xi)\stackrel{\sim}{\to }\eta$. Since $f$ is an $\mathcal{E}$-functor, if $T=p(\xi)$, then $q(u)$ is an isomorphism from $T$ to $S$ (where $q:\mathcal{G}\to \mathcal{E}$ is the structural functor). By our hypothesis on $p$, there then exists an object $\xi'$ in $\mathcal{F}_T$ and an isomorphism $v:\xi\to \xi'$ such that $p(v)=q(u)$:
\[\begin{tikzcd}[row sep=6mm, column sep=6mm]
&f(\xi)\ar[dd]\ar[rr,"u","\sim"']&&\eta\ar[dd,"q"]\\
\xi\ar[ru,"f"]\ar[rr,"v","\sim"',pos=0.6,crossing over]\ar[rd,"p"]&&\xi'\ar[rd,"p"]\ar[ru,dashed]&\\
&T\ar[rr,"q(u)"]&&S
\end{tikzcd}\]
Then $f(\xi')$ is isomorphic to $\eta$ and belongs to $\mathcal{G}_S$, so the corollary follows from the criterion (\rmnum{3}') of \cref{fiber cat functor E-equivalence iff base change}.
\end{proof}
\begin{corollary}\label{fiber cat functor E-equivalence induces sHom equivalence}
Let $f:\mathcal{F}\to \mathcal{G}$ be an $\mathcal{E}$-equivalence. Then for any category $\mathcal{H}$ over $\mathcal{E}$, the corresponding functors
\begin{gather*}
f^*:\sHom_{/\mathcal{E}}(\mathcal{G},\mathcal{H})\to \sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{H})\\
f_*:\sHom_{/\mathcal{E}}(\mathcal{H},\mathcal{F})\to \sHom_{/\mathcal{E}}(\mathcal{H},\mathcal{G})
\end{gather*}
are equivalences of categories.
\end{corollary}
\begin{proof}
This follows from criterion (\rmnum{1}) of \cref{fiber cat functor E-equivalence iff base change}. In fact, if $g:\mathcal{G}\to \mathcal{F}$ is an $\mathcal{E}$-inverse of $f$, then $g_*$ and $g^*$ are inverses of $f_*$ and $f^*$, respectively.
\end{proof}
\subsection{Cartesian morphisms and Cartesian functors}
Let $\mathcal{F}$ be a category over $\mathcal{E}$, with structural functor $p:\mathcal{F}\to \mathcal{E}$. We consider a morphism $\alpha:\eta\to \xi$ in $\mathcal{F}$, and let $S=p(\xi)$, $T=p(\eta)$, $f=p(\alpha)$:
\begin{equation}\label{fiber cat Cartesian diagram-1}
\begin{tikzcd}
\eta\ar[d]\ar[r,"\alpha"]&\xi\ar[d]\\
T\ar[r,"f"]&S
\end{tikzcd}
\end{equation}
We say that $\alpha$ is a \textbf{Cartesian morphism} if for any $\eta'\in\Ob(\mathcal{F}_T)$ and any $f$-morphism $u:\eta'\to \xi$, there exists a unique $T$-morphism $\tilde{u}:\eta'\to \eta$ such that $u=\alpha\circ\tilde{u}$.
\begin{equation}\label{fiber cat Cartesian diagram-2}
\begin{tikzcd}[row sep=8mm,column sep=10mm]
\eta'\ar[rdd,bend right=15pt]\ar[rd,dashed,"\tilde{u}"]\ar[rrd,"u",bend left=20pt]\\
&\eta\ar[r,"\alpha"]\ar[d]&\xi\ar[d]\\
&T\ar[r,"f"]&S
\end{tikzcd}
\end{equation}
This signifies that for any $\eta'\in\Ob(\mathcal{F}_T)$, the map
\begin{equation}\label{fiber cat Cartesian morphism represent Hom}
\Hom_T(\eta',\eta)\to \Hom_f(\eta',\xi),\quad v\mapsto\alpha\circ v
\end{equation}
is bijective. In other words, the couple $(\eta,\alpha)$ represents the functor $\eta'\mapsto\Hom_f(\eta',\xi)$ from $\mathcal{F}_T^{\op}\to \mathbf{Set}$. If for any morphism $f:T\to S$ and any object $\xi\in\Ob(\mathcal{F}_S)$, there exists a such couple $(\eta,\alpha)$, i.e. a Cartesian morphism $\alpha:\eta\to \xi$ in $\mathcal{F}$ such that $p(\alpha)=f$, then $\eta$ is uniquely determined in $\mathcal{F}_T$. In this case, we then say that the inverse image of $\xi$ under $f$ exists, and an object $\eta$ together with a Cartesian $f$-morphism $\alpha:\eta\to \xi$ is called an \textbf{inverse image of $\xi$ by $f$}. We often assume that such an inverse image is chosen whenever it exists ($\mathcal{F}$ being fixed), and denote it by $f^*_\mathcal{F}(\xi)$, or simply $f^*(\xi)$ or $\xi\times_ST$ if there is no risk of confusion. The canonical homomorphism $\alpha:\eta\to \xi$ is then denoted in this case by $\alpha_f(\xi)$. If for any $\xi\in\Ob(\mathcal{F}_S)$, the inverse image of $\xi$ by $f$ exists, we then say that the \textbf{inverse image functor of $f$ in $\mathcal{F}$ exists}, and $\xi\mapsto f^*(\xi)$ defines a covariant functor from $\mathcal{F}_S$ to $\mathcal{F}_T$. This functorial dependence of $f^*(\xi)$ is explained as follows: consider Cartesian $f$-morphisms
\[\alpha:\eta\to \xi,\quad \alpha':\eta'\to \xi'\]
and an $S$-morphism $\lambda:\xi\to \xi'$. Then there exits a unique  $T$-morphism $\mu:\eta\to\eta'$ such that the diagram
\[\begin{tikzcd}
\eta\ar[d,swap,"\mu"]\ar[r,"\alpha"]&\xi\ar[d,"\lambda"]&\\
\eta'\ar[r,"\alpha'"]&\xi'
\end{tikzcd}\]
is commutative (this follows from the fact that $\alpha'$ is Cartesian).\par
An $\mathcal{E}$-functor $F:\mathcal{F}\to \mathcal{G}$ is called a \textbf{Cartesian functor} is it transforms Cartesian morphisms to Cartesian morphisms. We denote by $\sHom_{\Cart}(\mathcal{F},\mathcal{G})$ the full subcategory of $\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G})$ formed by Cartesian functors. For example, consider $\mathcal{E}$ as an $\mathcal{E}$-category via the identity functor. Then any morphism of $\mathcal{E}$ is Cartesian, so a Cartesian functor from $\mathcal{E}$ to $\mathcal{F}$ is a section $F:\mathcal{E}\to \mathcal{F}$ which transforms any morphism of $\mathcal{E}$ to a Cartesian morphism; such a functor is called a \textbf{Cartesian section} of $\mathcal{F}$ over $\mathcal{E}$.
\begin{proposition}\label{fiber cat Cartesian functor prop}
Let $\mathcal{E}$ be a fixed category.
\begin{enumerate}
\item[(a)] A functor $\mathcal{F}:\mathcal{F}\to \mathcal{G}$ that is an $\mathcal{E}$-equivalence is a Cartesian functor.
\item[(b)] Let $F,G:\mathcal{F}\to \mathcal{G}$ be isomorphic $\mathcal{E}$-functors. If one of them is Cartesian, so is the other.
\item[(c)] The composition of two Cartesian functors is Cartesian.
\end{enumerate}
\end{proposition}
\begin{proof}
Assertion (c) is trivial by definition, and (b) is immediate from the definition of isomorphisms of $\mathcal{E}$-functors. Finally, (a) follows from criterion (\rmnum{3}) of \cref{fiber cat functor E-equivalence iff base change}. More precisely, in this case a morphism $\alpha$ in $\mathcal{F}$ is Cartesian if and only if $F(\alpha)$ is.
\end{proof}
\begin{corollary}\label{fiber cat E-equivalence induced Cartesian Hom equivalence}
Let $F:\mathcal{F}\to \mathcal{G}$ be an $\mathcal{E}$-equivalence. Then for any category $\mathcal{H}$ over $\mathcal{F}$, the corresponding functors
\begin{gather*}
F^*:\sHom_{\Cart}(\mathcal{G},\mathcal{H})\to \sHom_{\Cart}(\mathcal{F},\mathcal{H}),\\
F_*:\sHom_{\Cart}(\mathcal{H},\mathcal{F})\to \sHom_{\Cart}(\mathcal{H},\mathcal{G})
\end{gather*}
are equivalence of categories.
\end{corollary}
\begin{proof}
This follows from criterion (\rmnum{1}) of \cref{fiber cat functor E-equivalence iff base change} and \cref{fiber cat Cartesian functor prop}.
\end{proof}
It follows from \cref{fiber cat Cartesian functor prop} that if we consider the subcategory $\mathbf{Cat}_{/\mathcal{E}}^{\Cart}$ of $\mathbf{Cat}_{/\mathcal{E}}$ whose objects are the same as $\mathbf{Cat}_{/\mathcal{E}}$ and whose morphisms are Cartesian functors, then we have a composition law
\[\circ:\sHom_{\Cart}(\mathcal{F},\mathcal{G})\times\sHom_{\Cart}(\mathcal{G},\mathcal{H})\to \sHom_{\Cart}(\mathcal{F},\mathcal{H})\]
induced by that of $\sHom_{/\mathcal{E}}(-,-)$. Therefore, we can consider $\sHom_{\Cart}(\mathcal{F},\mathcal{G})$ as a functor from $(\mathbf{Cat}_{/\mathcal{E}}^{\Cart})^{\op}\times\mathbf{Cat}_{/\mathcal{E}}^{\Cart}$ to $\mathbf{Cat}$. In particular, if $\mathcal{F}$ is a category over $\mathcal{E}$, we define $\bm{\Gamma}_{\Cart}(\mathcal{F}/\mathcal{E})$ to be the category of Cartesian $\mathcal{E}$-functors $\mathcal{E}\to \mathcal{F}$, i.e. the Cartesian sections of $\mathcal{F}$ over $\mathcal{E}$, and write $\Gamma_{\Cart}(\mathcal{F}/\mathcal{E})$ for the objects of $\bm{\Gamma}_{\Cart}(\mathcal{F}/\mathcal{E})$. In view of the preceding remarks, $\Gamma_{\Cart}(\mathcal{F}/\mathcal{E})$ then defines a functor from $\mathbf{Cat}_{/\mathcal{E}}^{\Cart}$ to $\mathbf{Cat}$.\par
We now consider categories over $\mathcal{E}$ such that inverse images exists for any object of $\mathcal{E}$.
\begin{definition}
A category $\mathcal{F}$ over $\mathcal{E}$ is called a \textbf{fibre category} (and the structural functor $p:\mathcal{F}\to \mathcal{E}$ is called a \textbf{fibrant}) if it satisfies the following conditions:
\begin{enumerate}[leftmargin=40pt]
\item[(Fib1)] For any morphism $f:T\to S$ in $\mathcal{E}$, the inverse image functor of $f$ in $\mathcal{F}$ exists.
\item[(Fib2)] The composition of two Cartesian morphism is Cartesian.
\end{enumerate}
A category $\mathcal{F}$ over $\mathcal{E}$ is said to be \textbf{prefibre} if it satisfies condition (Fib1).
\end{definition}
If $\mathcal{F}$ is a (pre)fibre category over $\mathcal{E}$, a subcategory $\mathcal{G}$ of $\mathcal{F}$ is called a \textbf{(pre)fibre subcategory} if it is a fibre category (resp. prefibre category) over $\mathcal{E}$, and if the inclusion functor is Cartesian. If for example $\mathcal{G}$ is a full subcategory of $\mathcal{F}$, we see that this signifies that for any morphism $f:T\to S$ in $\mathcal{E}$ and any $\xi\in\Ob(\mathcal{G}_S)$, $f^*_\mathcal{F}(\xi)$ is $T$-isomorphisc to an object of $\mathcal{G}_T$. An interesting case is the following: $\mathcal{F}$ being a fibre category over $\mathcal{E}$, consider the subcategory $\mathcal{G}$ of $\mathcal{F}$ with the same objects, and whose morphisms are Cartesian morphisms of $\mathcal{F}$. In particular, the morphisms of $\mathcal{G}_S$ are the isomorphisms of $\mathcal{F}_S$. Then $\mathcal{G}$ is a fibre subcategory of $\mathcal{F}$, because the bijection
\[\Hom_T(\eta',\eta)\stackrel{\sim}{\to }\Hom_f(\eta',\xi)\]
of (\ref{fiber cat Cartesian morphism represent Hom}) sends $T$-isomorphisms to Cartesian morphisms, and conversely. By definition, the Cartesian sections $\mathcal{E}\to \mathcal{F}$ then correspond to $\mathcal{E}$-functors $\mathcal{E}\to \mathcal{G}$.

\begin{proposition}\label{fibre cat E-equivalence invariant}
Let $\mathcal{F}$ be an $\mathcal{E}$-equivalence. For $\mathcal{F}$ to be a (pre)fibre category over $\mathcal{E}$, it is necessary and sufficient that $\mathcal{G}$ is.
\end{proposition}
\begin{proof}
This follows from the definition and the fact that $\alpha$ is Cartesian if and only if $F(\alpha)$ is.
\end{proof}
\begin{proposition}\label{fibre cat morphism product Cartesian iff}
Let $\mathcal{F}_1$, $\mathcal{F}_2$ be categories over $\mathcal{E}$, and $\alpha=(\alpha_1,\alpha_2)$ be a morphism in $\mathcal{F}=\mathcal{F}_1\times_{\mathcal{E}}\mathcal{F}_2$. For $\alpha$ to be Cartesian, it is necessary and sufficient that $\alpha_1$ and $\alpha_2$ are Cartesian.
\end{proposition}
\begin{proof}
Let $\alpha_i:\xi_i\to \eta_i$ be the given morphism, and $f:T\to S$ be the morphism such that $p_i(\alpha_i)=f$, where $p_i:\mathcal{F}_i\to \mathcal{E}$ is the structural functor. For any object $\eta'=(\eta_1',\eta_2')$ in $\mathcal{F}_T$, we have a commutative diagram
\[\begin{tikzcd}
\Hom_T(\eta',\eta)\ar[d]\ar[r]&\Hom_f(\eta',\xi)\ar[d]\\
\Hom_T(\eta'_1,\eta_1)\times\Hom_T(\eta_2',\eta_2)\ar[r]&\Hom_f(\eta_1',\xi_1)\times\Hom_f(\eta_2',\xi_2)
\end{tikzcd}\]
where the vertical arrows are bijections. Then the horizontal arrows are simutanously bijective, which shows that, if $\alpha_1,\alpha_2$ are Cartesian, then so is $\alpha$. The converse of this can be obtained from the above diagram by taking $\eta'_i=\eta_i$ so $\Hom_T(\eta'_i,\eta_i)\neq\emp$ (for $i=1$ or $i=2$, respectively), which shows that $\alpha_1$ and $\alpha_2$ are Cartesian.
\end{proof}
\begin{corollary}\label{fibre cat Cartesian functor into product iff}
Let $\mathcal{F}=\mathcal{F}_1\times_\mathcal{E}\mathcal{F}_2$ and $F=(F_1,F_2)$ be an $\mathcal{E}$-functor $\mathcal{G}\to \mathcal{F}$. For $F$ to be Cartesian, it is necessary and sufficient that $F_1$ and $F_2$ are Cartesian. Therefore, we have an isomorphism of categories
\[\sHom_{\Cart}(\mathcal{G},\mathcal{F}_1\times_\mathcal{E}\mathcal{F}_2)\stackrel{\sim}{\to }\sHom_{\Cart}(\mathcal{G},\mathcal{F}_1)\times\sHom_{\Cart}(\mathcal{G},\mathcal{F}_2)\]
and in particular an isomorphism
\[\bm{\Gamma}_{\Cart}(\mathcal{F}_1\times_\mathcal{E}\mathcal{F}_2/\mathcal{E})\stackrel{\sim}{\to }\bm{\Gamma}_{\Cart}(\mathcal{F}_1/\mathcal{E})\times\bm{\Gamma}_{\Cart}(\mathcal{F}_2/\mathcal{E}).\]
\end{corollary}
\begin{corollary}\label{fibre cat product is fibre}
Let $\mathcal{F}_1$ and $\mathcal{F}_2$ be (pre)fibre categories over $\mathcal{E}$, then the fiber product $\mathcal{F}_1\times_\mathcal{E}\mathcal{F}_2$ is a (pre)fibre category.
\end{corollary}
It is clear that the above results extends without difficulty to finite products of categories over $\mathcal{E}$. For example, a finite fiber product of (pre)fibre categories over $\mathcal{E}$ is again a (pre)fibre category over $\mathcal{E}$.
\begin{proposition}\label{fibre cat morphism Cartesian iff base change}
Let $\mathcal{F}$ be a category over $\mathcal{E}$, with structural functor $p:\mathcal{F}\to \mathcal{E}$, and $\lambda:\mathcal{E}'\to \mathcal{E}$ be a base change functor. Consider $\mathcal{F}'=\mathcal{F}\times_\mathcal{E}\mathcal{E}'$ as a category over $\mathcal{E}'$ via the projection $p'=p\times_\mathcal{E}\id_{\mathcal{E}'}$. Let $\alpha'$ be a morphism of $\mathcal{F}'$, for $\alpha'$ to be a Cartesian morphism, it is necessary and sufficient that its image $\alpha$ in $\mathcal{F}$ is a Cartesian morphism.
\end{proposition}
\begin{proof}
If $\alpha$ is Cartesian, then it it immediate to see that $\alpha'$ is also Cartesian, using the universal property of base change. Conversely, assume that $\alpha$ is Cartesian, and let $\alpha':\eta'\to \xi'$ be a morphism in $\mathcal{F}'$. Then we can write
\[\eta'=(\eta,T'),\quad \xi'=(\xi,S')\]
where $\eta$ (resp. $\xi$) is the image of $\eta'$ (resp. $\xi'$) in $\mathcal{F}$, and we have
\[\lambda(T')=p(\eta)=:T,\quad \lambda(S')=p(\xi)=:S.\]
Now if $\gamma$ is an object of $\mathcal{F}_T$, then it is the image of the object $\gamma'=(\gamma,T')$ in $\mathcal{F}'$, and we have
\[\Hom_T(\gamma,\eta)=\Hom_{T'}(\gamma',\eta'),\quad \Hom_f(\gamma,\xi)=\Hom_{f'}(\gamma',\eta')\]
where $f=p(\alpha)$ and $f'=p'(\alpha')$. In view of (\ref{fiber cat Cartesian morphism represent Hom}), it follows that $\alpha$ is Cartesian in $\mathcal{F}$. 
\end{proof}
\begin{corollary}\label{fibre cat functor base change is Cartesian}
For any Cartesian functor $F:\mathcal{F}\to \mathcal{G}$ of categories over $\mathcal{E}$, the functor $F'=F\times_\mathcal{E}\mathcal{E}'$ from $\mathcal{F}'=\mathcal{F}\times_\mathcal{E}\mathcal{E}'$ to $\mathcal{G}'=\mathcal{G}\times_\mathcal{E}\mathcal{E}'$ is Cartesian.
\end{corollary}
\begin{corollary}\label{fibre cat base change is fibre}
Let $\mathcal{F}$ be a (pre)fibre category over $\mathcal{E}$, then $\mathcal{F}'=\mathcal{F}\times_\mathcal{E}\mathcal{E}'$ is a (pre)fibre category over $\mathcal{E}'$.
\end{corollary}
In particular, the functor $\sHom_{/\mathcal{E}}(\mathcal{F},\mathcal{G})\to \sHom_{/\mathcal{E}'}(\mathcal{F}',\mathcal{G}')$ considered in \cref{fibre cat E-category subsection} induces a functor
\[\sHom_{\Cart}(\mathcal{F},\mathcal{G})\to \sHom_{\Cart}(\mathcal{F}',\mathcal{G}')\]
and in view of this, for fixed $\mathcal{F},\mathcal{G}$, we can consider $\sHom_{\Cart}(\mathcal{F},\mathcal{G})$ as a functor on $\mathcal{E}'$, from the category $\mathbf{Cat}_{/\mathcal{E}}^{\op}$ to $\mathbf{Cat}$. If we take into account the isomorphism (\ref{fiber cat Hom set under base change isomorphism}), then the Cartesian $\mathcal{E}'$-functors from $\mathcal{F}'$ to $\mathcal{G}'$ correspond to $\mathcal{E}$-functors $\mathcal{F}\times_\mathcal{E}\mathcal{E}'\to \mathcal{G}$ which sends any morphism whose projection to $\mathcal{F}$ is a Cartesian morphism, to a Cartesian morphism of $\mathcal{G}$. If $\mathcal{F}=\mathcal{E}$, we then obtain the following corollary:
\begin{corollary}\label{fibre cat Cartesian section of base change bijection}
The category $\bm{\Gamma}_{\Cart}(\mathcal{F}'/\mathcal{E}')$ is isomorphic to the full subcategory of $\sHom_{/\mathcal{E}}(\mathcal{E}',\mathcal{F})$ formed by $\mathcal{E}$-functors $\mathcal{E}'\to \mathcal{F}$ which transforms morphisms of $\mathcal{E}'$ into Cartesian morphisms of $\mathcal{F}$. In particular, if $\mathcal{F}$ is a fibre category and $\widetilde{\mathcal{F}}$ is the subcategory of $\mathcal{F}$ whose morphisms are the Cartesian morphisms of $\mathcal{F}$, then we have a bijection
\[\Gamma_{\Cart}(\mathcal{F}'/\mathcal{E}')\stackrel{\sim}{\to }\Hom_{\mathcal{E}}(\mathcal{E}',\widetilde{\mathcal{F}}).\] 
\end{corollary}
\begin{proposition}\label{fibre cat E-functor fully faithful iff fiber}
Let $\mathcal{F}$ and $\mathcal{G}$ be prefiber categories over $\mathcal{E}$, $F:\mathcal{F}\to \mathcal{G}$ be a Cartesian $\mathcal{E}$-functor. For $F$ to be faithful (resp. fully faithful, resp. an $\mathcal{E}$-equivalence), it is necessary and sufficient that for any $S\in\Ob(\mathcal{E})$, the induced functor $F_S:\mathcal{F}_S\to \mathcal{G}_S$ is faithful (resp. fully faithful, resp. an $\mathcal{E}$-equivalence).
\end{proposition}
\begin{proof}
One direction is already proved in \cref{fiber cat fully faithful functor base change} and \cref{fiber cat functor E-equivalence iff base change}, and the converse for $\mathcal{E}$-equivalences is given in \cref{fiber cat functor E-equivalence iff base change} (withour the hypothesis that $\mathcal{F}$ and $\mathcal{G}$ are prefibre categories). Conversely, assume that (say) $F_S$ is faithful for any $S\in\Ob(\mathcal{E})$. Let $\alpha,\beta:\eta\to \xi$ be two morphisms of $\mathcal{F}$ lying over a morphism $f:T\to S$ of $\mathcal{E}$ such that $F(\alpha)=F(\beta)$. Since $\mathcal{G}$ is Cartesian, $\alpha$ and $\beta$ correspond to morphisms
\[\tilde{\alpha}:\eta\to f^*_\mathcal{F}(\xi),\quad \tilde{\beta}:\eta\to f^*_\mathcal{F}(\xi)\]
and since $F$ is a Cartesian $\mathcal{E}$-functor, $F(\tilde{\alpha})$ and $F(\tilde{\beta})$ are the morphisms corresponding to $F(\alpha)$ and $F(\beta)$ under pullbacks in $\mathcal{G}$. Since $F(\tilde{\alpha})$ and $F(\tilde{\beta})$ are morphisms of objects of $\mathcal{F}$ with the same base, by hypothesis we must have $\tilde{\alpha}=\tilde{\beta}$, so $\alpha=\beta$ by the universal property of pullbacks. The same arguments can be applied to prove that $F$ is full if $F_S$ is full for any $S\in\Ob(\mathcal{E})$, and this completes the proof.
\end{proof}
We have defined Cartesian morphism via the pullback diagram (\ref{fiber cat Cartesian diagram-2}). There is in fact a stronger notion for Cartesian morphisms, called \textit{strongly Cartesian}. Briefly speaking, it allows the object $\eta'$ in (\ref{fiber cat Cartesian diagram-2}) to have a different base $T'$, with an additional morphism $g:T'\to T$ being provided.
\[\begin{tikzcd}[row sep=8mm,column sep=10mm]
\eta'\ar[d]\ar[rd,dashed,"\tilde{u}"]\ar[rrd,"u",bend left=20pt]\\
T'\ar[rd,"g"]&\eta\ar[r,"\alpha"]\ar[d]&\xi\ar[d]\\
&T\ar[r,"f"]&S
\end{tikzcd}\]
In other words, a strongly Cartesian morphism $\alpha:\eta\to \xi$ provides a bijection
\begin{equation}\label{fibre cat strong Cartesian bijection}
\Hom_g(\eta',\eta)\stackrel{\sim}{\to }\Hom_{fg}(\eta',\xi).
\end{equation}
It is clear that strongly Cartesian property is preserved under composition, so we could just define a fibre category to be an category $\mathcal{F}$ over $\mathcal{E}$ in which strong Cartesian pullbacks exist. However, this seemingly stronger condition in fact produces equivalent fibre categories, as the following proposition shows.
\begin{proposition}\label{fibre cat iff Cartesian is strong Cartesian}
Let $\mathcal{F}$ be a prefibre category over $\mathcal{E}$. For $\mathcal{F}$ to be fibre, it is necessary and sufficent that any Cartesian morphism $\alpha:\eta\to \xi$ is strongly Cartesian.
\end{proposition}
\begin{proof}
We have remarked that strongly Cartesian morphisms are closed under composition, so this condition is sufficient. Conversely, let $\mathcal{F}$ be a fibre category over $\mathcal{E}$. Let $\alpha:\eta\to \xi$ be a Cartesian morphism in $\mathcal{F}$ lying over a morphism $f:T\to S$, and $u:\eta'\to \xi$ be an $fg$-morphism, where $g:T'\to T$ is a morphism in $\mathcal{E}$. Let $\beta:g^*(\eta)\to \eta$ be the pullback of $\eta$ under $g$; then the composition $\alpha\beta:g^*(\eta)\to \xi$ is Cartesian by hypothesis, and since $g^*(\eta)$ has base $T'$, the morphism $u:\eta'\to \xi$ corresponds to a morphism $\tilde{v}:\eta'\to g^*(\eta)$, which in turn corresponds to a morphism $\tilde{u}:\eta'\to \eta$ such that $\alpha\tilde{u}=u$. This then proves that $\alpha$ is strongly Cartesian.
\end{proof}
\begin{corollary}\label{fibre cat isomorphism iff image isomorphism and Cartesian}
Let $\mathcal{F}$ be a category over $\mathcal{E}$ and $\alpha$ be a morphism in $\mathcal{F}$. For $\alpha$ to be an isomorphism, it is necessary that $p(\alpha)=f$ is an isomorphism and $\alpha$ is Cartesian. The converse is true if $\mathcal{F}$ is Cartesian over $\mathcal{E}$.
\end{corollary}
\begin{proof}
If $\alpha$ is an isomorphism, it is clear that so is $p(\alpha)=f:T\to S$, and for any $\eta'\in\Ob(\mathcal{F}_T)$, the map $u\mapsto\alpha\circ u$ is bijective and sends $T$-morphisms to $f$-morphisms, so $\alpha$ is Cartesian. Conversely, suppose that $f$ is an isomorphism and that $\alpha$ is Strongly Cartesian. Then from (\ref{fibre cat strong Cartesian bijection}), we see that for any $\zeta\in\Ob(\mathcal{F})$, the map
\[\Hom(\zeta,\eta)\to \Hom(\zeta,\xi),\quad u\mapsto\alpha\circ u\]
is bijective (since $f$ an isomorphism), so $\alpha$ is an isomorphism.
\end{proof}
\begin{corollary}\label{fibre cat Cartesian iff Cartesian composition}
Let $\alpha:\eta\to \xi$ and $\beta:\zeta\to \eta$ be morphisms in a fibre category $\mathcal{F}$ over $\mathcal{E}$. If $\alpha$ is Cartesian, then $\beta$ is Cartesian if and only if $\alpha\beta$ is Cartesian.
\end{corollary}
\begin{proof}
In fact, this property is true for strongly Cartesian morphisms, so the corollary follows from \cref{fibre cat iff Cartesian is strong Cartesian}. 
\end{proof}

The classical Yoneda lemma embeds a category into its associated category
of functors to sets. We now provide a generalization of the Yoneda lemma for fibered categories. Let $p:\mathcal{F}\to\mathcal{E}$ be a fibre category over a category $\mathcal{E}$, and $\mathcal{E}_{/S}$ be the comma category of objects over $S\in\Ob(\mathcal{E})$. Then the category $\mathcal{E}_{/S}$ is canonically a fibre category over $\mathcal{E}$, with functor $\mathcal{E}_{/S}\to\mathcal{E}$ sending $(T\to S)\in\mathcal{E}_{/S}$ to $T$. There is a functor
\[\xi:\sHom_{\Cart}(\mathcal{E}_{/S},\mathcal{F})\to\mathcal{F}(S)\]
sending a morphism of fibre categories $u:\mathcal{E}_{/S}\to\mathcal{F}$ to $u(\id:S\to S)$.

\begin{proposition}[\textbf{$2$-Yoneda lemma}]
The functor $\xi$ is an equivalence of categories.
\end{proposition}
\begin{proof}

\end{proof}

\begin{corollary}
Let $S,T$ be objects of $\mathcal{E}$. Then the functor
\[\sHom_{\Cart}(\mathcal{E}_{/S},\mathcal{E}_{/T})\to\Hom_{\mathcal{E}}(X,Y),\quad u\mapsto u(\id_X)\]
is an equivalence of categories.
\end{corollary}

\subsection{Cleavages and pseudo-functors}
Let $\mathcal{F}$ be a category over $\mathcal{E}$. We define a \textbf{cleavage} of $\mathcal{F}$ over $\mathcal{E}$ to be a function which attaches to each morphism $f:T\to S$ an inverse image \textit{functor} of $f$ in $\mathscr{F}$, denoted by $f^*:\mathscr{F}_S\to \mathscr{F}_T$ (the pullback functor of $f$). The cleavage is called \textbf{normalized} if $f=\id_S$ implies $f^*=\id_{\mathscr{F}_S}$. A category $\mathcal{F}$ over $\mathcal{E}$, together with a chosen (normalized) cleavage, is called a \textbf{(normalized) cloven category}.\par
It is evident that $\mathcal{F}$ admits a cleavage if and only if it is prefibre over $\mathcal{E}$, and in this case the cleavage can be chosen to be normalized. The set of cleavages over $\mathcal{F}$ corresponds to the subset $K$ of $\Arr(\mathcal{F})$ satisfying the following conditions:
\begin{enumerate}
\item[(a)] the $\alpha\in K$ are Cartesian morphisms;
\item[(b)] for any morphism $f:T\to S$ in $\mathcal{E}$ and any $\xi\in\Ob(\mathcal{F}_S)$, there exists a unique $f$-morphism in $K$ with target $\xi$.
\end{enumerate}
For a cleavage defined by $K$ to be normalized, it is necessary and sufficient that $K$ satisfies the following additional condition:
\begin{enumerate}
\item[(c)] the identity morphisms of $\mathscr{F}$ belongs to $K$.
\end{enumerate}
The morphisms of $K$ are called the "transport morphismss" for this defined cleavage.\par
The notion of morphisms of cloven categories is clear: this is defined as an $\mathcal{E}$-functor $\mathcal{F}\to \mathcal{G}$ which sends transport morphisms to transport morphisms (and in particular is a Cartesian functor). In this way, cloven categories over $\mathcal{E}$ form a category, called the \textbf{category of cloven categories over $\mathcal{E}$}. It is clear that products exsits in this category, since if $\mathcal{F}$ is the product of cloven categories $\mathcal{F}_i$ over $\mathcal{E}$, then it is endowed with a natural cleavage. In particular, base changes exists for cloven categories.\par
We denote by $\alpha_f(\xi)$ the canonical morphism $\alpha_f(\xi):f^*(\xi)\to \xi$, which is functorial on $\xi$, i.e. we have a functorial homomorphism
\[\alpha_f:i_Tf^*\to i_S\]
where for $S\in\Ob(\mathcal{E})$, $i_S:\mathcal{F}_S\to \mathscr{F}$ denote the inclusion functor. Now consider morphisms $f:T\to S$ and $g:U\to T$ in $\mathcal{E}$, and let $\xi\in\Ob(\mathcal{F}_S)$. Then there is a unique $U$-morphism
\[c_{f,g}(\xi):g^*f^*(\xi)\to (fg)^*(\xi)\]
such the the following diagram
\[\begin{tikzcd}
g^*(f^*(\xi))\ar[d,swap,"c_{f,g}(\xi)"]\ar[r,"\alpha_g(f^*(\xi))"]&f^*(\xi)\ar[d,"\alpha_f(\xi)"]\\
(fg)^*(\xi)\ar[r,"\alpha_{fg}(\xi)"]&\xi
\end{tikzcd}\]
is commutative (in view of the definition of $(fg)^*(\xi)$). Moreover, this homomorphism is functorial on $\xi$, so we obtain a homomorphism
\[c_{f,g}:g^*f^*\to (fg)^*\]
of functors from $\mathcal{F}_S$ to $\mathcal{F}_U$.
\begin{proposition}\label{fibre cat iff cloven pullback composition isomorphism}
For the cloven category $\mathcal{F}$ over $\mathcal{E}$ to be fibre, it is necessary and sufficient that $c_{f,g}$ are isomorphisms.
\end{proposition}
\begin{proof}
Since $\mathcal{F}$ is already prefibre, it is fibre if and only if composition of Cartesian morphisms are Cartesian, which means exactly that the $c_{f,g}$ are isomorphisms.
\end{proof}
\begin{corollary}\label{fibre cat cloven pullback of isomorphism is equivalence}
If $\mathcal{F}$ is a fibre cloven category, then for any isomorphism $f:T\to S$ in $\mathcal{E}$, $f^*$ is an equivalence of categories.
\end{corollary}
\begin{proof}
In fact, if $g$ is the inverse of $f$, then $f^*$ and $g^*$ are inverses of each other.
\end{proof}
\begin{proposition}\label{fibre cat cloven composition isomorphism with identity formula}
Let $\mathcal{F}$ be a cloven category over $\mathcal{E}$. Then for morphisms
\[\begin{tikzcd}
V\ar[r,"h"]&U\ar[r,"g"]&T\ar[r,"f"]&S
\end{tikzcd}\]
and $\xi\in\Ob(\mathcal{F}_S)$, we have
\begin{gather}
c_{f,\id_T}(\xi)=\alpha_{\id_T}(f^*(\xi)),\quad c_{\id_S,f}(\xi)=f^*(\alpha_{\id_S}(\xi)),\label{fibre cat cloven composition isomorphism with identity formula-1}\\
c_{f,gh}(\xi)\cdot c_{g,h}(f^*(\xi))=c_{fg,h}(\xi)\cdot h^*(c_{f,g}(\xi))\label{fibre cat cloven composition isomorphism with identity formula-2}
\end{gather}
\end{proposition}
\begin{proof}

\end{proof}
The first two relations in \cref{fibre cat cloven composition isomorphism with identity formula}, in the case of a normalized cleavage, can be written into the following simply form:
\begin{equation}\label{fibre cat cloven composition isomorphism with identity formula-3}
c_{f,\id_T}=\id_{f^*},\quad c_{\id_S,f}=\id_{f^*}.
\end{equation}
As for the third one, it is visualized by the commutativity of the diagram
\begin{equation}\label{fibre cat cloven composition isomorphism with identity formula-4}
\begin{tikzcd}
h^*g^*f^*(\xi)\ar[r,"c_{g,h}(f^*(\xi))"]\ar[d,swap,"h^*(c_{f,g}(\xi))"]&(gh)^*(f^*(\xi))\ar[d,"c_{f,gh}(\xi)"]\\
h^*(fg)^*(\xi)\ar[r,"c_{fg,h}"]&(fgh)^*(\xi)
\end{tikzcd}
\end{equation}
In the case of fibre categories (where the $c_{f,g}$ are isomorphisms), this commutativity can be expressed intuitively by the fact that the successive use of isomorphisms of the form $c_{f,g}$ does not lead to "contradictory identifications". We can also write this formula without the variable $\xi$, using the horizontal composition of homomorphisms of functors:
\[c_{fg,h}\cdot(h^*\circ c_{f,g})=c_{f,gh}\cdot(c_{g,h}\circ f^*).\]

We now confine ourselves to normalized cloven categories. Any such category gives rise to the following objects:
\begin{enumerate}
\item[(a)] A map $S\mapsto\mathcal{F}_S$ from $\Ob(\mathcal{E})$ to $\mathbf{Cat}$.
\item[(b)] A map $f\mapsto f^*$, associates each morphism $f:T\to S$ in $\mathcal{E}$ with a functor $f^*:\mathcal{F}_S\to \mathcal{F}_T$.
\item[(c)] A map $(f,g)\mapsto c_{f,g}$, associates each couple of morphisms $f,g$ in $\mathcal{E}$ with a homomorphism of functors $c_{f,g}:g^*f^*\to (fg)^*$.
\end{enumerate}
Moreover, these data satisfy the formule (\ref{fibre cat cloven composition isomorphism with identity formula-3}) and (\ref{fibre cat cloven composition isomorphism with identity formula-4}) given above. (N.B. If we had not limited ourselves to the case of a normalized cleavage, it would have been necessary to introduce an additional object, namely a function $S\mapsto\alpha_S$ which associates to any object $S$ of $\mathcal{E}$ a functorial homomorphism $\alpha_S:(\id_S)^*\to \id_{\mathcal{F}_S}$, and condition (\ref{fibre cat cloven composition isomorphism with identity formula-3}) would then be replaced by condition (\ref{fibre cat cloven composition isomorphism with identity formula-1})).\par
We are now going to show that how we can reconstruct (up to isomorphisms) the normalized cloven category $\mathcal{F}$ over $\mathcal{E}$ using the previous objects. For this, we introduce the notion of \textbf{pseudo-functors} from $\mathcal{E}^{\op}$ to $\mathbf{Cat}$, which is a collection of objects satisfying conditions (a), (b), (c) (or more precisely, normalized pseudo-functors). From our preceding discussion, any normalized cloven category $\mathcal{F}$ over $\mathcal{E}$ defines a pseudo-functor $\mathcal{E}^{\op}\to \mathbf{Cat}$. Conversely, assume that we are given a pseudo-functor $\mathcal{E}^{\op}\to \mathbf{Cat}$, which associates an object $S\in\Ob(\mathcal{E})$ with a category $\mathcal{F}_S$. We put
\[\mathcal{F}_0=\coprod_{S\in\Ob(\mathcal{E})}\Ob(\mathcal{F}_S),\]
which is the sum of the sets $\Ob(\mathcal{F}_S)$; there is an obvious map
\[p_0:\mathcal{F}_0\to \Ob(\mathcal{E}).\]
Let $\bar{\xi}=(S,\xi)$ and $\bar{\eta}=(T,\eta)$ be two elements of $\mathcal{F}_0$, where $\xi\in\Ob(\mathcal{F}_S)$, $\eta\in\Ob(\mathcal{F}_T)$, and let $f\in\Hom_\mathcal{E}(T,S)$; we set
\[h_f(\bar{\eta},\bar{\xi})=\Hom_{\mathcal{F}_T}(\eta,f^*(\xi)).\]
If $g:U\to T$ is another morphism in $\mathcal{E}$ and $\zeta\in\Ob(\mathcal{F}_U)$, then we define a composition law
\[\circ:h_f(\bar{\eta},\bar{\xi})\times h_g(\bar{\zeta},\bar{\eta})\to h_{fg}(\bar{\zeta},\bar{\xi}),\]
i.e. a map
\[\Hom_{\mathcal{F}_T}(\eta,f^*(\xi))\times\Hom_{\mathcal{F}_U}(\zeta,g^*(\eta))\to \Hom_{\mathcal{F}_U}(\zeta,(fg)^*(\xi))\]
by the formula
\[u\circ v=c_{f,g}(\xi)\cdot g^*(u)\cdot v.\]
That is, $u\circ v$ is given by the composition
\[\begin{tikzcd}
\zeta\ar[r,"u"]&g^*(\eta)\ar[r,"g^*(u)"]&g^*f^*(\xi)\ar[r,"c_{f,g}(\xi)"]&(fg)^*(\xi)
\end{tikzcd}.\]
We then set $h(\bar{\eta},\bar{\xi})=\coprod_{f\in\Hom(T,S)}h_f(\bar{\eta},\bar{\xi})$, so that the preceding composition law define a composition map
\[\circ:h(\bar{\eta},\bar{\xi})\times h(\bar{\zeta},\bar{\eta})\to h(\bar{\zeta},\bar{\xi}).\]
The definition of $h(\bar{\eta},\bar{\xi})$ gives a map
\[p_{\bar{\eta},\bar{\xi}}:h(\bar{\eta},\bar{\xi})\to \Hom(T,S).\]
\begin{proposition}\label{fibre cat cloven given by pseudo-functor to Cat}
The set $\mathcal{F}_0$, togher with the $h(\bar{\eta},\bar{\xi})$, give rise to a normalized cloven category $p:\mathcal{F}\mathcal{E}$. 
\end{proposition}
\begin{proof}

\end{proof}
\begin{example}\label{fibre cat cloven fiven by functor to Cat}
Let $F:\mathcal{E}^{\op}\to \mathbf{Cat}$ be a functor. Then $F$ can be considered as a pseudo-functor by setting
\[\mathcal{F}_S=F(S),\quad f^*=F(f),\quad c_{f,g}=\id_{(fg)^*},\]
so we can construct the fibre category $\mathcal{F}$ associated with $F$. For a cloven fibre category $\mathcal{F}$ over $\mathcal{E}$ to be isomorphic to that defined by a functor $F:\mathcal{E}^{\op}\to \mathbf{Cat}$, it is necessary and sufficient that the following condition is satisfied for any morphisms $f,g$ of $\mathcal{E}$:
\[(fg)^*=g^*f^*,\quad c_{f,g}=\id_{(fg)^*}.\]
In terms of the set $K$ of transport morhisms, this signifies that $K$ is stable under composition. A cleavage of a category $\mathcal{F}$ over $\mathcal{E}$ satisfying this condition is said to be \textbf{splitting}, and a category $\mathcal{F}$ over $\mathcal{E}$ endowed with a splitting cleavage is called a \textbf{split fiber category over $\mathcal{E}$}. It is immediate that the category of split fiber categories over $\mathcal{E}$ is equivalent to $\sHom(\mathcal{E}^{\op},\mathbf{Cat})$.\par
If $\mathcal{F}$ is a fibre category over $\mathcal{E}$, there does not exists (in general) a split over $\mathcal{F}$. Suppose for example that $\Ob(\mathcal{E})$ and $\Ob(\mathcal{F})$ are both reduced to a singleton, and that the endomorphism sets are groups $F$ and $E$, respectively. The functor $p$ then corresponds to a group homomorphism $\phi:E\to F$, and is surjective if $p$ is fibrant. We see that the cleavages of $\mathcal{F}$ over $\mathcal{E}$ corresponds to maps $s:E\to F$ such that $ps=\id_E$, and a cleavage over $\mathcal{F}$ is splitting if and only if $s$ is a group homomorphism. Therefore, the fibre category $\mathcal{F}$ is split if and only if the extension $F$ of the group $E$ by $G=\ker\phi$ is trivial.\par
Suppose that $\mathcal{F}$ is a fibre category over $\mathcal{E}$ such that $\mathcal{F}_S$ are \textbf{rigid categories}, i.e. the automorphism groups of any object of $\mathcal{F}_S$ is trivial (in this case, $\mathcal{F}_S$ is also called a \textbf{setoid}). Then it is easy to see that there exists a splitting of $\mathcal{F}$ over $\mathcal{E}$. In fact, we first note that the question of the existence of a splitting is unchanged if we replaces $\mathcal{F}$ by an equivalent $\mathcal{E}$-category, which brings us to the case where $\mathcal{F}_S$ are \textit{sets}. In this case, the pullback of an object $\xi\in\Ob(\mathcal{F}_S)$ under a morphism $f:T\to S$ in $\mathcal{E}$ is necessarily unique (if exists), so we conclude that there eixsts a unique cleavage of $\mathcal{F}$ over $\mathcal{E}$, which is necessarily splitting. In particular, we obtain an equivalence from the category of fibre categories in setoids over $\mathcal{E}$ to the category of functors $\mathcal{E}^{\op}\to \mathbf{Set}$.
\end{example}
Before we proceed further to give examples of fibre categories, we shall introduce here the notion of \textit{cofibre} categories and bifibre categories. This is defined to be a category over $\mathcal{E}$ that has both pullbacks and pushouts. More precisely, consider a category $\mathscr{F}$ over $\mathcal{E}$, with structural functor $p:\mathcal{F}\to \mathcal{E}$. Then we also have a functor
\[p^{\op}:\mathcal{F}^{\op}\to \mathcal{E}^{\op}\]
on opposite categories. A morphism $\alpha:\eta\to \xi$ lying over $f:T\to S$ in $\mathcal{F}$ is said to be co-Cartesian if it is a Cartesian morphism in $\mathcal{F}^{\op}$ over $\mathcal{E}^{\op}$. Explicitly, this means for any object $\xi'$ in $\mathcal{F}_S$, the map
\[\Hom_S(\xi,\xi')\to \Hom_f(\eta,\xi')\]
is bijective. In this case, we also say that $(\xi,\alpha)$ is a direct image of $\eta$ under $f$, in the category $\mathcal{F}$. If such an image exists for any $\eta$ in $\mathcal{F}_T$, we then obtain a direct image functor, denoted by $f_*:\mathcal{F}_T\to \mathcal{F}_S$ (as always, this depends on the choice of diect images); it is therefore defined by the isomorphism of bifunctors over $\mathcal{F}_T^{\op}\times\mathcal{F}_S$:
\[\Hom_S(f_*(\eta),\xi)\stackrel{\sim}{\to }\Hom_f(\eta,\xi).\]
If $f_*$ exists, then for the inverse image functor $f^*$ to exist, it is necessary and sufficient that $f_*$ admits an adjoint functor, i.e. a functor $f^*:\mathcal{F}_S\to \mathcal{F}_T$ such that there is an isomorphism of bifunctors
\[\Hom_S(f_*(\eta),\xi)\stackrel{\sim}{\to }\Hom_T(\eta,f^*(\xi)).\]
Let $g:U\to T$ be another morphism in $\mathcal{E}$, and suppose that the inverse images and direct images exists for $f,g$ and $fg$. Consider the functorial homomorphisms
\[c^{f,g}:(fg)_*\to f_*g_*,\quad c_{f,g}:g^*f^*\to (fg)^*.\]
We note that if we consider $f_*g_*$ and $g^*f^*$ as an adjoint pair, as well as $(fg)_*$ and $(fg)^*$, then the preceding homomorphisms are corresponded under adjunction. Therefore, one of them is an isomorphism if and only if the other is. In particular, we obtain the following result:
\begin{proposition}\label{fibre cat bi-prefibre is fibre iff bifire}
Suppose that the category $\mathcal{F}$ over $\mathcal{E}$ is prefibre and coprefibre. Then for it to be fibre (resp. cofibre), it is necessary and sufficient that it is cofibre.
\end{proposition}
Of course, we say that $\mathcal{F}$ is coprefire (resp. cofibre) over $\mathcal{E}$ if $\mathcal{F}^{\op}$ is prefibre (resp. fibre) over $\mathcal{E}^{\op}$, and $\mathcal{F}$ is said to be \textbf{bifibre} if it is both fibre and cofibre over $\mathcal{E}$.
\begin{example}[\textbf{Arrow category over $\mathcal{E}$}]
Let $\mathcal{E}$ be a category. We define the \textbf{arrow category} over $\mathcal{E}$ as follows:
\begin{itemize}
\item Objects of $\mathbf{Arr}(\mathcal{E})$ are morphisms (arrows) in $\mathcal{E}$.
\item If $f:T\to S$ and $g:Y\to X$ are objects of $\mathbf{Arr}(\mathcal{E})$, a morphism from $f$ to $g$ is defined to be a pair $(u,v)$ of morphisms $u:Y\to T$, $v:X\to S$ such that the following diagram is commutative:
\[\begin{tikzcd}
Y\ar[d,swap,"u"]\ar[r,"g"]&X\ar[d,"v"]\\
T\ar[r,"f"]&S
\end{tikzcd}\]
\end{itemize}
The functor which sends a morphism in $\mathcal{E}$ to its target then defines a canonical functor
\[p:\mathbf{Arr}(\mathcal{E})\to \mathcal{E}.\]
For any object $S$ of $\mathcal{E}$, the categorical fiber $\mathbf{Arr}(\mathcal{E})_S$ is canonically isomorphic to the category $\mathcal{E}_{/S}$ of objects lying over $S$.\par
Consider a morphism $f:T\to S$ in $\mathcal{E}$, which then correponds to a canonical functor
\[f_*:\mathcal{E}_{/T}=\mathbf{Arr}(\mathcal{E})_T\to \mathcal{E}_{/S}=\mathbf{Arr}(\mathcal{E})_S\]
and a functorial isomorphism
\[\Hom_S(f_*(\eta),\xi)\stackrel{\sim}{\to }\Hom_f(\eta,\xi)\]
which makes $f_*$ a functor (called the \textbf{direct image functor} of $f$ in $\mathbf{Arr}(\mathcal{E})$). Moreover, we have 
\[(\id_S)_*=\id_{\mathbf{Arr}(\mathcal{E})_S},\quad (fg)^*=f_*g_*,\quad c^{f,g}=\id_{fg},\]
so $\mathbf{Arr}(\mathcal{E})$ is endowed with a co-splitting over $\mathcal{E}$, and a fortiori is co-fibre over $\mathcal{E}$. We also note that by definition, a morphism
\[\begin{tikzcd}
Y\ar[d,swap,"u"]\ar[r,"g"]&X\ar[d,"v"]\\
T\ar[r,"f"]&S
\end{tikzcd}\]
in $\mathbf{Arr}(\mathcal{E})$ is Cartesian if and only if this square is Cartesian in $\mathcal{E}$, i.e. $Y$ is a fiber product of $X$ and $T$ over $S$. Therefore, the inverse image functor $f^*$ exists if and only if fiber products exists in $\mathcal{E}$. It follows from \cref{fibre cat bi-prefibre is fibre iff bifire} that if fiber products in $\mathcal{E}$, i.e. if $\mathcal{F}$ is prefibre over $\mathcal{E}$, then it is fibre over $\mathcal{E}$.
\end{example}
\begin{example}[\textbf{Category of presheaves over $\mathbf{Top}$}]
Let $\mathcal{E}=\mathbf{Top}$ be the category of topological spaces. If $T$ is a topological space, we denote by $\mathcal{U}(T)$ the category of open subsets of $T$, where the morphisms are induced by inclusions. If $\mathcal{C}$ is a category, a functor $F:\mathcal{U}(T)^{\op}\to \mathcal{C}$ is called a presheaf over $T$ with values in $\mathcal{E}$, and a sheaf if it satisfies some additional exactness conditions. The category $\PSh(T)$ of presheaves over $T$ with values in $\mathcal{C}$, is by definition the category $\sHom(\mathcal{U}(T)^{\op},\mathcal{C})$, and the category $\Sh(T)$ of sheaves over $T$ with values in $\mathcal{T}$ is a full subcategory of $\PSh(T)$. If $f:T\to S$ is a morphism in $\mathcal{E}$, i.e. a continuous map of topological spaces, then it corresponds to a functor
\[\mathcal{U}(S)\to \mathcal{U}(T),\quad U\mapsto f^{-1}(U),\]
whence a functor
\[f_*:\PSh(T)\to \PSh(S)\]
called the direct image functor of presheaves under $f$. We also see that the direct image of a sheaf is a sheaf, so $f_*$ induces a functor $f_*:\Sh(T)\to \Sh(S)$. Moreoever, by the associativity of the composition of the functors, we have, for a second map $g:U\to T$, the identity
\[(gf)_*=g_*f_*,\quad (\id_S)_*=\id_{\PSh(S)}.\]
Therefore we obtain a functor $S\mapsto\PSh(S)$ (resp. $S\mapsto\Sh(S)$) from the category $\mathcal{E}$ to $\mathbf{Cat}$. The corresponding functor $S\mapsto\PSh(S)^{\op}$ (resp. $S\mapsto\Sh(S)^{\op}$) then defines a cofibre (and cosplitting) category over $\mathbf{Top}$, called the \textbf{cofibre category of presheaves} (resp. \textbf{sheaves}) \textbf{with values in $\mathcal{C}$}, and denoted by $\PSh$ (resp. $\Sh$). By the construction before \cref{fibre cat cloven given by pseudo-functor to Cat}, we see that a morphism of a presheaf $G$ over $T$ to a presheaf $F$ over $S$ is defined to be a couple $(\phi,f)$, where $f:T\to S$ is a continuous map and $\phi:F\to f_*(G)$ is a morphism in $\PSh(S)$. This description also applies to the morphisms of sheaves, since $\Sh$ is a full subcategory of $\PSh$.\par
In most important cases, the categories $\PSh$ and $\Sh$ over $\mathcal{E}$ are also fibre categories, i.e., for any continuous map $f:T\to S$, the direct image functors $f_*:\PSh(T)\to \PSh(S)$ and $f_*:\Sh(T)\to \Sh(S)$ admit adjoints, which is then denoted by $f^*$ and called the \textbf{inverse image functor} of presheaves (resp. sheaves) by the continuous $f$. The functor $f^*:\PSh(T)\to \PSh(S)$ exists as long as the category $\mathcal{C}$ admits inductive limits, so the problem is that for $\Sh$. For example, if $\mathcal{C}=\mathbf{Set}$, then the inverse limit of a sheaf (considered as a presheaf) is in general not a sheaf, so we can not just hope that the inverse image functor of $\PSh$ restricts to $\Sh$ (despite their common notation $f^*$). Therefore, we see that $\Sh$ is a cofibre subcategory of $\PSh$, but not a \textit{fibre subcategory}, i.e. the inclusion functor $\Sh\to \PSh$ is not fibrant.\par
The cofibre category $\mathbf{PSh}$ can be deduced from a more general cofibre category. For this, we note that the association $\mathcal{U}\mapsto\sHom(\mathcal{U},\mathcal{C})$ is naturally a contravariant functor on $\mathcal{U}$, from the category $\mathbf{Cat}$ to $\mathbf{Cat}$, so it defines a split fibre category over $\mathcal{E}=\mathbf{Cat}$, which we denote by $\mathbf{Cat}_{(-,\mathcal{C})}$. The objects of this category are the couples $(\mathcal{U},p)$ of a category $\mathcal{U}$ and a functor $p:\mathcal{U}\to \mathcal{C}$, and a morphism of $(\mathcal{U},p)$ to $(\mathcal{V},q)$ is essentially a couple $(f,u)$, where $f:\mathcal{U}\to \mathcal{V}$ is a functor and $u:p\to qf$ is a homomorphism of functors:
\[\begin{tikzcd}[column sep=5mm,row sep=10mm]
\mathcal{U}\ar[rd,swap,"p",""{name=U, below}]\ar[rr,"f"]&&\mathcal{V}\ar[ld,"q"]\\
&\mathcal{C}&
\arrow[Rightarrow,from=U,to=1-3,"u",shorten <=2mm,shorten >=2mm]
\end{tikzcd}\]
The composition of two morphisms $(f,u):(\mathcal{U},p)\to (\mathcal{V},q)$ and $(g,v):(\mathcal{V},q)\to (\mathcal{W},r)$ is given by the couple $(fg,w)$, where $w:p\to rgf$ is given by the composition $w=(v\circ f)\cdot u$:
\[\begin{tikzcd}[column sep=5mm,row sep=10mm]
&\mathcal{V}\ar[rr,"g"]\ar[rd,"q"description,""{name=V}]&&\mathcal{W}\ar[ld,"r"]\\
\mathcal{U}\ar[ru,"f"]\ar[rr,swap,"p",""{name=U,above}]&&\mathcal{C}
\arrow[Rightarrow,from=U,to=1-2,"u",shorten <=1mm,shorten >=2mm,pos=0.4]
\arrow[Rightarrow,from=V,to=1-4,"v",
start anchor={[xshift=-1pt,yshift=-3pt]},
shorten <=1mm,shorten >=2mm]
\end{tikzcd}\]
The projection functor $\mathscr{F}=\mathbf{Cat}_{(-,\mathcal{C})}\to \mathcal{E}$ is then defined to associate a couple $(\mathcal{U},p)$ with the object $\mathcal{U}$, and the categorical fiber $\mathcal{F}_\mathcal{U}$ over $\mathcal{U}$ is the category $\sHom(\mathcal{U},\mathcal{C})$. If $\mathcal{C}$ admits inductive limits, then the fibre category $\mathbf{Cat}_{(-,\mathcal{C})}$ over $\mathbf{Cat}$ is equally cofibre over $\mathbf{Cat}$, i.e. we can define the direct image of a functor $p:\mathcal{U}\to \mathcal{C}$ by a functor $f:\mathcal{U}\to \mathcal{V}$. The category $\PSh$ of presheaves is induced from $\mathcal{F}$ by the base change defined by the functor
\[\mathbf{Top}^{\op}\to \mathbf{Cat},\quad S\mapsto\mathcal{U}(S)\]
which gives a fibre category on $\mathbf{Top}^{\op}$, and by passing to the opposite category, we obtain the cofibre category $\PSh$ of the presheaves over $\mathbf{Top}$. Note that under this identification, the inverse image (resp. direct image) of a functor corresponds to the direct image (resp. inverse image) of a presheaf.
\end{example}
\begin{example}
Let $\mathcal{F}$ be a category over $\mathcal{E}$ and $S$ be an object of $\mathcal{E}$ acted by a group $G$. This object then corresponds to a functor $\lambda:\mathcal{E}'\to \mathcal{E}$ from category $\mathcal{E}'$ defined by $G$ (with a single object and the endomorphism being $G$) to $\mathcal{E}$. By base change, we then obtain a category $\mathscr{F}'$ over $\mathcal{E}'$, which is fibre (resp. cofibre) if and only if $\mathcal{F}$ is fibre (resp. cofibre) over $\mathcal{E}$ (\cref{fibre cat morphism Cartesian iff base change}). A section of $\mathcal{E}'$ over $\mathcal{F}'$ (necessarily Cartesian, because $\mathcal{E}'$ is a gropoid and any isomorphism in $\mathcal{F}'$ is Cartesian) can also be interpreted as an $\mathcal{E}$-functor $\mathcal{E}'\to \mathcal{F}$ lying over $\lambda$, or also as an object $\xi$ in $\mathcal{F}$ acted by $G$ which is "lying over" the object $S$.
\end{example}
\begin{example}\label{fibre cat given by quasi-inverse of cat}
If the base category $\mathcal{E}$ is reduced to two objects $a,b$ and the only nontrivial morphisms are $f:a\to b$ and $g:b\to a$, which are inverses of each other, a normalized cloven category $\mathcal{F}$ over $\mathcal{E}$ is essentially the a system formed by two categories $\mathcal{F}_a$, $\mathcal{F}_b$ and an adjoint pair $G\dashv F:\mathcal{F}_a\to \mathcal{F}_b$ of functors, which are equivalences of categories. In fact, we can choose $\mathcal{F}_a$ and $\mathcal{F}_b$ to be the fibers of $\mathcal{F}$, the $F$, $G$ are the functors $f^*$ and $g^*$, and the two isomorphisms
\[u:FG\stackrel{\sim}{\to }\id_{\mathcal{F}_a},\quad GF\stackrel{\sim}{\to }\id_{\mathcal{F}_b}\]
are $c_{g,f}$ and $c_{f,g}$. The usual compatibility conditions followws from (\ref{fibre cat cloven composition isomorphism with identity formula-4}) for the composition $fgf$ and $gfg$.\par
An interesting case is the following: assume that we have
\[\mathcal{F}_b=\mathcal{F}_a^{\op},\quad G=F^{\op},\quad v=u^{\op}.\]
In general, a functor $D:\mathcal{C}\to \mathcal{C}^{\op}$ and an isomorphism $u:DD^\op\stackrel{\sim}{\to }\id_\mathcal{C}$ such that the isomorphism $u^{\op}:D^\circ D\stackrel{\sim}{\to }\id_{\mathcal{C}^{\op}}$ makes $(D,D^\circ)$ an adjoint pair is called an \textbf{autoduality} on $\mathcal{C}$.
\end{example}
\begin{example}\label{fibre cat over set}
Let $\mathcal{E}$ be a discrete category, so that it is defined by a set $I=\Ob(\mathcal{E})$. Then a category $\mathcal{F}$ over $\mathcal{E}$ is given a family of categories $\mathcal{F}_i$ ($i\in I$), the categorical fibers, any category $\mathcal{F}$ over $\mathcal{E}$ is fibre, any $\mathcal{E}$-functor $\mathcal{F}\to \mathcal{G}$ is Cartesian, and we have a canonical isomorphism
\[\sHom_{/\mathcal{E}}(\mathscr{F},\mathcal{G})\stackrel{\sim}{\to }\prod_i\sHom(\mathscr{F}_i,\mathcal{G}_i).\]
In particular, the category $\bm{\Gamma}(\mathcal{F}/\mathcal{E})=\bm{\Gamma}_{\Cart}(\mathcal{F}/\mathcal{E})$ is isomorphic to $\prod_i\mathcal{F}_i$.
\end{example}
\begin{example}\label{fibre cat given by a Hom functor}
Suppose that $\mathcal{E}$ has exactly two objects $S$ and $T$, and a unique nontrivial morphism $f:T\to S$. Then a category $\mathcal{F}$ over $\mathcal{E}$ is defined by two categories $\mathcal{F}_S$, $\mathcal{F}_T$ and a bifunctor $H(-,-)$ over $\mathcal{F}_T^\op\times\mathcal{F}_S$ with values in $\mathbf{Set}$. In fact, this bifunctor is given by $H(\eta,\xi)=\Hom_f(\eta,\xi)$, where $\eta\in\Ob(\mathcal{F}_T)$ and $\xi\in\Ob(\mathcal{F}_S)$. For the considered category to be fibre (or prefibre, which is the same), it is necessary and it is sufficient that the functor $H(\eta,-)$ be representable for any $\eta\in\Ob(\mathcal{F}_T)$, and for it to be cofibre, it is necessary and sufficient that the functor $H(-,\xi)$ be representable for any $\xi\in\Ob(\mathcal{F}_S)$.
\end{example}
\subsection{Functors of fibre categories}
Let $\mathcal{F}$ be a normalized cloven category over $\mathcal{E}$. For any object $S$ of $\mathcal{E}$, we denote by $i_S:\mathcal{F}_S\to \mathcal{F}$ the inclusion functor. We then have a functorial homomorphism, for any morphism $f:T\to S$ in $\mathcal{E}$:
\[\alpha_f:i_Tf^*\to i_S,\]
where $f^*$ is the inverse image functor $\mathcal{F}_S\to \mathcal{F}_T$ for $f$ defined by the cleavage. Now let $F:\mathcal{F}\to \mathcal{C}$ be a functor from $\mathcal{F}$ into a category $\mathcal{C}$. For $S\in\Ob(\mathcal{E})$, we set
\[F_S:=F\circ i_S:\mathcal{F}_S\to \mathcal{C}\]
and for any morphism $f:T\to S$ in $\mathcal{E}$, we define
\[\varphi_f:=F\circ\alpha_f:F_Tf^*\to F_S.\]
We therefore obtain a family $(F_S)$ of functors $\mathcal{F}_S\to \mathcal{C}$, and a family $(\varphi_f)$ of homomorphisms of functors $F_Tf^*\to F_S$. This family satisfies the following conditions:
\begin{enumerate}
\item[(a)] $\varphi_{\id_S}=\id_{F_S}$.
\item[(b)] For two morphisms $f:T\to S$ and $g:U\to T$ in $\mathcal{E}$, we have a commutative diagram
\[\begin{tikzcd}
F_Ug^*f^*\ar[r,"F_U\circ c_{f,g}"]\ar[d,"\varphi_g\circ f^*"]&F_U(fg)^*\ar[d,"\varphi_{fg}"]\\
F_Tf^*\ar[r,"\varphi_f"]&F_S
\end{tikzcd}\]
\end{enumerate}
In fact, the fitst relation is trivial, and the second one is obtained by applying $F$ to the commutative diagram
\[\begin{tikzcd}
g^*f^*(\xi)\ar[r,"c_{f,g}(\xi)"]\ar[d,"\alpha_g(f^*(\xi))"]&(fg)^*(\xi)\ar[d,"\alpha_{fg}(\xi)"]\\
f^*(\xi)\ar[r,"\varphi_f"]&\xi
\end{tikzcd}\]
for any object $\xi$ in $\mathcal{F}_S$.\par
If $G:\mathcal{F}\to \mathcal{C}$ is another functor, given by functors $G_S:\mathcal{F}_S\to \mathcal{C}$ and the functorial homomorphisms $\psi_f:G_Tf\to G_S$, and if $u:F\to G$ is a functorial homomorphism, then there is a corresponding homomorphism $u_S=u\circ i_S:F_S\to G_S$, and for any morphism $f:T\to S$ in $\mathcal{E}$, we have a commutative diagram
\begin{equation}\label{fibre cat functor diagram-1}
\begin{tikzcd}
F_Tf^*\ar[r,"\phi_f"]\ar[d,swap,"u_T\circ f^*"]&F_S\ar[d,"u_S"]\\
G_Tf^*\ar[r,"\psi_f"]&G_S
\end{tikzcd}
\end{equation}
\begin{proposition}\label{fibre cat functor to cat char by fiber}
Let $\mathcal{H}(\mathcal{F},\mathcal{C})$ be the category of couples of familys $(F_S)_{S\in\Ob(\mathcal{F})}$ of functors $\mathcal{F}_S\to \mathcal{C}$ and the families $(\varphi_f)_{f\in\Arr(\mathcal{F})}$ of functorial homomorphisms $F_Tf^*\to F_S$, satisfying conditions (a) and (b), with morphisms being the families $(u_S)_{S\in\Ob(\mathcal{F})}$ of homomorphisms $F_S\to G_S$ such that the diagram (\ref{fibre cat functor diagram-1}) commutes. Then there is an isomorphism from $\sHom(\mathcal{F},\mathcal{C})$ to the category $\mathcal{H}(\mathcal{F},\mathcal{C})$.
\end{proposition}
\begin{proof}

\end{proof}

\subsection{Categories fibre in groupoids}
\begin{proposition}\label{fibre cat in groupoid def}
Let $\mathcal{F}$ be a category over $\mathcal{E}$. Then the following conditions are equivalent:
\begin{enumerate}
\item[(\rmnum{1})] Every morphism of $\mathcal{F}$ is Cartesian.
\item[(\rmnum{2})] $\mathcal{F}$ is a fibre category over $\mathcal{E}$ and for any $S\in\Ob(\mathcal{E})$, the category $\mathcal{F}_S$ is a groupoid.
\end{enumerate}
\end{proposition}
\begin{proof}
In fact, it is clear that (\rmnum{1}) implies (\rmnum{2}), and conversely, condition (\rmnum{2}) implies that for any morphism $\alpha:\eta\to \xi$ in $\mathcal{F}$, the object $\eta$ is isomorphic to $f^*(\xi)$ in $\mathcal{F}_T$, where $f=p(\alpha)$.
\end{proof}

A category $\mathcal{F}$ over $\mathcal{E}$ satisfying the above equivalent conditions is called a \textbf{fibre category in groupoids}. If $\mathcal{E}$ is a groupoid, then the above conditions is also equivalent to the following:
\begin{enumerate}
\item[(\rmnum{3})] $\mathcal{F}$ is a groupoid and the structural functor $p:\mathcal{F}\to \mathcal{E}$ is transportable. 
\end{enumerate}
For example, if $\mathcal{E}$ and $\mathcal{F}$ are groupoids such that $\Ob(\mathcal{E})$ and $\Ob(\mathcal{F})$ are reduced to singletones, which means $\mathcal{E}$ and $\mathcal{F}$ are defined by groups $E$ and $F$ and the functor $p:\mathcal{F}\to \mathcal{E}$ is defined by a homomorphism $\phi:F\to E$. Then $\mathcal{F}$ is fibre over $\mathcal{E}$ if and only if $p$ is surjective, i.e. if $\phi$ defines an extension of the group $E$ by the group $G=\ker\phi$. 

\begin{proposition}\label{fibre cat in groupoid Hom cat is groupoid}
Let $\mathcal{F}$ and $\mathcal{G}$ be categories fibered in groupoids over $\mathcal{E}$. Then $\sHom_{\Cart}(\mathcal{F},\mathcal{G})$ is a groupoid.
\end{proposition}
\begin{proof}
We have to show that if $f,g:\mathcal{F}\to\mathcal{G}$ are two morphisms of fibre categories and $u:f\to g$ is a morphism, then for any $X\in\mathcal{F}$, the morphism $u(X):f(X)\to g(X)$ is an isomorphism. This is clear for if $S\in\mathcal{E}$ is the image of $X$ in $\mathcal{E}$, then $u(X)$ is, by definition, a morphism in $\mathcal{G}_S$, hence is an isomorphism.
\end{proof}

\begin{example}
One important construction of categories fibered in groupoids is the following. Let $\mathcal{E}$ be a category with finite fiber products. A \textbf{groupoid in $\mathcal{E}$} is defined to be a collection of data $(X_0,X_1,s,t,\eps,i,m)$ as follows:
\begin{enumerate}
    \item[(a)] $X_0$ and $X_1$ are objects of $\mathcal{E}$.
    \item[(b)] $s:X_1\to X_0$, $t:X_1\to X_0$, $\eps:X_0\to X_1$, $m:X_1\times_{s,X_0,t}X_1\to X_1$ are morphisms in $\mathcal{E}$ (we usually refer to $s$ as the "source", $t$ as the "target", $\eps$ as the "identity", $i$ as the "inverse", and $m$ as the "composition" morphism).
\end{enumerate}
This data is required to satisfy the following conditions:
\begin{enumerate}
    \item[(A)] We have the identities:
    \[s\circ\eps=t\circ\eps=\id,\quad s\circ i=t,\quad t\circ i=s,\quad s\circ m=s\circ\pr_2,\quad t\circ m=t\circ\pr_1.\]
    \item[(B)] (Associativity) The two compositions
    \[\begin{tikzcd}
    X_1\times_{s,X_0,t}X_1\times_{s,X_0,t}X_1\ar[r,shift left=2pt,"m\times\id"]\ar[r,shift right=2pt,swap,"\id\times m"]&X_1\times_{s,X_0,t}X_1\ar[r,"m"]&X_1
    \end{tikzcd}\]
    are equal.
    \item[(C)] (Identity) The two compositions
    \[\begin{tikzcd}
    &X_1\times_{s,X_0}X_0\ar[rd,"\eps\times\id"]&&\\
    X_1\ar[ru,equal]\ar[rd,equal]&&X_1\times_{s,X_0,t}X_1\ar[r,"m"]&X_1\\
    &X_0\times_{X_0,t}X_1\ar[ru,swap,"\id\times\eps"]
    \end{tikzcd}\]
    are equal to $\id_{X_1}$.
    \item[(D)] (Inverse) The diagrams
    \[\begin{tikzcd}
    X_1\ar[r,"i\times\id"]\ar[d,swap,"s"]&X_1\times_{s,X_0,t}X_1\ar[d,"m"]\\
    X_0\ar[r,"\eps"]&X_1
    \end{tikzcd}\quad\quad
    \begin{tikzcd}
    X_1\ar[r,"\id\times i"]\ar[d,swap,"t"]&X_1\times_{s,X_0,t}X_1\ar[d,"m"]\\
    X_0\ar[r,"\eps"]&X_1
    \end{tikzcd}\]
    commute.
\end{enumerate}

For every $S\in\mathcal{E}$, consider the category $X_0(S)/X_1(S)$ whose objects are elements $u\in X_0(S)$ and for which a morphism $u\to u'$ is an element $\xi\in X_1(S)$ for which $s(\xi)=u$ and $t(\xi)=u'$. Given a composition
\[\begin{tikzcd}
u''\ar[r,"\eta"]&u'\ar[r,"\xi"]&u
\end{tikzcd}\]
we define $\xi\circ\eta$ to be the image under $m$ of the element $(\xi,\eta)\in X_1(S)\times_{s,X_0(S),t}X_1(S)$. The above axioms ensure that $X_0(S)/X_1(S)$ is a category and in fact a groupoid (the inverse of $\xi\in X_1(S)$ is given by $i(\xi)$).\par
Note als that for any morphism $f:T\to S$ in $\mathcal{E}$, there is a functor
\[f^*:X_0(S)/X_1(S)\to X_0(T)/X_1(T)\]
induced by the pullback maps
\[f^*:X_0(S)\to X_0(T),\quad f^*:X_1(S)\to X_1(T),\]
and for a composition $U\stackrel{g}{\to}T\stackrel{f}{\to}S$, the two functors $g^*\circ f^*$ and $(fg)^*$ are equal (not just isomorphic). We then define a fibre category $p:X_0/X_1\to\mathcal{E}$ with objects pairs $(S,u)$, where $S\in\mathcal{E}$ and $u\in X_0(S)/X_1(S)$. A morphism $(T,v)\to (S,u)$ in $X_0/X_1$ is a pair $(f,\alpha)$, where $f:T\to S$ is a morphism in $\mathcal{E}$ and $\alpha:v\to f^*u$ is an isomorphism in $X_0(T)\to X_1(T)$. The composition of arrows
\[\begin{tikzcd}
(U,w)\ar[r,"{(g,\beta)}"]&(T,v)\ar[r,"{(f,\alpha)}"]&(S,u)
\end{tikzcd}\]
is defined to be $(f\circ g,g^*(\alpha)\circ\beta)$. The functor $p$ sends $(S,u)$ to $S$. In this way, we obtain a fibre category over $\mathcal{E}$ whose fiber over $S\in\Ob(\mathcal{E})$ is the groupoid $X_0(S)/X_1(S)$.
\end{example}

\section{Grothendieck topologies and sheaves}
\subsection{Topologies and basis}
Let $\mathcal{C}$ be a category. A subcategory $\mathcal{D}$ of $\mathcal{C}$ is called a \textbf{sieve} of $\mathcal{C}$ if it satisfies the following property: any object of $\mathcal{C}$ such that there exists a morphism from this object to an object of $\mathcal{D}$ is in $\mathcal{D}$. If $X$ is an object of $\mathcal{C}$, then the sieves of the category $\mathcal{C}_{/X}$ are also called \textbf{sieves on $X$}.\par
Let $\mathscr{U}$ be a universe such that $\mathcal{C}$ is a $\mathscr{U}$-category, and $\PSh(\mathcal{C})$ be the corresponding category of presheaves. For any sieve on $X$, we can define a sub-object of $X$ in $\PSh(\mathcal{C})$ by associating any object $Y$ in $\mathcal{C}$ with the set of morphisms $f:Y\to X$ such that the object $(Y,f)$ of $\mathcal{C}_{/X}$ belongs to the sieve. In this way, we obtain a correspondence between sieves and sub-objects:
\begin{proposition}\label{category sieve and subobject correspondence}
The association defined above is a correspondence between the set of sieves of $\mathcal{C}_{/X}$ and the set of sub-objects of $X$ in $\PSh(\mathcal{C})$.
\end{proposition}
\begin{proof}
It suffices to establish a converse process from sub-objects of $X$ in $\PSh(\mathcal{C})$ to sieves of $X$. For this, we associate each sub-functor $R$ of $X$ with the category $\mathcal{C}_{/R}$ of objects lying over $R$. Since $R\sub X$, it is immediate that $\mathcal{C}_{/R}$ is a sieve of $\mathcal{C}_{/X}$, whose corresponding sub-object of $X$ is $R$.
\end{proof}
Let $\mathcal{C}$ be a $\mathscr{U}$-category. In view of \cref{category sieve and sub-object correspondence}, we shall identify sieves of $X$ with sub-objects of $X$ in the category $\PSh(\mathcal{C})$. In this way, for any presheaf $F$ and any sieve $R$ of $X$, we can then define $\Hom_{\PSh(\mathcal{C})}(R,F)$ to be the set of morphisms of functors $R\to F$, and we have a functorial isomorphism (\cite{SGA4-1}, \Rmnum{1}, 3.5)
\begin{equation}\label{category Hom of functors char by limit}
\Hom_{\PSh(\mathcal{C})}(R,F) \stackrel{\sim}{\to } \llim_{Y\in\mathcal{C}_{/R}}F(Y).
\end{equation}
Therefore, \cref{category sieve and subobject correspondence} allows us to transport the usual operations on functors to sieves; here are a few examples.
\begin{itemize}
\item \textbf{Base change}. Let $R$ be a sieve of $X$ and $f:Y\to X$ be a morphism in $\mathcal{C}$. The fiber product $R\times_XY$ is then a sieve of $Y$, which is called the \textbf{base change} of $R$ to $Y$. The corresponding subcategory of $\mathcal{C}_{/Y}$ is then the inverse image of the subcategories of $\mathcal{C}_{/X}$ defined by $R$ under the morphism $f$.
\item \textbf{Order relation, intersection, union}. The inclusion of sub-functors of $X$ is an order relation, which then defines an order relation on sieves of $X$. We define the union and intersection of a family of sieves as the supremum and infimum of the corresponding family of sub-presheaves.
\item \textbf{Image, generated sieve}. Let $(F_\alpha)_{\alpha\in I}$ be a family of presheaves and $f_\alpha:F_\alpha\to X$ be a morphism for each $\alpha$, where $X$ is an object of $\mathcal{C}$. We define the image of this family of morphisms to be the union of the images of $f_\alpha$, which is then a sieve of $X$. In particular, if the $F_\alpha$ are objects of $\mathcal{C}$, the image sieve is called the \textbf{sieve generated by the morphisms $f_\alpha$}. The corresponding subcategory of $\mathcal{C}_{/X}$ is by definition the full subcategory of $\mathcal{C}_{/X}$ formed by objects $Y\to X$ such that there exists an $X$-morphism of $Y$ into one of the $F_\alpha$.
\end{itemize}

The use of sieves allows us to define a topology on a category $\mathcal{C}$. Roughly speaking, this amounts to associate for each object $X$ of $\mathcal{C}$ a class of sieves of $X$. A sieve of $X$ in this class can then be considered as a \textit{covering} of $X$, or a way to "localize" $X$.
\begin{definition}
Let $\mathcal{C}$ be a category. A \textbf{topology} $\mathcal{T}$ on $\mathcal{C}$ is the assignment to each object $X$ of $\mathcal{C}$ of a set $\mathcal{T}(X)$ of sieves of $X$, so that the following conditions are satisfied:
\begin{enumerate}[leftmargin=40pt]
\item[(T1)] (\textbf{Stable under base change}). For any object $X$ of $\mathcal{C}$, any sieve $R\in\mathcal{T}(X)$ and any morphism $f:X\to Y$ in $\mathcal{C}$, the sieve $R\times_XY$ of $Y$ belongs to $\mathcal{T}(Y)$.
\item[(T2)] (\textbf{Local characterization}). Let $R$ and $R'$ be two sieves of $X$ and assume that $R\in\mathcal{T}(X)$. If for any $Y\in\Ob(\mathcal{C})$ and any morphism $Y\to R$, the sieve $R'\times_XY$ belongs to $\mathcal{T}(Y)$, then $R'$ belongs to $\mathcal{T}(X)$.
\item[(T3)] For any object $X$ of $\mathcal{C}$, $X$ belongs to $\mathcal{T}(X)$.
\end{enumerate}
\end{definition}
The sieves in $\mathcal{T}(X)$ are called \textbf{covering sieves of $X$}, or simply the \textbf{coverings of $X$}. If $R\in\mathcal{T}(X)$, the inclusion $R\hookrightarrow X$ is also called a \textbf{refinement} of $X$. From the above axioms, we immediately deduce that the set of coverings of $X$ is stable under finite intersection and that any sieve containing a covering sieve is a covering sieve. In fact, if $R'$ contains a covering sieve $R$ of $X$, then for any morphism $Y\to R$, we have the following Cartesian diagram
\[\begin{tikzcd}
R\times_XY\ar[r,hook]\ar[d]&R'\times_XY\ar[d]\ar[r,hook]&Y\ar[d]\\
R\ar[d,equal]\ar[r,equal]&R\ar[r,equal]\ar[d,hook]&R\ar[d,hook]\\
R\ar[r,hook]&R'\ar[r,hook]&X
\end{tikzcd}\]
from which we conclude that $R\times_XY$ (and a fortiori $R'\times_XY$) is equal to $Y$, so $R'\in\mathcal{T}(X)$ by axiom (T2). The set $\mathcal{T}(X)$ of covering sieves of $X$, ordered by the inclusion relation, is therefore cofiltered.\par
Let $\mathcal{C}$ be a category and $\mathcal{T},\mathcal{T}'$ be topologies over $\mathcal{C}$. The topology $\mathcal{T}$ is called \textbf{finer than} $\mathcal{T}'$ (or equivalently, $\mathcal{T}'$ is \textbf{coarser than} $\mathcal{T}$) if for any object $X$ of $\mathcal{C}$, any covering of $X$ for the topology $\mathcal{T}'$ is also a covering for the topology $\mathcal{T}$. In this way, we define an order relation on the set of topologies over $\mathcal{C}$.
\begin{example}\label{G-topo intersection and union}
Let $(\mathcal{T}_i)_{i\in I}$ be a family of topologies over $\mathcal{C}$. Then for any object $X$ of $\mathcal{C}$, the intersection of the sets $\mathcal{T}_i(X)$ is easily verified to satisfy the axioms (T1), (T2) and (T3), so it defines a topology $\mathcal{T}$ over $\mathcal{C}$, called the \textbf{intersection} of the $\mathcal{T}_i$. This is the finest topology on $\mathcal{C}$ that coarser than any of the $\mathcal{T}_i$, and is clearly the infimum of the topologies $(\mathcal{T}_i)_{i\in I}$. On the other hand, the family $(\mathcal{T}_i)_{i\in I}$ also admits a supremum: the intersection of the topologies than are finer than each of the $\mathcal{T}_i$.
\end{example}
\begin{example}\label{G-topo discrete}
The topology $\mathcal{T}$ such that $\mathcal{T}(X)$ is the set of sieves of $X$, is clearly the finest topology on $\mathcal{C}$, which is called the \textbf{discrete topology} on $\mathcal{C}$. On the other hand, the coarsest topology on $\mathcal{C}$ is given by $\mathcal{T}(X)=\{X\}$ for any object $X$ of $\mathcal{C}$, which is called the \textbf{trivial topology} on $\mathcal{C}$.
\end{example}
A category $\mathcal{C}$, endowed with a topology, is called a \textbf{site}. The category $\mathcal{C}$ is called the underlying category of the site.
\begin{definition}
Let $\mathcal{C}$ be a site and $X$ be an object of $\mathcal{C}$. A family $\{f_\alpha:X_\alpha\to X\}$ is called a \textbf{covering of $X$} if the sieve generated by the $f_\alpha$ is a covering sieve of $X$.
\end{definition}
Let $\mathcal{C}$ be a category. If for each object $X$ of $\mathcal{C}$ we are given a set of families of morphisms with target $X$, then there exists a coarsest topology $\mathcal{T}$ on $\mathcal{C}$ for which the given families of morphisms are coverings, namely the intersection of all these topologies. This topology is called the \textbf{topology generated by the set of families of morphisms}. In general, it is difficult to describe all the coverings in this topology, but the situation is this topology is generated by a \textit{basis}:
\begin{definition}
Let $\mathcal{C}$ be a category. A \textbf{basis} (for a topology) on $\mathcal{C}$ is the assignment to each object $X$ of $\mathcal{C}$ of a set $\Cov(X)$ of families of morphisms with target $X$ (called \textbf{coverings} of $X$), which satisfies the following conditions:
\begin{enumerate}[leftmargin=40pt]
\item[(PT1)] (\textbf{Stable under base change}). For any object $X$ of $C$, any covering $\{X_\alpha\to X\}$ of $X$, and any morphism $Y\to X$ in $\mathcal{C}$, the fiber products $X_\alpha\times_XY$ exists in $\mathcal{C}$ and the family $\{X_\alpha\times_XY\to Y\}$ is a covering of $X$.
\item[(PT2)] (\textbf{Stable under composition}). If $\{X_\alpha\to X\}$ is a covering of $X$ and for each $\alpha$, $\{X_{\beta\alpha}\to X_\alpha\}$ is a covering of $X_\alpha$, then the composite family $\{X_{\beta\alpha}\to X_\alpha\to X\}$ is a covering of $X$.
\item[(PT3)] The family $\{\id_X:X\to X\}$ is a covering of $X$.
\end{enumerate}
\end{definition}
For any given basis on $\mathcal{C}$, we can consider the topology over $\mathcal{C}$ generated by this basis. Note that if $\mathcal{C}$ is a category where fiber products exist, then any topology $\mathcal{T}$ of $\mathcal{C}$ can be defined by a basis, namely the one for which $\Cov(X)$ is formed by the covering families of $X$ for the topology $\mathcal{T}$.
\begin{proposition}\label{G-topo generated by basis sieve char}
Let $\mathcal{C}$ be a category, $\mathcal{B}$ be a basis on $\mathcal{C}$, $\mathcal{T}$ the topology generated by $\mathcal{B}$, $X$ an object of $\mathcal{C}$. Denote by $\mathcal{T}_{\mathcal{B}}(X)$ the set of sieves of $X$ generated by the families of morphisms of the basis, and by $\mathcal{T}(X)$ the set of covering sieves of $X$ for the topology $\mathcal{T}$. Then $\mathcal{T}_{\mathcal{B}}(X)$ is cofinal in $\mathcal{T}(X)$, in other words, for a sieve $R$ of $X$ to belong to $\mathcal{T}(X)$, it is necessary and sufficient that there exists a sieve $R'$ of $\mathcal{T}_\mathcal{B}(X)$ such that $R'\sub R$. 
\end{proposition}
\begin{proof}
For any object $X$ of $\mathcal{C}$, let $\mathcal{J}(X)$ be the set of sieves of $X$ that contain a sieve of $\mathcal{T}_{\mathcal{B}}(X)$. We have evidently $\mathcal{J}(X)\sub\mathcal{T}(X)$, and to prove the converse inclusion, it suffices to show that the sets $\mathcal{J}(X)$ defines a topology over $\mathcal{C}$.\par
It is clear that the $\mathcal{J}(X)$ satisfy the axioms (T1) and (T3), and it remains to verify (T2). To this end, let $R',R$ be sieves of $X$ with $R\in\mathcal{T}_\mathcal{B}(X)$ such that for any morphism $Y\to R$, the sieve $R'\times_XY$ of $Y$ belongs to $\mathcal{J}(Y)$. By definition, $R$ contains a sieve $T$ which is generated by a covering $\{X_\alpha\to X\}$ of $X$. For each $\alpha$, we have a canonical morphism $X_\alpha\to T$, defined by
\[\Hom(Y,X_\alpha)\to T(Y),\quad (Y\to X_\alpha)\mapsto(Y\to X_\alpha\to X),\]
so by our hypothesis the fiber product sieve $R'\times_XX_\alpha$ belongs to $\mathcal{J}(X_\alpha)$, hence contains a sieve generated by a covering $\{X_{\beta\alpha}\to X_\alpha\}$ of $X_\alpha$. Unwinding the definitions, this means for any $\alpha$ and any morphism $f:Y\to X_{\beta\alpha}\to X_\alpha$, there exists a morphism $g:Y\to X$ in $R'(Y)$ such that $g$ is equal to the composition of $f$ with $X_\alpha\to X$. We therefore deduce that $R'$ contains the sieve generated by the composite family $\{X_{\beta\alpha}\to X\}$, so by axiom (PT2), $R'$ contains a sieve of $\mathcal{J}_\mathcal{B}(X)$ and hence belongs to $\mathcal{J}(X)$.
\end{proof}
In practice, we usually give basis to generate a topology on the category $\mathcal{C}$. In this case, by a topology, we in fact mean the topology generated by the basis defined by these arrows\footnote{In fact, many authors define a Grothendieck topology to be a collection of families of morphisms satisfying axioms (PT1), (PT2) and (PT3).}. Here are some examples of topologies generated by basis, where for a family $\{f_\alpha:X_\alpha\to X\}$ of maps is called \textbf{jointly surjective} if the induced map $\coprod_\alpha X_\alpha\to X$ is surjective (in other words, the union of the images of $f_\alpha$ equal to $X$).
\begin{example}[\textbf{The site of a topological space}]
Let $X$ be a topological space and let $X_{\cl}$ be the category of open subsets of $X$, with morphisms given by inclusions. Then we get a topology on $X_{\cl}$ by associating with each open subset $U\sub X$ the set of open coverings of $U$, whence a generated topology on $X_{\cl}$. In this case, if $U_1\to U$ and $U_2\to U$ are arrows, the fiber product $U_1\times_UU_2$ is the intersection $U_1\cap U_2$.
\end{example}
\begin{example}[\textbf{The global classical topology}]
Let $\mathcal{C}=\mathbf{Top}$ be the category of topological spaces. If $U$ is a topological space, then a covering of $U$ will be a jointly surjective collection of open embeddings $U_i\to U$.
\end{example}
\begin{example}[\textbf{The small \'etale site for a scheme}]
Let $X$ be a scheme and consider the full subcategory $X_{\et}$ of $\mathbf{Sch}_{/X}$, consisting of \'etale morphisms $U\to X$. Note that any morphism $U\to V$ of objects in $X_{\et}$ is necessarily \'etale, and a covering of $U\to X$ is a jointly surjective collection of morphisms $U_i\to U$.
\end{example}
\begin{example}[\textbf{The topologies on $\mathbf{Sch}_{/S}$}]
Let $\mathbf{Sch}_{/S}$ be the category of schemes over a fixed scheme $S$. We can define several topologies on $\mathbf{Sch}_{/S}$:
\begin{itemize}
\item The \textbf{Zariski topology} on $\mathbf{Sch}_{/S}$ is defined by collections of open coverings $\{U_i\to U\}$ of $U$.
\item The \textbf{global \'etale topology} on $\mathbf{Sch}_{/S}$ is defined by jointly surjective collections of \'etale morphisms in $\mathbf{Sch}_{/S}$.
\item The \textbf{fppf topology} on $\mathbf{Sch}_{/S}$ is defined by jointly surjective collections of flat morphisms that are locally of finite presentation (the abbreviation "fppf" stands for "fid\`element plat et de pr\'esentation finie").
\end{itemize}
\end{example}

\subsection{Sheaves over a site}
Let $\mathcal{C}$ be a site whose underlying category is a $\mathscr{U}$-category and $F:\mathcal{C}^{\op}\to \mathbf{Set}$ be a presheaf over $\mathcal{C}$. The functor $F$ is called \textbf{separated} (resp. a \textbf{sheaf}) if for any object $X$ of $\mathcal{C}$ and any covering sieve $R$ of $X$, the map
\[\Hom_{\PSh(\mathcal{C})}(X,F)\to \Hom_{\PSh(\mathcal{C})}(R,F)\]
is injective (resp. bijective). The full subcategory of $\PSh(\mathcal{C})$ of sheaves over $\mathcal{C}$ is call the \textbf{category of sheaves of sets over $\mathcal{C}$}, and denoted by $\Sh(\mathcal{C})$. If there is no risk of ambiguity, this is simply called the category of sheaves over $\mathcal{C}$.
\begin{proposition}\label{G-topo generated by family of presheaf}
Let $C$ be a $\mathscr{U}$-category and $\mathfrak{F}=(F_i)_{i\in I}$ be a family of presheaves over $\mathcal{C}$. For each object $X$ of $\mathcal{C}$, let $\mathcal{T}_{\mathfrak{F}}(X)$ be the set of sieves $R$ of $X$ such that for any morphism $Y\to X$ in $\mathcal{C}$ and any $i\in I$, the map
\[\Hom_{\PSh(\mathcal{C})}(Y,F_i)\to \Hom_{\PSh(\mathcal{C})}(R\times_XY,F_i)\]
is injective (resp. bijective). Then the sets $\mathcal{T}_{\mathfrak{F}}(X)$ define a topology $\mathcal{T}$ over $\mathcal{C}$, which is the finest topology for which each $F_i$ is a separated presheaf (resp. a sheaf).
\end{proposition}
\begin{proof}

\end{proof}
\begin{corollary}\label{G-topo generated by morphism sheaf iff}
Let $\mathcal{C}$ be a $\mathscr{U}$-category, and for any object $X$ of $\mathcal{C}$, let $K(X)$ be a set of sieves of $X$ satisfying axiom (T1). For a presheaf $F$ over $\mathcal{C}$ to be a separated presheaf (resp. a sheaf) for the topology generated by the $K(X)$, it is necessary and sufficient that for any object $X$ of $\mathcal{C}$ and any sieve $R\in K(X)$, the map
\begin{equation}\label{G-topo generated by morphism sheaf iff-1}
\Hom_{\PSh(\mathcal{C})}(X,F)\to \Hom_{\PSh(\mathcal{C})}(R,F)
\end{equation}
is injective (resp. bijective).
\end{corollary}
\begin{proof}
In fact, let $\mathcal{T}_F(X)$ be the set of sieves $R$ of $X$ such that for any morphism $Y\to X$ in $\mathcal{C}$ and any $i\in I$, the map
\[\Hom_{\PSh(\mathcal{C})}(Y,F)\to \Hom_{\PSh(\mathcal{C})}(R\times_XY,F_i)\]
is bijective (resp. injective), and $\mathcal{T}_F$ be the topology generated by $\mathcal{T}_F(X)$. Since $K(X)$ satisfies (T1), the set $K(X)$ is contained in $\mathcal{T}_F(X)$ with the condition of the corollary, so the topology $\mathcal{T}$ generated by $K(X)$ is coarser than $\mathcal{T}_F$. By \cref{G-topo generated by family of presheaf}, it then follows that $F$ is a separated presheaf (resp. a sheaf) for the topology $\mathcal{T}$.
\end{proof}
\begin{corollary}\label{G-topo generated by basis sheaf iff}
Let $\mathcal{C}$ be a $\mathscr{U}$-category endowed with a basis. For a presheaf $F$ to be a separated presheaf (resp. a sheaf), it is necessary and sufficient that for any object $X$ of $\mathcal{C}$ and for any covering $\{X_\alpha\to X\}$ of $X$, the following sequence
\[\begin{tikzcd}
F(X)\ar[r]&\prod_{\alpha}F(X_\alpha)\ar[r,shift left=3pt]\ar[r,shift right=3pt]&\prod_{\alpha,\beta}F(X_\alpha\times_XX_\beta)
\end{tikzcd}\]
is exact (resp. the map $F(X)\to \prod_\alpha F(X_\alpha)$ is injective.)
\end{corollary}
\begin{proof}
By (\cite{SGA4-1}, \Rmnum{1}, 3.5), we have a functorial isomorphism 
\[\Hom_{\PSh(\mathcal{C})}(F,R)=\llim_{(X,u)\in\mathcal{C}_{/R}}F(X).\]
so the corollary follows from \cref{G-topo generated by morphism sheaf iff} and (\cite{SGA4-1}, \Rmnum{1}, 2.12).
\end{proof}

Let $\mathcal{C}$ be a $\mathscr{U}$-category. We define the \textbf{canonical topology} of $\mathcal{C}$ to be the finest topology such that all representable functors are sheaves. A covering sieve of $X$ for the canonical topology is called \textbf{universally effective epimorphic}. In other words, this means for any object $Z$ of $\mathcal{C}$, the canonical map
\[\Hom_{\PSh(\mathcal{C})}(X,Z)\to \Hom_{\PSh(\mathcal{C})}(R,Z)\]
is bijective. More generally, a topology $\mathcal{T}$ over $\mathcal{C}$ such that all representable functors are sheaves is called \textbf{subcanonical}, so the canonical topology is the finest subcanonical topology on $\mathcal{C}$. In most cases, the topology considered over a category $\mathcal{C}$ is subcanonical, so the covering sieves of $\mathcal{C}$ are universally effective epimorphic. The only exception is the site $\PSh(\mathcal{C})$ obtained from a site $\mathcal{C}$, whose topology is finer, and often strictly finer, than the canonical topology.
\begin{proposition}\label{G-topo sieve universal effective epi iff}
For a sieve $R$ of an object $X$ of $\mathcal{C}$ to be universally effective epimorphic, it is necessary and sufficient that for any object $Y\to X$ of $\mathcal{C}_{/X}$ and any object $Z$ of $\mathcal{C}$, the map
\[\Hom_{\mathcal{C}}(Y,Z)\to \llim_{U\in\mathcal{C}_{/(Y\times_XR)}}\Hom_\mathcal{C}(U,Z)\]
is a bijection.
\end{proposition}
\begin{proof}
By definition of canonical topology and \cref{G-topo generated by family of presheaf}, $R$ is universally effective epimorphic if and only if for any for any object $Z$ of $\mathcal{C}$ and any morphism $Y\to X$ in $\mathcal{C}$, the map
\[\Hom_{\PSh(\mathcal{C})}(Y,Z)\to \Hom_{\PSh(\mathcal{C})}(R\times_XY,Z)\]
is bijective. On the other hand, by (\cite{SGA4-1}, \Rmnum{1}, 3.5), we have a functorial isomorphism 
\[\Hom_{\PSh(\mathcal{C})}(R\times_XY,Z)=\llim_{U\in\mathcal{C}_{/R\times_XY}}h_Z(U)=\llim_{U\in\mathcal{C}_{/R\times_XY}}\Hom_{\mathcal{C}}(U,Z),\]
whence the proposition.
\end{proof}
\begin{corollary}\label{G-topo generated by basis sieve universal effective epi iff}
Let $\mathcal{C}$ be a $\mathscr{U}$-category endowed with a basis. Then for a sieve $R$ of $X$ defined by a covering $\{X_\alpha\to X\}$ to be universally effective epimorphic, it is necessary and sufficient that for any object $Z$ of $\mathcal{C}$, the sequence
\begin{equation}\label{G-topo generated by basis sieve universal effective epi iff-1}
\begin{tikzcd}
\Hom_{\mathcal{C}}(X,Z)\ar[r]&\prod_{\alpha}\Hom_{\mathcal{C}}(X_\alpha,Z)\ar[r,shift left=3pt]\ar[r,shift right=3pt]&\prod_{\alpha,\beta}\Hom_{\mathcal{C}}(X_\alpha\times_XX_\beta,Z)
\end{tikzcd}
\end{equation}
is exact. In particular, the covering families of the canonical topology of $\mathcal{C}$ are universally effective epimorphic families.
\end{corollary}
\begin{proof}
The first assertion follows from the proof of \cref{G-topo generated by basis sheaf iff} and \cref{G-topo sieve universal effective epi iff}. As for the second one, it suffices to note that a family $\{X_\alpha\to X\}$ of morphisms in $\mathcal{C}$ is universally effective epimorphic if and only if the sequence (\ref{G-topo generated by basis sieve universal effective epi iff-1}) is exact.
\end{proof}
\begin{remark}
\cref{G-topo sieve universal effective epi iff} provides a characterization of universally effective epimorphisms of a category $\mathcal{C}$, which is independent of the universe in which the presheaves take their values, with the sole condition that the sets of morphisms $\Hom_{\mathcal{C}}(X,Y)$ of $\mathcal{C}$ belong to this universe. It therefore permits thus to define the canonical topology for any category $\mathcal{C}$, without specifying the universes we are considering.
\end{remark}
\subsection{Sheafifications of presheaves}\label{site sheafification subsection}
Let $\mathcal{C}$ be a site. We define a \textbf{topological generating family} (or simply a \textbf{generating family} of $\mathcal{C}$ is there is no risk of confusion) of $\mathcal{C}$ to be a set $G$ of objects of $\mathcal{C}$ such that any object of $\mathcal{C}$ is the target of a family of covering morphisms of $\mathcal{C}$ whose sources are elements of $G$. A site $\mathcal{C}$ is called a \textbf{$\mathscr{U}$-site} (where $\mathscr{U}$ is the fixed universe) if the underlying category is a $\mathscr{U}$-category and $\mathcal{C}$ has a $\mathscr{U}$-small topological generating family. If $\mathcal{C}$ is a category, we define a \textbf{$\mathscr{U}$-topology} over $\mathcal{C}$ to be a topology with which $\mathcal{C}$ is a $\mathscr{U}$-site. The site $\mathcal{C}$ is called \textbf{$\mathscr{U}$-small} (or by abusing of language, small) if the underlying category is small. It follows immediately from definition that any topology finer than a $\mathscr{U}$-topology is a $\mathscr{U}$-topology, and any small site is a $\mathscr{U}$-site.
\begin{proposition}\label{site small generated sieve set prop}
Let $\mathcal{C}$ be a $\mathscr{U}$-site and $G$ be a small topological generating family of $\mathcal{C}$. For any object $X$ of $\mathcal{C}$, we denote by $\mathcal{T}_G(X)$ the set of covering sieves of $X$ generated by the families of morphisms $\{u_\alpha:Y_\alpha\to X\}$, where $Y_\alpha\in G$. Then
\begin{enumerate}
\item[(a)] The set $\mathcal{T}_G(X)$ is $\mathscr{U}$-small and cofinal in the set $\mathcal{T}(X)$ of covering sieves of $X$, ordered by inclusion.
\item[(b)] For any $R\in\mathcal{T}_G(X)$, there exists a $\mathscr{U}$-small epimorphic family $\{u_\alpha:Y\to R\}$ with $Y\in G$.
\end{enumerate}
\end{proposition}
\begin{proof}
For a presheaf $F\in\PSh(\mathcal{C})$, we define
\[A(F)=\coprod_{Y\in G}\Hom(Y,F),\]
which is a $\mathscr{U}$-small set by our hypothesis. For any object $X$ of $\mathcal{C}$, we have $|\mathcal{T}_G(X)|\leq 2^{|A(X)|}$, so the set $\mathcal{T}_G(X)$ is $\mathscr{U}$-small. Now for a sieve $R\in\mathcal{T}(X)$, let $R'$ be the sieve of $X$ generated by the family $\{u:Y\to R\}$, where $u\in A(R)$. We then have $R'\sub R$, and it suffices to prove that $R'$ is a covering sieve. By axiom (T2), we only need to show that for any morphism $Z\to R$, where $Z$ is an object of $\mathcal{C}$, the sieve $R'\times_XZ$ of $Z$ is a covering sieve. But $R'\times_XZ$ contains the sieve generated by the family of morphisms $Y\to Z$, where $Y\in G$, which are coverings by hypothesis, so it is also a covering sieve by axiom (T2) again; this completes the proof of (a). Finally, we note that for any $R\in \mathcal{T}_G(X)$, the family $\{u:Y\to R\}_{u\in A(R)}$ is by hypothesis epimorphic, and is $\mathscr{U}$-small.
\end{proof}
Let $\mathcal{C}$ be a $\mathscr{U}$-site, $\mathscr{V}$ be a universe containing $\mathscr{U}$ such that $\mathcal{C}$ is $\mathscr{V}$-small, and $G$ be a $\mathscr{V}$-small topological generating family of $\mathcal{C}$. The category $\PSh(\mathcal{C})$ of presheaves of $\mathscr{U}$-sets over $\mathcal{C}$ is then a $\mathscr{V}$-category. Let $X$ be an object of $\mathcal{C}$; the set $\mathcal{T}(X)$ of covering sieves of $X$ is $\mathscr{V}$-small, and directed under inclusion. For any $\mathscr{U}$-presheaf $F$, the inductive limit
\begin{equation}\label{site small generated sheafification-1}
\rlim_{R\in\mathcal{T}(X)}\Hom_{\PSh(\mathcal{C})}(R,F)
\end{equation}
is then represented by an element of $\mathscr{V}$ (\cite{SGA4-1} \Rmnum{1}, 2.4.1). Moreover, it follows from \cref{site small generated sieve set prop} and (\ref{category Hom of functors char by limit}) that, for any $R\in\mathcal{T}(X)$, $\Hom_{\PSh(\mathcal{C})}(R,F)$ is $\mathscr{U}$-small, and as $\mathcal{T}_G(X)$ is a $\mathscr{U}$-small cofinal set in $\mathcal{T}(X)$, it follows from (\cite{SGA4-1} \Rmnum{1}, 2.4.2) that the limit (\ref{site small generated sheafification-1}) is $\mathscr{U}$-small. We then choose, for any $F$ and for any $X$, an element of $\mathscr{U}$ that represents this inductive limit and let
\begin{equation}\label{site small generated sheafification-2}
LF(X)=\rlim_{R\in\mathcal{T}(X)}\Hom_{\PSh(\mathcal{C})}(R,F).
\end{equation}
If $g:Y\to X$ is a morphism in $\mathcal{C}$, the base change functor $g^*:\mathcal{T}(X)\to \mathcal{T}(Y)$ then defines a map
\[LF(g):LF(X)\to LF(Y)\]
so that the construction $X\mapsto LF(X)$ is a presheaf on $\mathcal{C}$. We also note that since the family $\{\id_X:X\to X\}$ is an element of $\mathcal{T}(X)$, for any object $X$ of $\mathcal{C}$, we have a map
\[\ell_F(X):F(X)\to LF(X),\]
from which we obtain a morphism of functors $\ell_F:F\to LF$, and therefore a morphism
\[\ell:\id\to L.\]
Now let $R\hookrightarrow X$ be a refinement of $X$. The definition of $LF(X)$ and Yoneda's lemma then give a map
\[Z_R:\Hom_{\PSh(\mathcal{C})}(R,F)\to \Hom_{\PSh(\mathcal{C})}(X,LF),\]
and for any morphism $g:Y\to X$ in $\mathcal{C}$, we have the following commutative diagram:
\begin{equation}\label{site small generated sheafification-3}
\begin{tikzcd}
\Hom_{\PSh(\mathcal{C})}(R,F)\ar[d]\ar[r,"Z_R"]&\Hom_{\PSh(\mathcal{C})}(X,LF)\ar[d]\\
\Hom_{\PSh(\mathcal{C})}(R\times_XY,F)\ar[r,"Z_{R\times_XY}"]&\Hom_{\PSh(\mathcal{C})}(Y,LF)
\end{tikzcd}
\end{equation} 
where the vertical arrows are induced by the obvious morphisms.
\begin{lemma}\label{site small generated sheafification lemma}
Let $LF$ be the presheaf defined above and $\ell:\id\to L$ be the induced morphism.
\begin{enumerate}
\item[(a)] For any refinement $i_R:R\hookrightarrow X$ and any morphism $u:R\to F$, the diagram
\begin{equation}\label{site small generated sheafification-4}
\begin{tikzcd}[row sep=10mm, column sep=10mm]
R\ar[r,hook,"i_R"]\ar[d,swap,"u"]&X\ar[d,"Z_R(u)"]\\
F\ar[r,"\ell_F"]&LF
\end{tikzcd}
\end{equation}
is commutative.
\item[(b)] For any morphism $v:X\to LF$, there exists a refinement $R$ of $X$ and a morphism $u:R\to F$ such that $Z_R(u)=v$. 
\item[(c)] Let $Y$ be an object of $C$ and $u,v:Y\rightrightarrows F$ be two morphisms such that $\ell_F\circ u=\ell_F\circ v$. Then ther kernel of the couple $(u,v)$ is a refinement of $Y$.
\item[(d)] Let $R,R'$ be refinements of $X$ and $u:R\to F$, $u':R'\to F$ be morphisms. For that $Z_R(u)=Z_{R'}(u')$, it is necessary and sufficient that $u$ and $u'$ coincide on a refinement $R''\hookrightarrow R\times_XR'$.
\end{enumerate}
\end{lemma}
\begin{proof}
In fact, any morphism $v:X\to LF$ corresponds to an element of the inductive limit in (\ref{site small generated sheafification-2}), which is the canonical image of an element of $\Hom_{\PSh(\mathcal{C})}(R,F)$, and two such images coincide if and only if their canonical images to a further refinement are equal; this proves (b) and (d). Now if $Y$ is an object of $C$ and $u,v:Y\to F$ are two morphisms such that $\ell_F\circ u=\ell_F\circ v$, then by our preceding remarks, there exists a refinement $R$ of $Y$ such that $u$ and $v$ coincides on $R$. Since the kernel of $(u,v)$ must contains $R$, it is therefore a refinement of $Y$.\par
Finally, in view of Yoneda's lemma, to prove (a), it suffices to show that the compositions of $Z_R(u)\circ i_R$ and $\ell_F\circ u$ with any morphism $g:Y\to R$ ($Y$ being an object of $\mathcal{C}$) are equal. For this, we consider $f=i_R\circ g$ and the fiber product $R\times_XY$:
\[\begin{tikzcd}
R\times_XY\ar[r,hook,"i'"]\ar[d,swap,"f'"]&Y\ar[ld,swap,"g"]\ar[d,"f"]\\
R\ar[r,hook,"i_R"]\ar[d,swap,"u"]&X\ar[d,"Z_R(u)"]\\
F\ar[r,"\ell_F"]&LF
\end{tikzcd}\]
By the definition of $\ell_F$, the morphism $Z_{R\times_XY}(u\circ f')$ is equal to $\ell_F\circ u\circ g$. On the other hand, the commutative diagram (\ref{site small generated sheafification-3}) shows that $Z_{R\times_XY}(u\circ f')=Z_R(u)\circ f$, so we conclude that
\begin{equation*}
\ell_F\circ u\circ g=Z_R(u)\circ f=Z_R(u)\circ i_R\circ g.\qedhere
\end{equation*}
\end{proof}
\begin{proposition}\label{site small generated sheafification functor prop}
Let $L$ be the functor on $\PSh(\mathcal{C})$ defined by (\ref{site small generated sheafification-2}).
\begin{enumerate}
\item[(a)] The functor $L$ is left exact.
\item[(b)] For any presheaf $F$, $LF$ is a separated presheaf.
\item[(c)] The presheaf $F$ is separated if and only if the morphism $\ell_F:F\to LF$ is a monomorphism, and in this case $LF$ is a sheaf.
\item[(d)] The morphism $\ell_F:F\to LF$ is an isomorphism if and only if $F$ is a sheaf. 
\end{enumerate} 
\end{proposition}
\begin{proof}

\end{proof}
\begin{remark}
If $\mathcal{J}(X)$ is a cofinal subset of $\mathcal{T}(X)$, we then have
\[LF(X)=\rlim_{R\in\mathcal{J}(X)}\Hom_{\PSh(\mathcal{C})}(R,F).\]
In particular, if the topology of $\mathcal{C}$ is defined by a basis $X\mapsto\Cov(X)$, the functor $L$ can be then described by the covering families of $\Cov(X)$. 
\end{remark}
From \cref{site small generated sheafification functor prop}, we then deduce the following theorem on the eixstence of sheafification functor on $\PSh(\mathcal{C})$:
\begin{theorem}\label{site small generated sheafification exist}
For a $\mathscr{U}$-site $\mathcal{C}$, the inclusion functor $i:\Sh(\mathcal{C})\to \PSh(\mathcal{C})$ admits a left adjoint $\#$:
\[\begin{tikzcd}[column sep=12mm]
\Sh(\mathcal{C})\ar[r,shift left=3pt,"i"]&\PSh(\mathcal{C})\ar[l,shift left=3pt,"(-)^\#"]
\end{tikzcd}\]
The functor $i\circ\#$ is canonically isomorphic to $L\circ L$, and the sheaf $F^\#$ is called the \textbf{sheafification} of a presheaf $F$. For a presheaf $F$, the adjunction morphism $F\to i(F^\#)$ is induced by the morphism $\ell_{LF}\ell_F:F\to L\circ L(F)$.
\end{theorem}
\begin{remark}
We note that, since $L$ is left exact and the functor $\#=L\circ L$ is a left adjoint, the sheafification functor $\#$ is in fact exact on $\PSh(\mathcal{C})$. Recall that this result is obtained in the classical situation by the observation that sheafification does not change the stalks.
\end{remark}
\subsection{Exactness properties of the category of sheaves}\label{site category sheaf exactness property subsection}
The exactness properties of the category of sheaves is then induced from that of the category of presheaves via \cref{site small generated sheafification exist}. In this paragraph, we explain this philosophy by single out some of the most useful standard statements.
\subsection{The induced topology on \texorpdfstring{$\PSh(\mathcal{C})$}{Sh}}
\begin{proposition}\label{site morphism of presheaf covering def}
Let $\mathcal{C}$ be a $\mathscr{U}$-site and $f:H\to K$ be a morphism in $\PSh(\mathcal{C})$. Then the following conditions are equivalent:
\begin{enumerate}
\item[(\rmnum{1})] For any morphism $X\to K$, with $X\in\Ob(\mathcal{C})$, the image of the corresponding morphism $H\times_KX\to X$ is a covering sieve of $X$.
\item[(\rmnum{2})] The morphism $f^\#:H^\#\to K^\#$ is an epimorphism in $\Sh(\mathcal{C})$.
\item[(\rmnum{2}')] For any sheaf $F$ over $\mathcal{C}$, the map $\Hom(K,F)\to \Hom(H,F)$ is injective.
\end{enumerate}
\end{proposition}
\begin{proof}
By the adjunction property of \cref{site small generated sheafification exist}, for any sheaf $F$ over $\mathcal{C}$ we have
\[\Hom(K,F)=\Hom(K^\#,F),\]
so it is clear that (\rmnum{2}) is equivalent to (\rmnum{2}'). On the other hand, in view of (\cite{SGA4-1}, \Rmnum{2}, 4.4), condition (\rmnum{1}) signifies that $(H\times_KX)^\#\to X^\#$ is an epimorphism. Since epimorphisms in $\Sh(\mathcal{C})$ are stable under base change and $u$ is induced from $f^\#$ by base change, this proves (\rmnum{2})$\Rightarrow$(\rmnum{1}).\par
Conversely, since the family $\{X\to K:X\in\Ob(\mathcal{C})\}$ is epimorphic in $\PSh(\mathcal{C})$, so is the induced family $\{X^\#\to K^\#:X\in\Ob(\mathcal{C})\}$ in $\Sh(\mathcal{C})$ (\cite{SGA4-1} \Rmnum{2}, 4.1). Therefore, the morphism $f^\#:H^\#\to K^\#$ in $\Sh(\mathcal{C})$ is an epimorphism if and only if its base change $f^\#:H^\#\times_{K^\#}X^\#\to X^\#$ is an epimorphism for any $X\to K$, $X\in\Ob(\mathcal{C})$. This proves the implication (\rmnum{1})$\Rightarrow$(\rmnum{2}) in view of (\cite{SGA4-1}, \Rmnum{2}, 4.1).
\end{proof}
A morphism $f:H\to K$ satisfying the equivalent conditions of \cref{site morphism of presheaf covering def} is called a \textbf{covering} morphism. A family $\{f_i:H_i\to K\}$ of morphims in $\PSh(\mathcal{C})$ is called \textbf{covering} if the induced morphism $f:\coprod_iH_i\to K$ is covering. A morphism $f:H\to K$ is called \textbf{bicovering} if it is covering and the diagonal morphism $H\to H\times_KH$ is covering. Similarly, a family $\{f_i:H_i\to K\}$ is called \textbf{bicovering} if the induced morphism $f:\coprod_iH_i\to K$ is bicovering\footnote{We note that, in view of condition (\rmnum{2}) of \cref{site morphism of presheaf covering def}, the condition of being covering (resp. bicovering) for a family of morphisms in $\PSh(\mathcal{C})$ is stable under base change.}.\par
By condition (\rmnum{1}) of \cref{site morphism of presheaf covering def}, to say that a family $\{f_i:H_i\to K\}$ is a covering signifies that for any morphism $X\to K$, where $X\in\Ob(\mathcal{C})$, the family $\{H_i\times_KX\to X\}$ generates a covering sieve of $X$. Or equivalently, by (\rmnum{2}), the family $\{f_i^\#:H_i^\#\to K^\#\}$ in $\Sh(\mathcal{C})$ is epimorphic (since the functor $\#$ commutes with direct sums).
\begin{proposition}\label{site morphism of presheaf bicovering iff}
Let $\mathcal{C}$ be a $\mathscr{U}$-site and $f:H\to K$ be a morphism in $\PSh(\mathcal{C})$. The following conditions are equivalent:
\begin{enumerate}
\item[(\rmnum{1})] The morphism $f$ is bicovering.
\item[(\rmnum{1}')] The morphism $f$ is covering and for any couple of morphisms $u,v:X\rightrightarrows H$ with $X\in\Ob(\mathcal{C})$ such that $fu=fv$, the kernel $(u,v)$ is a covering sieve of $X$.
\item[(\rmnum{2})] The morphism $f^\#:H^\#\to K^\#$ is an isomorphism in $\Sh(\mathcal{C})$.
\item[(\rmnum{2}')] For any sheaf $F$ over $\mathcal{C}$, the map $\Hom(K,F)\to \Hom(H,F)$ is a bijection.
\end{enumerate}
\end{proposition}
\begin{proof}
The equivalence (\rmnum{1})$\Leftrightarrow$(\rmnum{1}') follows from condition (\rmnum{1}) of \cref{site morphism of presheaf covering def}, applied to the diagonal morphism $H\to H\times_KH$ (recall that $\ker(u,v)$ is given by the base change of the diagonal morphism $H\to H\times_KH$ along $(u,v)_K:X\to H\times_KH$), and that of (\rmnum{2}) and (\rmnum{2}') is trivial. We now prove that (\rmnum{1})$\Rightarrow$(\rmnum{2}), so let $f:H\to K$ be a bicovering morphism in $\PSh(\mathcal{C})$. The morphism $f^\#:H^\#\to K^\#$ is then an epimorphism by \cref{site morphism of presheaf covering def}, and the diagonal morphism $H^\#\to H^\#\times_{K^\#}H^\#$ is also an epimorphism since the functor $\#$ commutes with fiber products. As the diagonal morphism is always a monomorphism, it is then an isomorphism (\cite{SGA4-1}, \Rmnum{2}, 4.2), so $f^\#$ is a monomorphism, whence an isomorphism.\par
Conversely, if $f^\#$ is an isomorphism, then the diagonal morphism $H\to H^\#\times_{K^\#}H^{\#}$ is also an isomorphism. Since $\#$ commutes with fiber products, we conclude that the diagonal morphism $H\to H\times_KH$ is covering, so the morphism $f$ is bicovering.
\end{proof}
\begin{remark}
It follows from \cref{site morphism of presheaf bicovering iff} and the fact that $\#$ commutes with direct sums that a family $\{f_i:H_i\to K\}$ of morphisms in $\PSh(\mathcal{C})$ is bicovering if and only if the $f_i$ induce an isomorphism $\coprod_iH_i^\#\to K^\#$, of equivalently, if and only if for any sheaf $F$, the map
\[\Hom(K,F)\to \prod_i\Hom(H_i,F)\]
is bijective.
\end{remark}
\begin{proposition}\label{site induced topology on PSh char}
Let $\mathcal{C}$ be a $\mathscr{U}$-site. Then there exists a (unique) topology on $\PSh(\mathcal{C})$ such that a family $H_i\to K$ of morphisms in $\PSh(\mathcal{C})$ is covering for this topology if and only if it is covering (in the sense of \cref{site morphism of presheaf covering def}). This is also the coarsest topology $\mathcal{T}$ on $\PSh(\mathcal{C})$ satisfying the following conditions:
\begin{enumerate}
\item[(a)] $\mathcal{T}$ is finer than the canonical topology of $\PSh(\mathcal{C})$.
\item[(b)] Any covering family in $\mathcal{C}$ is covering in $\PSh(\mathcal{C})$.
\end{enumerate}
\end{proposition}
\begin{proof}
We first show that the covering families in the sense of \cref{site morphism of presheaf covering def} generates a topology $\mathcal{T}_\mathcal{C}$ on $\PSh(\mathcal{C})$.\par 
The covering family of the canonical topology over $\PSh(\mathcal{C})$ are the universally effective epimorphic families of $\PSh(\mathcal{C})$ (\cref{G-topo generated by basis sieve universal effective epi iff}). As $\#$ commutes with inductive limits, the topology $\mathcal{T}_\mathcal{C}$ is then finer than the canonical topology of $\PSh(\mathcal{C})$. Moreover, the covering families of $\mathcal{C}$ are also that of $\mathcal{T}_\mathcal{C}$ (\cref{site morphism of presheaf covering def}(\rmnum{1})), so if $\mathcal{T}'$ denote the coarsest topology on $\PSh(\mathcal{C})$ satisfying conditions (a), (b), then $\mathcal{T}_\mathcal{C}$ is fiber than $\mathcal{T}'$. 
\end{proof}
\begin{remark}\label{site topology on PSh finer than canonical char}
The proof of \cref{site induced topology on PSh char} in fact proves that any subcanonical topology $\mathcal{T}'$ over $\PSh(\mathcal{C})$, finer than the canonical topology, is the coarsest topology $\mathcal{T}$ of $\PSh(\mathcal{C})$ with the following properties:
\begin{itemize}
\item[(a)] $\mathcal{T}$ is finer than the canonical topology of $\PSh(\mathcal{C})$.
\item[(b)] Any covering family for $\mathcal{T}'$ of the form $\{u_i:X_i\to X\}$, where $X_i$ and $X$ are objects of $\mathcal{C}$, is covering for $\mathcal{T}$.
\end{itemize}
In particular, any topology over $\PSh(\mathcal{C})$, finer than the canonical topology, is completely determined by its covering families of morphisms in $\mathcal{C}$.\par
Conversely, one can easily show that for any topology $\mathcal{T}'$ over $\PSh(\mathcal{C})$, finer than the canonical topology, the set of covering families of morphisms $\{X_i\to X\}$ in $\mathcal{C}$ is the set of covering families of a topology on $\mathcal{C}$. Therefore, we obtain a correspondence between topologies on $\mathcal{C}$ and topologies on $\PSh(\mathcal{C})$ finer than the canonical topology.
\end{remark}

Let $\mathcal{C}$ be a small category. We denote by $\mathbf{Caf}$ the set of strictly full subcategories (any object isomorphic to an object of the subcategory is an object of it) of $\PSh(\mathcal{C})$ whose inclusion functor to $\PSh(\mathcal{C})$ admits a left adjoint which commutes with finite projective limits, and by $\mathscr{T}$ the set of topologies on $\mathcal{C}$. In view of \cref{site small generated sheafification exist}, we have a map
\[\Phi:\mathscr{T}\to \mathbf{Caf}\]
which sends a topology over $\mathcal{C}$ to the sheaf category it defines. We now construct an inverse of the map $\Phi$. For this, we need to associate for each element
\[
\begin{tikzcd}
\mathcal{C}'\ar[r,shift left=3pt,"i'"]&\PSh(\mathcal{C})\ar[l,shift left=3pt,"j'"]
\end{tikzcd}
\]
(where $j'$ is the adjoint of $i'$) of $\mathbf{Caf}$ a topology $\mathcal{T}_e$ over $\mathcal{C}$. For any object $X$ of $\mathcal{C}$, we define $\mathcal{T}_e(X)$ to be the set of sub-objects of $X$ whose canonical inclusion to $X$ is transformed by $j'$ into an isomorphism. It is immediately verified, using the assumptions made on $j'$, that this defines a topology $\mathcal{T}_e$ over $\mathcal{C}$. We have therefore defined an application $\Psi:\mathbf{Caf}\to \mathscr{T}$.
\begin{theorem}[\textbf{J. Giraud}]\label{site topology correspond to subcategory}
The map $\Phi$ is an bijection with inverse map $\Psi$.
\end{theorem}
\begin{proof}
The map $\Psi\circ\Phi$ is the identity in view of \cref{site morphism of presheaf bicovering iff} and the axioms (T1), (T2). Conversely, let $i':\mathcal{C}'\to \PSh(\mathcal{C})$ be an element of $\mathbf{Caf}$ with left adjoint $j'$, $\mathcal{T}_e$ be the corresponding topology, and $\mathcal{C}_e$ be the sheaf category defined by $\mathcal{T}_e$. By using the definition of $\mathcal{T}_e$ and bicovering morphisms, we can then prove the equivalence of the following conditions for a morphism $u$ of $\PSh(\mathcal{C})$:
\begin{enumerate}
\item[(a)] $u$ is bicovering for the topology $\mathcal{T}_e$.
\item[(b)] $u$ is transformed by $j'$ to an isomorphism.
\end{enumerate}
It is clear that $\mathcal{C}'$ is a full subcategory of $\mathcal{C}_e$, so it suffices to prove that any sheaf $F$ for the topology $\mathcal{T}_e$ is an object of $\mathcal{C}'$. However, by the above equivalence, the morphism $F\to i'\circ j'(F)$ is bicovering ($j'\circ i'$ is isomorphic to the identity functor since $j'$ is exact), whose source and target are sheaves. We deduce from \cref{site morphism of presheaf bicovering iff}(\rmnum{2}) that $F\to i'\circ j'(F)$ is an isomorphism, so $F\in\mathcal{C}'$ (recall that $\mathcal{C}'$ is strictly full).
\end{proof}

\subsection{Characterization of representability by schemes}
Let $\mathcal{C}=\Aff_{S}$ be the category of affine schemes over a fixed affine scheme $S$. Any $S$-scheme $X$ then defines a functor
\[h_X:\mathcal{C}^{\op}\to\Set,\quad \Spec(A)\mapsto\Hom_S(\Spec(A),X).\]
In the case when $X$ is an affine $S$-scheme, this is just the functor associated to $X$ by the Yoneda embedding. In this subsection, we characterize presheaves over $\mathcal{C}$ which can be represented by $S$-schemes.

\begin{definition}
A morphism $f:F\to G$ of presheaves over $\mathcal{C}$ is called an \textbf{affine open (resp. closed) immersion} if the following conditions are satisfies:
\begin{enumerate}
    \item[(a)] $f$ is relatively representable, that is, for any morphism $X\to G$ with $X\in\Aff_S$, the fiber product $X\times_GF$ is representable.
    \item[(b)] For any $X\in\Aff_S$ and $g:X\to G$, the map $F\times_GX\to X$ is an open (resp. closed) immersion. 
\end{enumerate}
\end{definition}

Note that in condition (b), since the fiber product $F\times_GX$ is representable, the morphism $F\times_GX\to X$ is a morphism of schemes over $S$, so we can talk about open and closed immersions.

\begin{proposition}\label{scheme functor represented by separated scheme iff}
A presheaf $F:\Aff_S^{\op}\to\Set$ is representable by a separated $S$-scheme if and only if the following hold:
\begin{enumerate}
    \item[(\rmnum{1})] $F$ is a Zariski sheaf.
    \item[(\rmnum{2})] The diagonal morphism $F\to F\times F$ is an affine closed immersion.
    \item[(\rmnum{3})] There exists a family of morphisms $\{X_i\to F\}$ with $X_i\in\Aff_S$ which are affine open immersions and jointly surjective as morphisms of Zariski sheaves. 
\end{enumerate}
Moreover, the functor $h$ defines an equivalence from the category of separated $S$-schemes to that of presheaves $F:\Aff_S^{\op}\to\Set$ satisfying (\rmnum{1})--(\rmnum{3}).
\end{proposition}
\begin{proof}
We start by showing that if $X$ is a separated $S$-scheme, then $F=h_X$ satisfies condition (\rmnum{1})--(\rmnum{3}). For (\rmnum{1}), let $U\in\Aff_S$ and $\{U_i\to U\}$ be an open covering. Then (\rmnum{1}) is equivalent to the statement that giving a morphism of schemes $f:U\to X$ is equivalent to giving a collection of morphisms $\{f_i:U_i\to X\}$ such that for each $i,j$, the restrictions $f_i|_{U_i\cap U_j}$ and $f_j|_{U_i\cap U_j}$ are equal, which is immediate.\par
For (\rmnum{2}), note that the Yoneda embedding commutes with fiber products, so the diagonal morphism $h_X\to h_X\times h_X$ is identified with $h_X\to h_{X\times_SX}$, which is induced by the diagonal morphism of schemes $X\to X\times_XX$, and is a closed immersion since $X$ is separated over $S$. Its base change to any affine $S$-scheme is therefore closed.\par
To verify property (\rmnum{3}), let $\{X_i\to X\}$ be an open covering with $X_i$ affine, and let $h_{X_i}\to h_X$ be the induced morphism. For any $T\in\Aff_S$ and morphism $h_T\to h_X$, the fiber product $h_T\times_{h_X}h_{X_i}$ is represented by $f^{-1}(X_i)$, hence is an affine open subset of $T$ ($X$ is separated and $X_i$ is affine, cf. \cref{scheme morphism separated preimage of affine open in affine open}). This proves that each morphism $h_{X_i}\to h_X$ is an affine open immersion.\par
The statement that $\coprod_ih_{X_i}\to F$ is a surjective morphism as Zariski sheaves amounts to saying that given a morphism of schemes $f:T\to X$ with $T\in\Aff_S$, there exists an open covering $\{T_i\to T\}$ such that $f|_{T_i}$ factors through $X_i$ for some $i$. This is clear as we can just take $T_i=f^{-1}(X_i)$.\par
Next, suppose that $F$ is a presheaf over $\Aff_S$ satisfying condition (\rmnum{1})--(\rmnum{3}), and choose morphisms $h_{X_i}\to F$ as in (\rmnum{3}). For each $i,j$, consider the fiber product $h_{X_i}\times_Fh_{X_j}$:
\[\begin{tikzcd}
h_{X_i}\times_Fh_{X_j}\ar[d]\ar[r]&h_{X_i}\ar[d]\\
h_{X_j}\ar[r]&F
\end{tikzcd}\]
Since the morphisms $h_{X_i}\to F$ are an affine open immersions, this fiber product is represented by an affine scheme $V_{ij}$, and we obtain open immersions
\[\begin{tikzcd}
V_{ij}\ar[d,hook]\ar[r,hook]&X_i\\
X_j
\end{tikzcd}\]
The isomorphism of functors $h_{X_i}\times_Fh_{X_j}\cong h_{X_j}\times_Fh_{X_i}$ obtained by switching the factors induces an isomorphism
\[\varphi_{ij}:V_{ij}\to V_{ji}\]
and the morphisms $\varphi_{ij}$ satisfies an obvious cocycle condition. This enables us to glue the schemes $X_i$ together along the subschemes $V_{ij}$ to obtain a scheme $X$. Let $G=\coprod_ih_{X_i}$, then the fiber product $G\times_{h_X}G$ is isomorphic to $\coprod_{ij}h_{V_{ij}}$, and this implies that the surjection of Zariski sheaves $G\twoheadrightarrow F$ factors through an isomorphism $h_X\cong F$. Moreover, since each $V_{ij}$ is affine, we conclude from \cref{scheme separated over affine iff intersection of affine open cover} that $X$ is separated over $S$.\par
To prove the last statement of \cref{scheme functor represented by separated scheme iff}, it remains to see that the functor $h$ is fully faithful. Let $X$ and $Y$ be two separated schemes, and $h_X$ and $h_Y$ denote the corresponding functors on $\Aff_S$. Choose an open covering $\{U_i\to X\}$ with each $U_i$ affine, and let $U_{ij}$ denote the intersection $U_i\cap U_j$ which is again an affine scheme since $X$ is $S$-separated and $S$ is affine (\ref{scheme separated over affine iff intersection of affine open cover}). We then have a coequalizer diagram of Zariski sheaves
\[\coprod_{i,j}h_{U_{i,j}}\rightrightarrows\coprod_ih_{U_i}\to h_X\]
and therefore
\[\Hom(h_X,h_Y)=\ker\big(\prod_ih_Y(U_i)\rightrightarrows\prod_{i,j}h_Y(U_{ij})\big).\]
Since the map
\[\Hom(X,Y)=\ker\big(\prod_ih_Y(U_i)\rightrightarrows\prod_{i,j}h_Y(U_{ij})\big)\]
is an isomorphism, we obtain the fully faithfulness.
\end{proof}

Let $F,G:\Aff_S^{\op}\to\Set$ be two presheaves over $\Aff_S$. We say that a morphism $F\to G$ is \textbf{represented by separated schemes} if for any $U\in\Aff_S$ and morphism $U\to G$, the morphism $F\times_GU$ is represented by a separated $U$-scheme (which is a notion defined purely functorially by \cref{scheme functor represented by separated scheme iff}).

\begin{proposition}\label{scheme functor represented by scheme iff}
A presheaf $F:\Aff_S^{\op}\to\Set$ is representable by an $S$-scheme
if and only if the following hold:
\begin{enumerate}
    \item[(\rmnum{1})] $F$ is a Zariski sheaf.
    \item[(\rmnum{2}')] The diagonal morphism $F\to F\times F$ is representable by separated schemes.
    \item[(\rmnum{3}')] There exists a family $\{X_i\to F\}$ with $X_i\in\Aff_S$ which are represented by open immersions and jointly surjective as morphisms of Zariski sheaves. 
\end{enumerate}
\end{proposition}
\begin{proof}
If $F$ is a functor satisfying (\rmnum{1})--(\rmnum{2}), then it is represented by a scheme by (\cite{EGA1} new, 0, 4.5.4). Conversely, if $F=h_X$ is represented by an $S$-scheme $X$, then it is a Zariski sheaf and we easily see that condition (\rmnum{3}) is satisfied (as in \cref{scheme functor represented by separated scheme iff}, but we do not have the fiber products are affine). 
\end{proof}

\section{Functoriality of categories of sheaves}
In \autoref{category presheaf section}, we studied the behavior of the categories of presheaves with respect to the functors between the underlying categories. In this section, we extend these results to sites and categories of sheaves.
\subsection{Continuous functors}
Let $\mathcal{C}$ and $\mathcal{D}$ be two $\mathscr{U}$-sites. A functor $u:\mathcal{C}\to \mathcal{D}$ on the underlying categories is called \textbf{continuous} if for any sheaf of sets $F$ on $\mathcal{D}$, the presheaf $X\mapsto F(u(X))$ over $\mathcal{C}$ is a sheaf. Equivalenyly, this means we have an induced functor $u_*:\Sh(\mathcal{D})\to \Sh(\mathcal{C})$ such that the diagram
\begin{equation}\label{site small continuous functor iff-1}
\begin{tikzcd}
\Sh(\mathcal{D})\ar[d,swap,"i_\mathcal{D}"]\ar[r,"u_*"]&\Sh(\mathcal{C})\ar[d,"i_\mathcal{C}"]\\
\PSh(\mathcal{D})\ar[r,"u_\star"]&\PSh(\mathcal{C})
\end{tikzcd}
\end{equation}
commutes, where if $i_\mathcal{C}:\PSh(\mathcal{C})\to \Sh(\mathcal{C})$ and $i_\mathcal{D}:\PSh(\mathcal{D})\to \Sh(\mathcal{D})$ are the canonical inclusion functors.
\begin{remark}
We use $(u^\star, u_\star, {^{\star}u})$ to denote the adjoint triple $(u_!,u^*,u_*)$ of (\cite{SGA1} \Rmnum{1}).
\end{remark}
\begin{proposition}\label{site small continuous functor iff}
Let $\mathcal{C}$ be a small site, $\mathcal{D}$ be a $\mathscr{U}$-site and $u:\mathcal{C}\to \mathcal{D}$ be a functor on the underlying categories. The following properties are equivalent:
\begin{enumerate}
\item[(\rmnum{1})] The functor $u$ is continuous.
\item[(\rmnum{2})] For any object $X$ of $\mathcal{C}$ and any covering sieve $R$ of $X$, the morphism $u^\star(R)\hookrightarrow u(X)$ is bicovering in $\PSh(\mathcal{D})$.
\item[(\rmnum{3})] For any bicovering family $\{H_i\to K\}$ of $\PSh(\mathcal{C})$, the family $\{u^\star(H_i)\to u^\star(K)\}$ is bicovering in $\PSh(\mathcal{D})$.
\item[(\rmnum{4})] There exists a functor $u^*:\Sh(\mathcal{C})\to \Sh(\mathcal{D})$ which commutes with inductive limits and extends $u$, i.e. such that the following diagram is commutative up to isomorphisms:
\begin{equation}\label{site small continuous functor iff-2}
\begin{tikzcd}
\mathcal{C}\ar[r,"u"]\ar[d,swap,"\eps_\mathcal{D}"]&\mathcal{D}\ar[d,"\eps_\mathcal{D}"]\\
\Sh(\mathcal{C})\ar[r,"u^*"]&\Sh(\mathcal{D})
\end{tikzcd}
\end{equation}
\end{enumerate}
Moreover, if $\mathcal{C}$ is only assumed to be a $\mathscr{U}$-site, we still have the equivalence (\rmnum{1})$\Leftrightarrow$(\rmnum{4}), and the functor $u^*$ of (\rmnum{4}) is necessarily a left adjoint of the functor $u_*:\Sh(\mathcal{D})\to \Sh(\mathcal{C})$ (therefore uniquely determined up to isomorphisms).
\end{proposition}
\begin{proof}
The proof of (\rmnum{1})$\Leftrightarrow$(\rmnum{4}) when $\mathcal{C}$ is a $\mathscr{U}$-site will be done in \cref{*}, so let us suppose that $\mathcal{C}$ is small (so that the functor $u_!$ is \textit{defined}, cf. \cite{SGA4-1}, \Rmnum{1}, 5.0). Let $X$ be an object of $\mathcal{C}$ and $R\hookrightarrow X$ be a covering sieve. Then for any sheaf $F$ over $\mathcal{D}$, by the adjunction property of $u^\star$ and $u_\star$, we have a commutative diagram
\[\begin{tikzcd}
\Hom(u^\star(X),F)\ar[r]\ar[d]&\Hom(u^\star(R),F)\ar[d]\\
\Hom(X,u_\star(F))\ar[r]&\Hom(R,u_\star(F))
\end{tikzcd}\]
where the vertical are isomorphisms. In view of \cref{site morphism of presheaf bicovering iff}, the equivalence of (\rmnum{1}), (\rmnum{2}), (\rmnum{3}) is then easily deduced.\par
We now prove (\rmnum{1})$\Rightarrow$(\rmnum{4}), so assume that $u$ is a continuous functor. For any sheaf $G$ on $\mathcal{C}$, we define $u^*(G)=(u^\star(i_\mathcal{C}(G)))^\#$. Then for any sheaf $F$ on $\mathcal{D}$, there are canoical isomorphisms
\begin{align*}
\Hom(G,u_*(F))&\cong\Hom(i_\mathcal{C}(G),i_\mathcal{C}(u_*(F)))\cong\Hom(i_\mathcal{C}(G),u_\star(i_\mathcal{D}(F)))\\
&\cong\Hom(u^\star(i_\mathcal{C}(G)),i_\mathcal{D}(F))\cong\Hom((u^\star(i_\mathcal{C}(G)))^\#,F)
\end{align*}
(the first isomorphism follows from the fact that $i_\mathcal{C}$ is fully faithful, the second one is the commutative diagram (\ref{site small continuous functor iff-1}), and the third one follows from adjunction). Therefore the functor $u^*$ is left adjoint to $u_*$, and it clearly commutes with inductive limits. For any presheaf $K$ over $\mathcal{C}$ and sheaf $F$ over $\mathcal{D}$, we also have the following canonical isomorphisms
\begin{align*}
\Hom(u^*(K^\#),F)&\cong \Hom(K^\#,u_*(F))\cong\Hom(K,i_\mathcal{C}(u_*(F)))\cong\Hom(K,u_\star(i_\mathcal{D}(F)))\\
&\cong \Hom(u^\star(K),i_\mathcal{D}(F))\cong\Hom((u^\star(K))^\#,F).
\end{align*}
In particular, if $K$ is representable, we then obtain a commutative diagram
\[\begin{tikzcd}
\mathcal{C}\ar[r,"u"]\ar[d,swap,"\eps_\mathcal{D}"]&\mathcal{D}\ar[d,"\eps_\mathcal{D}"]\\
\Sh(\mathcal{C})\ar[r,"u^*"]&\Sh(\mathcal{D})
\end{tikzcd}\]
where we use the commutative diagram (\cite{SGA4-1} \Rmnum{1}, 5.4 (3)).\par
Conversely, assume that we are given a functor $u^*:\Sh(\mathcal{D})\to \Sh(\mathcal{D})$ satsisfying the conditions of (\rmnum{4}). Consider the diagram
\[\begin{tikzcd}
\mathcal{C}\ar[r,"u"]\ar[d,swap,"h"]&\mathcal{D}\ar[d,"h"]\\
\PSh(\mathcal{C})\ar[r,"u^\star"]\ar[d,swap,"(-)^\#"]&\PSh(\mathcal{D})\ar[d,"(-)^\#"]\\
\Sh(\mathcal{C})\ar[r,"u^*"]&\Sh(\mathcal{D})
\end{tikzcd}\]
By the definition of $u^\star$, the upper square is commutative, and the vertical compositions are $\eps_\mathcal{C}$ and $\eps_\mathcal{D}$, respectively. For any object $K$ in $\PSh(\mathcal{C})$, we have a canonical isomorphism (\cite{SGA4-1}, \Rmnum{1}, 3.4)
\[\rlim_{(X\to K)\in\mathcal{C}_{/K}}h_X \stackrel{\sim}{\to } K.\]
As the functors $u^\star$, $u^*$ and $\#$ commutes with inductive limits, we then deduce the following isomorphisms
\begin{gather*}
\rlim_{(X\to K)\in\mathcal{C}_{/K}}u^*(X^\#) \stackrel{\sim}{\to } u^*(K^\#),\quad \rlim_{(X\to K)\in\mathcal{C}_{/K}}(u^\star(X))^\# \stackrel{\sim}{\to } (u^\star(K))^\#.
\end{gather*}
Since $u^\star\circ h=h\circ u$, the commutativity of (\ref{site small continuous functor iff-2}) then provides an isomorphism $u^*(K^\#)\cong(u^\star(K))^\#$, which is immediately verified to be funcotrial on $K$. The diagram
\[\begin{tikzcd}
\PSh(\mathcal{C})\ar[r,"u^\star"]\ar[d,swap,"(-)^\#"]&\PSh(\mathcal{D})\ar[d,"(-)^\#"]\\
\Sh(\mathcal{C})\ar[r,"u^*"]&\Sh(\mathcal{D})
\end{tikzcd}\]
is then commutative up to isomorphisms. As $\#\circ i$ is isomorphic to the identity functor, we obtain an isomorphism $u^*\cong(u^\star\circ i)^\#$, whence the uniqueness of $u^*$. Now let $f:H\to K$ be a bicovering of $\PSh(\mathcal{C})$. Then $f^\#$ is an isomorphism by \cref{site morphism of presheaf bicovering iff}, so $(u^\star(f))^\#$ (isomorphic to $u^*(f^\#)$) is also an isomorphism, which means $u^\star(f)$ is bicovering. This proves (\rmnum{4})$\Rightarrow$(\rmnum{2}) and completes the proof.
\end{proof}
The functor $u^*:\Sh(\mathcal{C})\to \Sh(\mathcal{D})$ of \cref{site small continuous functor iff} can be intepreted as the "inverse image" functor induced by the functor $u$. Its properties are summarized in the following proposition:
\begin{proposition}\label{site continuous functor sheaf inverse image prop}
Let $u:\mathcal{C}\to \mathcal{D}$ be a continuous functor from a small site $\mathcal{C}$ to a $\mathscr{U}$-site $\mathcal{D}$.
\begin{enumerate}
\item[(a)] The functor $u^*$ is left adjoint to $u_*$.
\item[(b)] We have canonical isomorphisms $u^*\cong (u^\star\circ i)^\#$ and $u^*\circ \#\cong \#\circ u^\star$.
\item[(c)] The functor $u^*$ commutes with inductive limits.
\item[(d)] If the functor $u^\star$ is left exact, then $u^*$ is also left exact. More generally, the functor $u^*$ commutes with finite projective limit if the functor $u^\star$ does.
\end{enumerate}
\end{proposition}
\begin{proof}
The first three assertions are proved in \cref{site small continuous functor iff}, and (d) follows from the isomorphism $u^*\cong (u^\star\circ i)^\#$ in (b), since $i$ and $\#$ commute with finite projective limits.
\end{proof}
\begin{remark}
Combing (\cite{SGA4-1} \Rmnum{1}, 5.4) and \cref{site continuous functor sheaf inverse image prop}, we obtain a diagram
\[\begin{tikzcd}
\mathcal{C}\ar[r,"u"]\ar[d,swap,"h"]&\mathcal{D}\ar[d,"h"]\\
\PSh(\mathcal{C})\ar[r,"u^\star"]\ar[d,swap,"(-)^\#"]&\PSh(\mathcal{D})\ar[d,"(-)^\#"]\\
\Sh(\mathcal{C})\ar[r,"u^*"]&\Sh(\mathcal{D})
\end{tikzcd}\]
where the upper square is commutative and the lower square commutes up to isomorphisms. But the functors $\#$, $u^\star$ and $u^*$ are only defined up to isomorphism. One can check that we can choose them such that:
\begin{enumerate}
\item[(a)] The composition $h^\#$ is injective on the set of objects.
\item[(b)] The diagram
\[\begin{tikzcd}
\mathcal{C}\ar[r,"u"]\ar[d,swap,"h^\#"]&\mathcal{D}\ar[d,"h^\#"]\\
\Sh(\mathcal{C})\ar[r,"u^*"]&\Sh(\mathcal{D})
\end{tikzcd}\]
is commutative.
\end{enumerate}
More precisely, we can choose the sheafification functors on $\PSh(\mathcal{C})$ and $\PSh(\mathcal{D})$ to satisfy condition (a). Then we can choose the functor $u^*$ in such a way that condition (b) is fulfilled.
\end{remark}

\section{Descent and stacks}
The notion "descent" provides a general framework for "glueing" process of objects, and hence the "glueing" of categories. The most classical case of glueing is giving a topological space $X$ and an open covering $(X_i)$ of $X$; if for each $i$ we are given a fiber space (say) $E_i$ over $X_i$, and for each pair $(i,j)$ an isomorphism $f_{ji}$ from $E_i|_{X_{ij}}$ to $E_j|_{X_{ij}}$ (where $X_{ij}=X_i\cap X_j$), satisfying a transitive condition (that is, $f_{kj}f_{ji}=f_{ki}$), then we know that there exists a unique (up to isomorphism) space $E$ over $X$, defined by the condition that we have isomorphisms $f_i:E|_{X_i}\to E_i$, satisfying the relations $f_{ji}=f_jf_i^{-1}$. Let $X'$ be the sum of $X_i$, which is a fiber space over $X$ (endowed with the continous map $X'\to X$). The data of the spaces $E_i$ then can be interpreted as a fiber space $E'$ over $X'$, and the isomorphisms $f_{ji}$ give an isomorphism of the inverse images $E_1''$ and $E_2''$ of $E'$ (under the canonical projection) over $X''=X\times_XX'$. The gluing condition can then be written as an identity between isomorphisms of the fiber spaces $E_1'''$ and $E_3'''$ over the triple fiber product $X'''=X'\times_XX'\times_XX'$ (where $E_i'''$ is the inverse image of $E'$ over $X'''$ under the canonical projection of index $i$). The construction of $E$ from $E_i$ and $f$ is a typical case of a "descent" process.

\subsection{Generalities on descent}
\paragraph{Universally effective morphisms}
Let $\mathcal{C}$ be a fixed category. We recall that a morphism $u:T\to S$ is called an \textbf{epimorphism} if, for any object $T\in\mathcal{C}$, the corresponding map
\[X(S)=\Hom(S,X)\to X(T)=\Hom(T,X)\]
is injective. We say that $u$ is a \textbf{universal epimorphism} if for any morphism $S'\to S$, the fiber product $T'=T\times_SS'$ exists and $u':T'\to S'$ is an epimorphism.
\begin{definition}
A diagram
\[\begin{tikzcd}
A\ar[r,"u"]&B\ar[r,shift left=2pt,"v_1"]\ar[r,shift right=2pt,swap,"v_2"]&C
\end{tikzcd}\]
of maps of sets is called \textbf{exact} if $u$ is injective and its image is formed by the elements $b\in B$ such that $v_1(b)=v_2(b)$. A diagram of the same type in $\mathcal{C}$ is called \textbf{exact} if for any object $X$ of $\mathcal{C}$, the corresponding diagram of sets
\[\begin{tikzcd}
A(X)\ar[r]&B(X)\ar[r,shift left=2pt]\ar[r,shift right=2pt]&C(X)
\end{tikzcd}\]
is exact; we also say that $(A,u)$ is a kernel of the couple $(v_1,v_2)$. Dually, a diagram
\[\begin{tikzcd}
C\ar[r,shift left=2pt,"v_1"]\ar[r,shift right=2pt,swap,"v_2"]&B\ar[r,"u"]&A
\end{tikzcd}\]
in $\mathcal{C}$ is called exact if it is exact as a diagram in the opposite category $\mathcal{C}^{\op}$, i.e. if for any object $X$ of $\mathcal{C}$, the corresponding diagram of sets
\[\begin{tikzcd}
X(A)\ar[r]&X(B)\ar[r,shift left=2pt]\ar[r,shift right=2pt]&X(C)
\end{tikzcd}\]
is exact. We also say that $(A,u)$ is a cokernel of the couple $(v_1,v_2)$.
\end{definition}
\begin{definition}
A morphism $u:T\to S$ is called an effective morphism effective epimorphism if the fiber product $T\times_ST$ exist, and if the diagram
\[\begin{tikzcd}
T\times_ST\ar[r,shift left=2pt,"\pr_1"]\ar[r,shift right=2pt,swap,"\pr_2"]&T\ar[r,"u"]&S
\end{tikzcd}\]
is exact, i.e. if $u$ is a cokernel of $(\pr_1,\pr_2)$. We say that $u$ is a \textbf{universally effective epimorphism} if for any morphism $S'\to S$, the fiber product $T'=T\times_SS'$ exists and the morphism $u':T'\to S'$ is an effective epimorphism.
\end{definition}
A morphism $u:T\to S$ is called \textbf{squarable} if for any morphism $S'\to S$, the fiber product $T\times_SS'$ exists. The following lemma is trivial from the above definitions:
\begin{lemma}\label{category universal epi and composition}
Consider morphisms $U\stackrel{v}{\to}T\stackrel{u}{\to} S$, then
\begin{enumerate}
    \item[(a)] $u,v$ epimorphism $\Rightarrow$ $uv$ epimorphism $\Rightarrow$ $u$ epimorphism.
    \item[(b)] $u,v$ universal epimorphism $\Rightarrow$ $uv$ universal epimorphism $\Rightarrow$ $u$ universal epimorphism.
\end{enumerate}
\end{lemma}
\begin{corollary}
Let $u:X\to Y$ and $u':X'\to Y'$ be universal epimorphisms such that $Y\times Y'$ exists. Then $X\times X'$ exists and $u\times u':X\times X'\to Y\times Y'$ is a universal epimorphism.
\end{corollary}

\begin{definition}
We say that an object $S$ of $\mathcal{C}$ is squarable if its product by any object of $\mathcal{C}$ exists (if $\mathcal{C}$ has a final object $e$, this means $S\to e$ is squatable).
\end{definition}

\begin{lemma}\label{category effective epimorphism in C/S iff in C}
Let $u:X\to Y$ be a morphism in $\mathcal{C}_{/S}$; for this to be an epimorphism (resp. universal epimorphism, resp, effective epimorphism, resp. universally effective morphism), it is sufficient that the corresponding morphism in $\mathcal{C}$ is, and this is also necessary if $S$ is a squarable object in $\mathcal{C}$.
\end{lemma}

\paragraph{Descent morphisms}
Let $\mathcal{C}$ be a category and $f:S'\to S$ be a morphism in $\mathcal{C}$ such that $S''=S'\times_SS'$ exists, and let $u':X'\to S'$ be an object over $S'$. A \textbf{glueing datum} over $X'/S'$, relative to $f$, is defined to be an $S''$-isomorphism
\[\phi:X_1''\stackrel{\sim}{\to} X_2''\]
where $X_i''$ ($i=1,2$) denotes the inverse image (assumed to exist) of $X'/S'$ under the projection $\pr_i:S''\to S'$. We say the the glueing datum $\phi$ is a \textbf{descent datum} if it satisfies the cocycle condition:
\[\pr_{3,1}^*(\phi)=\pr_{3,2}^*(\phi)\pr_{2,1}^*(\phi)\]
where $\pr_{i,j}$ ($1\leq j<i\leq 3$) are the canonical projections of $S'''=S'\times_SS'\times_SS'$ to $S''$ (we assume that $S'''$ exists), and $\pr_{i,j}^*(\phi)$ is the inverse image of $\phi$, considered as an $S'''$-morphism from $X_j'''$ to $X_i'''$, and for any integer $1\leq k\leq 3$, $X'''_k$ denotes the inverse image (assumed to exist) of $X'/S'$ under the canonical projection $q_k:S'''\to S'$.\par

Let $f:S'\to S$ be a morphism such that $S''=S'\times_SS'$ exists, and $X$ be an object over $X$ such that $X'=X\times_SS'$ and $X''=X\times_SS''$ exist. Then the inverse images of $X'$ by $\pr_i$ ($i=1,2$) exist and are canonically isomorphic, so $X'/S'$ is endowed with a canonical glueing datum relative to $f$. If $S'''$ and $X'''=X\times_SS'''$ exist, then this is also a descent datum. If $Y$ is another object over $S$ satisfying the same conditions, then for any $S$-morphism $X\to Y$, the corresponding $S'$-morphism $X'\to Y'$ is \textit{compatible} with the canonical glueing datum over $X',Y'$. If in particular $S'\to S$ is a squarable morphism, then
\[X\mapsto X'=X\times_SS'\]
is a functor from the category $\mathcal{C}_{/S}$ to the category of objects over $S'$ endowed with a descent datum relative to $f$. We say that $f:S'\to S$ is a \textbf{descent morphism} (resp. an \textbf{effective descent morphism}) if $f$ is squarable (i.e. for any $X\to S$, the fiber product $X'=X\times_SS'$ exists) and if the preceding functor $X\mapsto X'=X\times_SS'$ from $\mathcal{C}_{/S}$ to the category of objects over $S'$ endowed with a descent datum relative to $f$, is fully faithfully (resp. an quivalence of categories).\par
We note that the first definition only concerns the notion of glueing (hence do not intervene the fiber product $S'''$): $f$ is a descent morphism if $f$ is squarable and $X\mapsto X'$ is a fully faithful functor from $\mathcal{C}_{/S}$ to the category of objects over $S'$ endowed with a glueing datum relative to $f$. To make this definition explicit, we note that it means that for two objects $X,Y$ over $S$, the following diagram of sets
\begin{equation}\label{category descent morphism sequence-1}
\begin{tikzcd}
\Hom_S(X,Y)\ar[r]&\Hom_{S'}(X',Y')\ar[r,shift left=2pt,"p_1"]\ar[r,shift right=2pt,swap,"p_2"]&\Hom_{S''}(X'',Y'')
\end{tikzcd}
\end{equation}
is exact, where $p_i(u')$ denotes the inverse image of $u'\in\Hom_{S'}(X',Y')$ by the projection $\pr_i:S''\to S'$, for $i=1,2$. In fact, the kernel of the couple $(p_1,p_2)$ is by definition the set of $S'$-morphisms $X'\to Y'$ compatible with the canonical glueing datum.\par
Note that, by the definition of inverse images $Y',Y''$, we have canonical bijections
\[\Hom_{S'}(X',Y')\cong\Hom_S(X',Y),\quad \Hom_{S''}(X'',Y'')\cong \Hom_S(X'',Y),\]
so the exactness of (\ref{category descent morphism sequence-1}) is equivalent to that of
\begin{equation}\label{category descent morphism sequence-2}
\begin{tikzcd}
\Hom_S(X,Y)\ar[r]&\Hom_S(X',Y)\ar[r,shift left=2pt]\ar[r,shift right=2pt]&\Hom_S(X'',Y)
\end{tikzcd}
\end{equation}
obtained by applying $\Hom_S(-,Y)$ to the diagram in $\mathcal{C}_{/S}$:
\begin{equation}\label{category descent morphism sequence-3}
\begin{tikzcd}
X''\ar[r,shift left=2pt]\ar[r,shift right=2pt]&X'\ar[r]&X
\end{tikzcd}
\end{equation}
which is deduced from
\[\begin{tikzcd}
X''\ar[r,shift left=2pt]\ar[r,shift right=2pt]&X'\ar[r]&X
\end{tikzcd}\]
by base change $X\to S$. This proves, in view of \cref{category effective epimorphism in C/S iff in C}, the first part of the following proposition:

\begin{proposition}\label{category descent morphism and effective morphism}
If $f:S'\to S$ is a universally effective morphism, then it is a descent morphism, and the converse is also true if $S$ is a squarable object in $\mathcal{C}$.
\end{proposition}
\begin{proof}
It remains to prove that if $f$ is a descent morphism, then is it a universally effective morphism, if $S$ is squarable. This means for any $X\to S$, we muse show that the diagram (\ref{category descent morphism sequence-3}) is exact, i.e. for any object $Z$ of $\mathcal{C}$, the diagram of sets obtained by applying $\Hom(-,Z)$ is exact. Now by hypothesis $Z\times S$ exists; let $Y$ be the corresponding object in $\mathcal{C}_{/S}$, then the transformed diagram of (\ref{category descent morphism sequence-3}) by $\Hom(-,Z)$ is isomorphic to that by $\Hom_S(-,Y)$, and the latter is exact by our hypothesis on $f$.
\end{proof}

We can therefore apply the results of descent morphisms to universally effective epimorphisms, such as the following:
\begin{proposition}\label{category descent morphism object uniqueness prop}
Let $f:S'\to S$ be a descent morphism (for example a universally effective epimorphism), then
\begin{enumerate}
    \item[(a)] For any $S$-morphism $u:X\to Y$, $u$ is an isomorphism (resp. a monomorphism) if and only if $u':X'\to Y'$ is.
    \item[(b)] Let $X,Y$ be two sub-objects of $S$ and $X',Y'$ be the sub-objects of $S'$ obtained by base change. For that $X$ is dominated by $Y$ (resp. equal to $Y$), it is necessary and sufficient that so is for $X',Y'$.
\end{enumerate}
\end{proposition}
\begin{proof}
For (a), it follows by definition that if $u'$ is an isomorphism in the category of glueing objects, then $u$ is an isomorphism. But we also note that any isomorphism of objects over $S'$, compatible with glueing datum, is an isomorphism of glueing object, i.e. its inverse is also compatible with glueing datum. For (b), we are reduced to proving that if $X'$ is dominated by $Y'$, i.e. there exists an $S'$-morphism $X'\to Y'$, then the same is true for $X,Y$ over $S$. Now as $Y'\to S'$, hence also $Y''\to S''$, is a monomorphism, we see that $X'\to Y'$ is automatically compatible with the glueing datum, hence provides an $S$-morphism $X\to Y$.
\end{proof}

\begin{corollary}\label{category descent morphism monomorphism if fiber product isomorphic}
Let $f:S'\to S$ be a univerally effective epimorphism and $g:S\to T$ be a morphism such that $S\times_TS$ exists. Suppose that $S''=S'\times_SS'$ is isomorphic to $S'\times_TS'$, then $g:S\to T$ is a monomorphism.
\end{corollary}
\begin{proof}
In fact, consider the Cartesian diagram
\[\begin{tikzcd}
S'\times_SS'\ar[r,"\cong"]\ar[d]&S'\times_TS'\ar[d]&\\
X\ar[r]&S\times_TS
\end{tikzcd}\]
In view of (\cite{SGA3}, \Rmnum{4}, 1.9), the morphism $S'\times_TS'\to S\times_TS$ is a universally effective epimorphism, so by \cref{category descent morphism object uniqueness prop} the diagonal morphism $S\to S\times_TS$ is also an isomorphism, which means $g:S\to T$ is a monomorphism.
\end{proof}

\paragraph{Descent for fibre categories}
More generally, let $p_\mathcal{F}:\mathcal{F}\to\mathcal{C}$ be a fibre category over a site $\mathcal{C}$ and $\mathfrak{U}=\{S_i\to S\}$ be a covering family. Fix a cleavage of $\mathcal{F}$, we define a category $\mathcal{F}(\mathfrak{U})$ of descent data as follows: an object of $\mathcal{F}(\mathfrak{U})$ is a collection $(\{\xi_i\},\{\phi_{ij}\})$, where $\xi_i\in\mathcal{F}(S_i)$ and $\phi_{ij}:\pr_2^*(\xi_j)\stackrel{\sim}{\to}\pr_1^*(\xi_i)$ are isomorphisms in $\mathcal{F}(S_i\times_SS_j)$ satisfying the following cocycle condition. For any triple of indices $i,j,k$, we have the equality
\[\pr_{13}^*(\phi_{ik})=\pr_{12}^*(\phi_{ij})\circ \pr_{23}^*(\phi_{jk}):\pr_3^*(\xi_k)\to\pr_1^*(\xi_i)\]
where $\pr_{ij}^*$ and $\pr_i$ are projections on the $i$-th and $j$-th factor, or the $i$-th factor, respectively. The isomorphisms $\phi_{ij}$ are called transition isomorphisms of the object $(\{\xi_i\},\{\phi_{ij}\})$.\par
A morphisms between descent objects
\[\alpha:(\{\xi_i\},\{\phi_{ij}\})\to (\{\eta_i\},\{\psi_{ij}\})\]
is a collection of morphisms $\alpha_i:\xi_i\to\eta_i$ in $\mathcal{F}(S_i)$ with the property that for each pair of indices $i,j$, the diagram
\[\begin{tikzcd}
\pr_2^*(\xi_j)\ar[r,"\pr_2^*(\alpha_j)"]\ar[d,swap,"\phi_{ij}"]&\pr_2^*(\eta_j)\ar[d,"\psi_{ij}"]\\
\pr_1^*(\xi_j)\ar[r,"\pr_1^*(\alpha_i)"]&\pr_1^*(\eta_j)
\end{tikzcd}\]
commutes. There is an obvious way of composing morphisms, which makes objects with descent data the objects of a category.

\begin{remark}
In understanding the definition above it may be useful to contemplate the cube
\begin{equation}\label{descent category projection square}
\begin{tikzcd}[row sep=4mm,column sep=4mm]
&S_{ijk}\ar[ld,swap,"\pr_{12}"]\ar[rr,"\pr_{23}"]\ar[dd,"\pr_{13}",pos=0.2]&&S_{jk}\ar[ld]\ar[dd]\\
S_{ij}\ar[dd]\ar[rr,crossing over]&&S_j\ar[dd]&\\
&S_{ik}\ar[ld]\ar[rr]&&S_k\ar[ld]\\
S_i\ar[rr]&&S
\arrow[from=2-3,to=4-3,crossing over]
\end{tikzcd}
\end{equation}
in which all arrows are given by projections, and every face is cartesian.
\end{remark}

For each object $\xi$ of $\mathcal{F}(S)$, we can construct an object of $\mathcal{F}(\mathfrak{U})$ as follows. The objects $\xi_i$ are the pullbacks $\sigma_i^*(\xi)$, and the isomorphisms $\phi_{ij}:\pr_2^*(\sigma^*(\xi))\stackrel{\sim}{\to} \pr_1^*(\sigma_i(\xi))$ are the isomorphisms that come from the fact that both $\pr_2^*(\sigma_j^*(\xi))$ and $\pr_1^*(\sigma_i^*(\xi))$ are pullbacks of $\xi$ to $U_{ij}$. If we identify $\pr_2(\sigma_j^*(\xi))$ with $\pr_1(\sigma_i^*(\xi))$, as is commonly done, then $\phi_{ij}$ are identities.\par
Given an morphism $\alpha:\xi\to\eta$ in $\mathcal{F}(S)$, we obtain morphisms $\sigma_i^*(\alpha):\sigma_i^*(\xi)\to \sigma_i^*(\eta)$, yielding an morphism from the descent object associated with $\xi$ to the one associated with $\eta$. This defines a functor $\mathcal{F}(U)\to\mathcal{F}(\mathfrak{U})$. It is important to notice that these construction do not depend on the choice of a cleavage, in the following sense. Given a different cleavage, for each covering $\{S_i\to S\}$ there is a canonical isomorphism of the resulting categories $\mathcal{F}(\{S_i\to S\})$; and the functors $\mathcal{F}(S)\to\mathcal{F}(\{S_i\to S\})$ commute with these equivalences.

\begin{remark}
Here is a definition of the category of descent data that does not depend on choosing of a cleavage. Let $\mathfrak{U}=\{S_i\to S\}$ be a covering. We define an object with descent data to be a triple of sets
\[(\{\xi_i\},\{\xi_{ij}\},\{\xi_{ijk}\})\]
where each $\xi_i$ is an object of $\mathcal{F}(S_i)$, and for each triple of indices $i,j,k$, we have a commutative diagram
\[\begin{tikzcd}[row sep=4mm,column sep=4mm]
&\xi_{ijk}\ar[rr]\ar[dd]&&\xi_{jk}\ar[dd]\\
\xi_{ij}\ar[dd]\ar[rr,crossing over]&&\xi_j&\\
&\xi_{ik}\ar[ld]\ar[rr]&&\xi_k\\
\xi_i
\end{tikzcd}\]
in which every arrow is Cartesian, and such that when applying $p_\mathcal{F}$ every arrow maps to the appropriate projection in the diagram (\ref{descent category projection square}). These form the objects of a category $\mathcal{F}_{\desc}(\mathfrak{U})$. A morphism
\[\phi:(\{\xi_i\},\{\xi_{ij}\},\{\xi_{ijk}\})\to (\{\xi_i\},\{\xi_{ij}\},\{\xi_{ijk}\})\]
consists of set of morphisms with $\phi_i:\xi_i\to\eta_i$ in $\mathcal{F}(S_i)$, such that for each pair of indicies $i,j$ we have
\[\pr_1^*(\phi_i)=\pr_2^*(\phi_j):\xi_{ij}\to\eta_{ij}.\]
We can also define a morphism as a triple $(\{\phi_i\},\{\phi_{ij}\},\{\psi_{ijk}\})$, where $\phi_i:\xi_i\to\eta_i$ is a morphism in $\mathcal{F}(U_i)$ for each $i$, with the obvious compatibility conditions with the various arrows involved in the definition of an object. It can be checked that these two definitions of morphisms are equivalent.\par
Once we have chosen a cleavage, there is a functor from $\mathcal{F}_{\desc}(\mathfrak{U})$ to $\mathcal{F}(\mathfrak{U})$. Given an object $(\{\xi_i\},\{\xi_{ij}\},\{\xi_{ijk}\})$ of $\mathcal{F}_{\desc}(\mathfrak{U})$, the morphisms $\xi_{ij}\to\xi_i$ and $\xi_{ij}\to\xi_j$ induce isomorphisms $\xi_{ij}\cong\pr_1^*(\xi_i)$ and $\xi_{ij}\cong\pr_2^*(\xi_j)$, and the resulting isomorphism $\pr_2^*(\xi_j)\cong\pr_1^*(\xi_i)$ is easily seen to satisfy the cocycle condition, thus defining an object of $\mathcal{F}(\mathfrak{U})$. A morphism $\phi$ in $\mathcal{F}_{\desc}(\mathfrak{U})$ is already a morphism in $\mathcal{F}(\mathfrak{U})$. It is not hard to check that this functor is an equivalence of categories.\par
We can not define a functor $\mathcal{F}(S)\to\mathcal{F}_{\desc}(\mathfrak{U})$ directly, without the choice of a cleavage. However, let us define another category $\mathcal{F}_{\comp}(\mathfrak{U})$ in which the objects are quadruples $(\xi,\{\xi_i\},\{\xi_{ij}\},\{\xi_{ijk}\})$, where $\xi$ is an object of $\mathcal{F}(S)$ and each $\xi_i$ is an object of $\mathcal{F}(S_i)$, with a commutative cube
\[\begin{tikzcd}[row sep=4mm,column sep=4mm]
&\xi_{ijk}\ar[rr]\ar[dd]&&\xi_{jk}\ar[dd]\\
\xi_{ij}\ar[dd]\ar[rr,crossing over]&&\xi_j&\\
&\xi_{ik}\ar[ld]\ar[rr]&&\xi_k\ar[ld]\\
\xi_i\ar[rr]&&\xi
\arrow[from=2-3,to=4-3,crossing over]
\end{tikzcd}\]
in $\mathcal{F}$ for all the triples of indices, in which all the arrows are Cartesian, and whose image in $\mathcal{C}$ is the cube (\ref{descent category projection square}) above. A morphism from $(\xi,\{\xi_i\},\{\xi_{ij}\},\{\xi_{ijk}\})$ to $(\eta,\{\eta_i\},\{\eta_{ij}\},\{\eta_{ijk}\})$ can be indifferently defined as a morphism $\phi:\xi\to\eta$ in $\mathcal{F}(S)$, or as collections of arrows $\xi\to\eta$, $\xi_i\to\eta_i,\xi_{ij}\to\eta_{ij}$ and $\xi_{ijk}\to\eta_{ijk}$ satisfying the obvious commutativity conditions.\par
There is a functor from $\mathcal{F}_{\comp}(\mathfrak{U})$ to $\mathcal{F}(S)$ that sends a whole object $(\xi,\{\xi_i\},\{\xi_{ij}\},\{\xi_{ijk}\})$ to $\xi$, and is easily seen to be an equivalence. There is also a functor from $\mathcal{F}_{\comp}(\mathfrak{U})$ to $\mathcal{F}_{\desc}(\mathfrak{U})$ that forgets the object of $\mathcal{F}(S)$, and this takes the place of the functor from $\mathcal{F}(S)$ to $\mathcal{F}(\mathfrak{U})$ defined using cleavages.
\end{remark}

The most elegant definition of objects with descent data is one that uses sieves: it does not require choosing anything. Let $\mathfrak{U}=\{S_i\to S\}$ be a covering in $\mathcal{C}$. The associated sieve $R\hookrightarrow S$ is a functor, whose associated category fibered in sets is the full subcategory of $\mathcal{C}_{/S}$, whose objects are arrows $T\to S$ that factor through some $S_i\to S$. According to our principle that functors and categories fibered in sets should be identified, we denote by $h_\mathfrak{U}$ this category. By the same principle, we also denote by $h_S$ the category $\mathcal{C}_{/S}$. There is a functor $\sHom_{\Cart}(h_\mathfrak{U},\mathcal{F})$ defined as follows. Suppose that we are given a morphism $F:h_\mathfrak{U}\to\mathcal{F}$. For any triple of indices $i,j,k$, we have objects $S_i\to S$, $S_{ij}\to S$ and $S_{ijk}\to S$ of $h_\mathfrak{U}$, and each of the projections of (\ref{descent category projection square}) not landing in $U$ is an arrow in $h_\mathfrak{U}$. Hence we can apply $F$ and get a diagram
\[\begin{tikzcd}[row sep=4mm,column sep=4mm]
&F(S_{ijk})\ar[rr]\ar[dd]\ar[ld]&&F(S_{jk})\ar[dd]\ar[ld]\\
F(S_{ij})\ar[dd]\ar[rr,crossing over]&&F(S_j)&\\
&F(S_{ik})\ar[ld]\ar[rr]&&F(S_k)\\
F(S_i)&&
\end{tikzcd}\]
giving an object of $\mathcal{F}_{\desc}(\mathfrak{U})$. This extends to a functor $\sHom_{\mathcal{C}}(h_\mathfrak{U},\mathcal{F})\to\mathcal{F}_{\desc}(\mathfrak{U})$ in the obvious way.\par
Also, consider the functor 
\[\Hom_{\Cart}(h_S,\mathcal{F})\to\Hom_{\Cart}(h_\mathfrak{U},\mathcal{F})\]
induced by the inclusion $h_\mathfrak{U}\sub h_S$. After choosing a cleavage, it is easy to verify that the composite of functors
\[\Hom_{\Cart}(h_S,\mathcal{F})\to \Hom_{\Cart}(h_\mathfrak{U},\mathcal{F})\stackrel{\sim}{\to} \mathcal{F}_{\desc}(\mathfrak{U})\stackrel{\sim}{\to} \mathcal{F}(\mathfrak{U})\]
is isomorphic to the composition
\[\Hom_{\Cart}(h_S,\mathcal{F})\stackrel{\sim}{\to} \mathcal{F}(S)\to\mathcal{F}(\mathfrak{U})\]
where the first functor is the equivalence of the $2$-Yoneda Lemma.

\begin{proposition}\label{descent Hom cat and descent cat equivalence}
The functor $\Hom_{\Cart}(h_\mathfrak{U},\mathcal{F})\to\mathcal{F}_{\desc}(\mathfrak{U})$ is an equivalence.
\end{proposition}
\begin{proof}
Let us construct a functor $\mathcal{F}_{\desc}(\mathfrak{U})\to \Hom_{\Cart}(h_\mathfrak{U},\mathcal{F})$. For each $T\to S$ in $h_\mathfrak{U}$, choose a factorization $T\to S_i\to S$. Assume that we given an object $(\{\xi_i\},\{\xi_{ij}\},\{\xi_{ijk}\})$; for each arrow $T\to S$ in the category $h_\mathfrak{U}$, we get an object $\xi_T$ of $\mathcal{F}$ by pulling back $\xi_i$ along the chosen arrow $T\to S_i$. This defines a function from the class of objects of $h_\mathfrak{U}$ to $\mathcal{F}$.\par
Given an arrow $T'\to T\to S$ in $h_\mathfrak{U}$, chose a factorization $T'\to S_j\to S$ of the composite $T'\to S$. This, together with the composite $T'\to T\to S_i$, yields a morphism $T'\to S_{ij}$ fitting into the diagram
\[\begin{tikzcd}
T'\ar[r]\ar[d]&S_{ij}\ar[r]\ar[d]&S_j\ar[d]\\
T\ar[r]&S_i\ar[r]&S
\end{tikzcd}\]
Since the given morphism $\xi_{ij}\to\xi_j$ is Cartesian, the canonical morphism $\xi_{T'}\to\xi_j$, that is given by definition, because $\xi_{T'}$ is a pullback of $\xi_j$, will factor through uniquely as $\xi_{T'}\to\xi_{ij}\to\xi_j$, in a way that $\xi_{T'}\to\xi_{ij}$ sends $T'\to S_{ij}$. Now the composition $\xi_{T'}\to\xi_{ij}\to\xi_i$ factors as $\xi_{T'}\to\xi_T\to\xi_i$ for a unique morphism $\xi_{T'}\to\xi_T$ lying over the morphism $T'\to T$ in $\mathcal{C}$, and by transitivity, the morphism $\xi_{T'}\to\xi_T$ is Cartesian. These two functions, on objects and on arrows, define a morphism $h_\mathfrak{U}\to\mathcal{F}$. It is now immediate that they are quasi-inverses of each other. 
\end{proof}

Let $\mathcal{F}\to\mathcal{C}$ be a fibre category over a site $\mathcal{C}$. We say that $\mathcal{F}$ is a prestack (resp. stack) over $\mathcal{C}$ if for each covering $\{S_i\to S\}$ in $\mathcal{C}$, the functor $\mathcal{F}(S)\to \mathcal{F}(\{S_i\to S\})$ is fully faithful (resp. an equivalence of categories).\par
Concretely, for $\mathcal{F}$ to be a prestack means the following. Let $S$ be an object of $\mathcal{C}$, $\eta$ and $\eta$ be object of $\mathcal{F}(S)$, $\{S_i\to S\}$ be a covering, $\xi_i$ and $\eta_i$ be the pullbacks of $\xi$ and $\eta$ to $S_i$, $\xi_{ij}$ and $\eta_{ij}$ be the pull backs of $\xi$ and $\eta$ to $S_{ij}$. Suppose that there are morphisms $\alpha_i:\xi_i\to\eta_i$ in $\mathcal{F}(S_i)$ such that $\pr_1^*(\alpha_i)=\pr_2^*(\alpha_j):\xi_{ij}\to\eta_{ij}$ for any $i,j$. Then there is a unique morphism $\alpha:\xi\to\eta$ whose pullback to $S_i$ is $\alpha_i$ for all $i$. This condition can be restated using the category $\mathcal{C}_{/S}$ and the comma topology.

\begin{proposition}\label{descent fibre cat stack iff sheaf Hom}
Let $\mathcal{F}$ be a fibered category over a site $\mathcal{C}$. Then $\mathcal{F}$ is a prestack if and only if for any object $S$ of $\mathcal{C}$ and any two objects $\xi,\eta$ over $S$, the functor $\sHom_S(\xi,\eta):\mathcal{C}_{/S}^{\op}\to\Set$ is a sheaf in the comma topology.
\end{proposition}
\begin{proof}
Recall that the comma topology over $\mathcal{C}_{/S}$ is induced from the topology of $\mathcal{C}$. Assume that for any object $S$ of $\mathcal{C}$ and any two objects $\xi,\eta$ over $S$, the functor $\sHom_S(\xi,\eta):\mathcal{C}_{/S}^{\op}\to\Set$ is a sheaf in the comma topology. Now take a covering $\{S_i\to S\}$ and two objects $\xi,\eta$ of $\mathcal{F}(S)$. If we denote by $(\{\xi_i\},\{\alpha_{ij}\})$ and $(\{\eta_i\},\{\beta_{ij}\})$ the descent data associated with $\xi$ and $\eta$, respectively, then the morphisms in $\mathcal{F}(\{S_i\to S\})$ are the collections of morphisms $\{\phi_i:\xi_i\to\eta_i\}$ such that the restrictions of $\phi_i$ and $\phi_j$ to the pullbacks of $\xi$ and $\eta$ over $S_{ij}$ coincide. The fact that $\sHom_U(\xi,\eta)$ is a sheaf ensures that this comes from a unique morphism $\xi\to\eta$ in $\mathcal{F}(S)$, which means precisely that the functor $\mathcal{F}(S)\to\mathcal{F}(\{S_i\to S\})$ is fully faithful. The proof of the reverse direction is similar.
\end{proof}

An object with descent data $(\{\xi_i\},\{\phi_{ij}\})$ in $\mathcal{F}(\{U_i\to U\})$ is called \textbf{effective} if it is isomorphic to the image of an object of $\mathcal{F}(U)$. Equivalently, an object $(\{\xi_i\},\{\phi_{ij}\})$ is effective if there exists an object $\xi$ of $\mathcal{F}(S)$ together with Cartesian morphisms $\xi_i\to\xi$ over $\sigma_i:S_i\to S$, such that the diagram
\[\begin{tikzcd}
\pr_2^*(\xi_j)\ar[d]\ar[rr,"\phi_{ij}"]&&\pr_1^*(\xi_i)\ar[d]\\
\xi_j\ar[rd]&&\xi_i\ar[ld]\\
&\xi&
\end{tikzcd}\]
commutes for any $i,j$. In fact, the cartesian arrows $\xi_i\to\xi$ correspond to isomorphisms $\xi_i\cong\sigma_i^*(\xi)$ in $\mathcal{F}(S_i)$; and the commutativity of the diagram above is easily seen to be equivalent to the cocycle condition. Clearly, $\mathcal{F}$ is a stack if and only if it is a prestack, and all objects with descent data in $\mathcal{F}$ are effective. 

\begin{proposition}\label{descent fibre cat of presheaf stack iff sheaf}
Let $\mathcal{C}$ be a site, $F:\mathcal{C}^{\op}\to\Set$ a functor; we can also consider it as a category fibered in sets $\mathcal{F}\to\mathcal{C}$.
\begin{enumerate}
    \item[(a)] $\mathcal{F}$ is a prestack if and only if $F$ is a separated functor.
    \item[(b)] $\mathcal{F}$ is a stack if and only if $F$ is a sheaf.
\end{enumerate}
\end{proposition}


\subsection{Descent of quasi-coherent modules}
Let $\mathbf{Sch}$ be the category of schemes. We consider the category $\mathcal{F}$ of couples $(X,\mathscr{F})$, where $X$ is a scheme and $\mathscr{F}$ is an $\mathscr{O}_X$-module over $X$. A morphism from $(X,\mathscr{F})$ to $(Y,\mathscr{G})$ is defined to be a couple $(f,\varphi)$, where $f:X\to Y$ is a morphism of schemes and $\varphi:\mathscr{G}\to f_*(\mathscr{F})$ is a homomorphism. This category can be considered as a fibre category over $\mathbf{Sch}$, where the inverse image functor of a morphism $f:X\to Y$ in $\mathbf{Sch}$ is given by the usual pullback functor of modules defined by $f$. As the inverse image of a quasi-coherent module is quasi-coherent, we see that the full subcategory formed by couples $(X,\mathscr{F})$, wherer $\mathscr{F}$ is a quasi-coherent $\mathscr{O}_X$-module, is a fibre subcategory. This category is called the \textbf{fibre category of quasi-coherent modules over schemes}, and denoted by $\mathbf{Qcoh}$. By definition, the structural functor $p:\mathbf{Qcoh}\to \mathbf{Sch}$ sends a couple $(X,\mathscr{F})$ to its base scheme $X$, and the categorical fiber of $\mathbf{Qcoh}$ at an object $X$ in $\mathbf{Sch}$ is the \textit{opposite} category $\mathbf{Qcoh}(X)^{\op}$.\par
Recall that a morphism $f:X\to Y$ of ringed spaces is called \textbf{faithfully flat} if it is flat and surjective, and \textbf{quasi-compact} if the inverse image of any quasi-compact open is quasi-compact. By 
\begin{theorem}
Let $\mathbf{Qcoh}$ be the fibre category of quasi-coherent modules over schemes and $g:S'\to S$ be a faithfully flat and quasi-compact morphism of schemes. Then $g$ is an effective descent morphism for $\mathbf{Qcoh}$.
\end{theorem}

\subsection{Algebraic spaces}

\paragraph{Properties of sheaves and definition of algebraic space}
In order to speak about various properties of algebraic spaces and morphisms between them, we first discuss some formal language which enables us to speak about many geometric properties of schemes and morphisms between them in terms of the corresponding sheaves on the big Zariski site.

\begin{definition}
Let $\mathcal{C}$ be a site with a subcanonical topology. A class of objects $\mathcal{S}\sub\mathcal{C}$ is called \textbf{stable} if for every covering $\{U_i\to U\}$, the object $U$ is in $\mathcal{S}$ if and only if $U_i\in\mathcal{S}$ for each $i$. A property $\mathcal{P}$ of objects of $\mathcal{C}$ is called stable if the class of objects satisfying $\mathcal{P}$ is stable.
\end{definition}

\begin{example}
Let $\mathcal{C}$ be the category of schemes with the Zariski topology. Then the following properties are stable: locally noetherian, reduced, normal, regular. If $S$ is a scheme and we take $\mathcal{C}$ to be the category of $S$-schemes with the Zariski topology then the following properties are stable: locally of finite presentation over $S$, locally of finite type over $S$, being a local complete intersection over $S$.
\end{example}

Let $\mathcal{C}$ be a site. A closed subcategory of $\mathcal{C}$ is a subcategory $\mathcal{C}'\sub\mathcal{C}$ such that the following hold:
\begin{enumerate}
    \item[(a)] $\mathcal{C}'$ contains all isomorphisms,
    \item[(b)] for any Cartesian diagram
    \[\begin{tikzcd}
    X'\ar[r]\ar[d,"f'"]&X\ar[d,"f"]&\\
    Y'\ar[r]&Y
    \end{tikzcd}\]
    in $\mathcal{C}$, if $f$ is a morphism in $\mathcal{C}'$, then $f'$ belongs to $\mathcal{C}'$.
\end{enumerate}
A closed subcategory $\mathcal{C}'\sub\mathcal{C}$ is called \textbf{stable} if for any morphism $f:X\to Y$ in $\mathcal{C}$ and any covering $\{Y_i\to Y\}$, the morphism $f$ is in $\mathcal{C}'$ if and only if all the maps $f_i:X\times Y_i\to Y_i$ are in $\mathcal{C}'$. A stable closed subcategory $\mathcal{C}'$ is called \textbf{local on domain} if for all $f:X\to Y$ in $\mathcal{C}$ and all coverings $\{j_i:X_i\to X\}$, the morphism $f$ is in $\mathcal{C}'$ if and only if the compositions $f\circ j_i$ are in $\mathcal{C}'$.\par
If $\mathcal{P}$ is a property of morphisms in $\mathcal{C}$ satisfied by isomorphisms and closed under composition, let $\mathcal{C}_{\mathcal{P}}$ be the subcategory of $\mathcal{C}$ with the same objects as those in $\mathcal{C}$, but whose morphisms are morphisms satisfying $\mathcal{P}$. We say that $\mathcal{P}$ is \textbf{stable} (resp. \textbf{local on domain}) if the subcategory $\mathcal{C}_\mathcal{P}$ is stable (resp. local on domain).

\begin{example}
Let $S$ be a scheme and $\mathcal{C}$ be the category of $S$-schemes with the \'etale topology. Then the following properties of morphisms in $\mathcal{C}$ are stable: proper, separated, surjective, quasi-compact; and the following properties of morphisms in $\mathcal{C}$ are stable and local on domain: locally of finite type, locally of finite presentation, flat, \'etale, universally open, locally quasi-finite, smooth.
\end{example}

Let $S$ be a scheme and $f:F\to G$ be a morphism of \'etale sheaves over $\mathbf{Sch}_{/S}$. We say that $f$ is \textbf{represented by schemes} if for any $S$-scheme $T$ and morphism $T\to G$, the fiber product $F\times_GT$. Let $\mathcal{P}$ be a stable property of morphisms of schemes. If $f$ is representable by schemes, we say that $f$ \textbf{has property $\mathcal{P}$} if for every $S$-scheme $T$ the morphism of schemes $F\times_GT\to T$ has property $\mathcal{P}$.

\begin{example}\label{scheme morphism represented by scheme}
If $F$ and $G$ are representable, then any morphism $f:F\to G$ is representable by schemes. Indeed, if $F=h_X$ and $G=h_Y$, so $f$ is induced by a morphism of schemes $X\to Y$, then for any $S$-schemes $T$ and morphism $g:T\to G$ corresponding to a morphism of schemes $T\to Y$, we have $F\times_GT\cong h_{T\times_YX}$. Moreover, if $\mathcal{P}$ is a stable property of morphisms of schemes, then $f$ has property $\mathcal{P}$ if and only if the corresponding morphism $X\to Y$ has property $\mathcal{P}$.
\end{example}

\begin{proposition}\label{scheme etale sheaf morphism representable by scheme if diagonal}
Let $S$ be a scheme and $F$ be an \'etale sheaf over $\mathbf{Sch}_{/S}$. Suppose that the diagonal morphism $\Delta:F\to F\times F$ is represented by schemes, then for any scheme $T$, any morphism $f:T\to F$ is representable by schemes.
\end{proposition}
\begin{proof}
If $T$ and $T'$ are schemes, the fiber product of the diagram
\[\begin{tikzcd}
&T\ar[d,"f"]&\\
T'\ar[r,"g"]&F
\end{tikzcd}\]
is isomorphic to the fiber product of the diagram
\[\begin{tikzcd}
&T\times_ST'\ar[d,"f\times g"]&\\
F\ar[r,"\Delta"]&F\times F
\end{tikzcd}\]
and since $\Delta$ is represented by schemes, this fiber product is a scheme.
\end{proof}

Let $S$ be a scheme. An \textbf{algebraic space over $S$} is a functor $X:\mathbf{Sch}_{/S}^{\op}\to \Set$ satisfying the following conditions:
\begin{enumerate}[leftmargin=40pt]
    \item[(AS1)] $X$ is a sheaf for the \'etale topology.
    \item[(AS2)] The diagonal morphism $\Delta:X\to X\times X$ is represented by schemes.
    \item[(AS3)] There exists an $S$-scheme $U$ and a surjective \'etale morphism $U\to X$\footnote{By (AS2) and \cref{scheme etale sheaf morphism representable by scheme if diagonal}, any morphism $U\to X$ is represented by schemes, so we can say that it is surjective or \'etale.}.
\end{enumerate}
The morphisms of algebraic spaces over $S$ are defined to be morphisms of sheaves. By \cref{scheme morphism represented by scheme}, it is clear that any scheme over $S$ is an algebraic space over $S$, and any morphism of the corresponding algebraic spaces is represented by a morphism of schemes.\par

Let $g:S'\to S$ be a morphism of schemes and $\mathbf{AEsp}_{/S}$ (resp. $\mathbf{AEsp}_{/S'}$) be the category of algebraic spaces over $S$ (resp. $S'$). Let $\mathcal{C}$ be the category whose objects are pairs $(X,f)$, where $X$ is an algebraic space over $S$ and $f:X\to S'$ is a morphism of algebraic spaces over $S$. A morphism $(X',f')\to (X,f)$ in $\mathcal{C}$ is a commutative diagram of $\mathbf{AEsp}_{/S}$:
\[\begin{tikzcd}
X'\ar[rd,swap,"f'"]\ar[rr]&&X\ar[ld,"f"]\\
&S'&
\end{tikzcd}\]
For an algebraic space $Y$ over $S'$, let $Y_S:\mathbf{Sch}_{/S}^{\op}\to\Set$ denote the functor sending an $S$-scheme $T$ to the set of pairs $(\eps,y)$, where $\eps:T\to S'$ is an $S$-morphism and $y\in Y(\eps)$. There is a natural morphism of functors $f_Y:Y_S\to S'$ sending $(\eps,y)$ to $\eps$\footnote{In fact, $Y_S$ is the image of $Y$ under the equivalence of categories $\widehat{\mathbf{Sch}_{/S'}}\stackrel{\sim}{\to} \widehat{\Sch_{/S}}_{/S'}$}.

\begin{proposition}\label{algebraic space base change equivalence of cat}
For any algebraic space $Y$ over $S'$, the functor $Y_S$ is an algebraic space over $S$. Moreover, the induced functor
\[\mathbf{AEsp}_{/S'}\to\mathcal{C},\quad Y\mapsto (Y_S,f_Y)\]
is an equivalence of categories.
\end{proposition}
\begin{proof}
To see that $Y_S$ is an \'etale sheaf, let $\{T_i\to T\}$ be an \'etale covering of an $S$-scheme $T$, and $\{(\eps_i,y_i)\}\in\prod_iY_S(T_i)$ be an element in the equalizer of
\[\prod_iY_S(T_i)\rightrightarrows \prod_{i,j}Y_S(T_i\times_TT_j).\]
We must show that this collection is induced by a unique element $(\eps,y)\in Y_S(T)$. For this, note first that the $\eps_i$ dfine an element of the equalizer of
\[\prod_iS'(T_i)\rightrightarrows \prod_{i,j}S'(T_i\times_TT_j)\]
and hence are induced by a unique morphism $\eps:T\to S'$. Viewing $T$ and $T_i$ as $S'$-schemes via this morphism, the elements $y_i$ are then given by an element of the equalizer of
\[\prod_iY(T_i)\rightrightarrows \prod_{i,j}Y(T_i\times_TT_j)\]
and therefore are induced by a unique element $y\in Y(T)$. The resulting element $(\eps,y)\in Y_S(T)$ is then the required one.\par
To see that the diagonal of $Y_S$ is representable, note that the fiber product $P$ of the diagram
\[\begin{tikzcd}
&Y_S\times_SY_S\ar[d,"f_Y\times f_Y"]\\
S'\ar[r,"\Delta_{S'/S}"]&S'\times_SS'
\end{tikzcd}\]
is isomorphic as a presheav over $\mathbf{Sch}_{/S'}$ to $Y\times_{S'}Y$, so for an $S$-scheme $T$ and a morphism $T\to Y_S\times_SY_S$, the fiber product $T\times_{Y_S\times_SY_S,\Delta_{Y_S}}$ is given by first taking the fiber product $T':=T\times_{S'\times_SS',\Delta_{S'/S}}S'$, which is an $S'$-scheme, and then forming the fiber product $T'\times_{Y\times_{S'}Y,\Delta_Y}Y$, which is representable by the assumption on $Y$.\par
Finally, to get an \'etale cover of $Y_S$, let $U\to Y$ be an \'etalte surjection over $S'$ corresponding to an element $u\in Y(U)$. Let $g:U\to S'$ be the structural morphism; then the pair $(g,u)$ defines an element of $Y_S(U)$, or equivalently a morphism $u_S:U\to Y_S$ over $S$. By the preceding argument for the diagonal morphism, for any $S$-scheme $T$ and object $(\eps,y)\in Y_S(T)$, the fiber product $U\times_{Y_S}T$ is given by $U\times_{Y,y}T$, which is \'etale and surjective by hypothesis. This implies that $u_S$ is an \'etale surjection, so we conclude that $Y_S$ is an algebraic space over $S$.\par
We also note that we can recover an algebraic space $Y$ over $S'$ from $(Y_S,f_Y)$ as the functor associating to a $S'$-scheme $T$ the set of morphisms of functors $T\to Y_S$ over $S'$. Conversely, given an object $(X,f)\in\mathcal{C}$, let $Y$ be the functor on $\mathbf{Sch}_{/S'}^{\op}$ whose value on $T\to S'$ is the set of morphisms $T\to Y$ over $S'$. We claim that this is an algebraic space. That $Y$ is a sheaf for the \'etale topology follows from the fact that we have descent for \'etale sheaves. For an $S'$-scheme $T$ and morphism $T\to Y\times_{S'}Y$, the fiber product $T\times_{Y\times_{S'}Y,\Delta}Y$ is given by
\[(T\times_{X\times_SX,\Delta_X}X)\times_{S'\times_SS',\Delta_{S'}}S',\]
and in particular is a scheme. Finally, if $U\to X$ is an \'etale covering with $U$ an $S$-scheme, the composition $U\to X\to S'$ gives $U$ the structure of an $S'$-scheme and the induced morphism $U\to Y$ is also an \'etale surjection. In this way, we obtain a functor $\mathcal{C}\to\mathbf{AEsp}_{/S'}$ which is quasi-inverse to the functor $Y\mapsto (Y_S,f_Y)$.
\end{proof}

In particular, one can develop the theory of algebraic spaces as an absolute theory taking $S=\Spec(\Z)$ and then obtain the notion of algebraic space over a scheme $S$ as a pair $(X,f)$, where $X$ is an algebraic space (over $\Z$) and $f:X\to S$ is a morphism of algebraic spaces.

\paragraph{Algebraic spaces as sheaf quotients}
Fix a base scheme $S$, an \'etale equivalence relation on an $S$-scheme $X$ is a monomorphism of schemes
\[R\hookrightarrow X\times_SX\]
such that the following condition holds:
\begin{enumerate}
    \item[(\rmnum{1})] For each $S$-scheme $T$, the $T$-points $R(T)\sub X(T)\times X(T)$ is an equivalence relation on $X(T)$.
    \item[(\rmnum{2})] The two morphisms $s,t:R\to X$ induced by the projections of $X\times_SX$ are \'eale. 
\end{enumerate}
Note that if $R$ is an \'etale equivalence relation, then the diagonal morphism $\Delta_X:X\to X\times_SX$ factors through $R$.\par

Let $R$ be an \'etale equivalence relation on $X$. We define the quotient sheaf $X/R$ of $X$ to be the sheaf associated with the presheaf
\[\mathbf{Sch}_{/S}^{\op}\to \Set,\quad T\mapsto X(T)/R(T)\]
with respect to the \'etale topology.

\begin{proposition}\label{algebraic space given by quotient by equivalence relation}
Let $R$ be an \'etale equivalence relation on an $S$-scheme $X$.
\begin{enumerate}
    \item[(a)] The quotient sheaf $X/R$ is an algebraic space over $S$.
    \item[(b)] If $Y$ is an algebraic space over $S$ and $X\to Y$ is an \'etale surjective morphism, then $R:=X\times_YX$ is a scheme and the inclusion $R\hookrightarrow X\times_SX$ is an \'etale equivalence relation. Moreover, the natural morphism $X/R\to Y$ is an isomorphism.
\end{enumerate}
\end{proposition} 

The proof of \cref{algebraic space given by quotient by equivalence relation} will be in several steps. First, we note that to prove (a), let $Y$ denote the quotient sheaf. To see that $Y$ is an algebraic space, the key point is that the diagonal
\[\Delta_Y:Y\to Y\times_SY\]
is representable. In deed, once this is true, by \cref{scheme etale sheaf morphism representable by scheme if diagonal} we see that any morphism $U\to Y$ is represented by schemes, and in particular for the projection $X\to Y$. We claim that $X\to Y$ is an \'etale surjection; in fact, if $T\to Y$ is a morphism with $T$ a scheme over $S$, then to verify that $X\times_YT\to T$ is \'etale surjective, we can replace $T$ by an \'etale cover, and consider the base change to this cover. Since $X\to Y$ is in any case an epimorphism of \'etale sheaves, by taking a common refinement, we see that it suffices to consider morphisms $T\to Y$ which factor through $X$. In this case, we have a commutative diagram with Cartesian squares
\[\begin{tikzcd}
T\times_YX\ar[r]\ar[d]&R\ar[d,"s"]\ar[r,"t"]&X\ar[d]\\
T\ar[r]&X\ar[r]&Y
\end{tikzcd}\]
and since $s$ is \'etale surjective this implies that $T\times_XY\to T$ is \'etale surjective.\par
Let $j:U\to X$ be an open immersion, and $R_U$ be the fiber product $R\times_{X\times_SX}(U\times_SU)$. Then $R_U$ is an \'etale equivalence relation of $U$, and there is an induced morphism $\bar{j}:U/R_U\to Y$.

\begin{lemma}\label{scheme etale sheaf quotient by equivalence relation open subscheme prop}
The morphism $\bar{j}$ is represented by open immersions.
\end{lemma}
\begin{proof}
It is clear from the definitions that $\bar{j}$ is a monomorphism. For any $S$-scheme $T$, a morphism $f:T\to Y$ is contained in the $T$-point of $U/R_U$ if and only if \'etale locally on $T$ the morphism $f$ factors through $U$. This condition on $f$ is representable by an open subset of $T$: in fact, this can be verified \'etale locally on $T$, so we may assume that there exists a morphism $\tilde{f}:T\to X$ lifting $f$. In this case the required open subset is $\tilde{f}^{-1}(s(t^{-1}(U)))$.
\end{proof}

To see that the diagonal morphism $\Delta_Y:Y\to Y\times_SY$ is representable, let $f:T\to Y\times_SY$ be a morphism and $F:=Y\times_{\Delta_Y,Y\times_SY}T$ be the fiber product. To prove that $F$ is a scheme, we may work Zariski locally on $S$ and $T$, and assume that $S$ and $T$ are an affine scheme.\par
In this case, since $X\to Y$ is an epimorphism of sheaves, there exists an \'etale cover $T'\to T$ such that the composition morphism $T'\to T\to Y\times_SY$ factors through $X\times_SX$, and we may also assume that $T'$ is an affine scheme since $T$ is quasi-compact. Now observe that since the square 
\[\begin{tikzcd}
R\ar[r]\ar[d]&X\times_SX\ar[d]\\
Y\ar[r,"\Delta"]&Y\times_SY
\end{tikzcd}\]
is Cartesian, if $F'=F\times_TT'$, then we have
\[F'\cong Y\times_{\Delta_Y,Y\times_SY}T'\cong R\times_{X\times_SX}T'.\]
In particular, $F'$ is a scheme and $F'\to T'$ is a monomorphism, which implies that $F'$ is a separated $S$-scheme (since $T'$ is separated over $S$).\par
Now since $T'$ is \'etale surjective over $T$ and the square
\[\begin{tikzcd}
F'\ar[r]\ar[d]&T'\ar[d]\\
F\ar[r]&T
\end{tikzcd}\]
is Cartesian, the morphism $F'\to F$ is representable and \'etale surjective, so $F$ is a quotient of $F'$ by the equivalence relation
\[R'=F'\times_FF'\sub F'\times_SF'.\]
Since $F\to T$ is a monomorphism, for either of the two projections $p_i:T'\times_TT'\to T'$, the square
\[\begin{tikzcd}
R'=F'\times_FF'\ar[d,"p_i"]\ar[r]&T'\times_TT'\ar[d,"p_i"]\\
F'\ar[r]&T'
\end{tikzcd}\]
is Cartesian. This implies that $R'$ is a scheme and that the projections $p_i:F'\times_FF'\to F'$ are quasi-compact.
\begin{lemma}
Let $U'\sub F'$ be a quasi-compact open subset, $F_{U'}$ be the quotient sheaf $U'/R'_{U'}$, $\bar{j}:F_{U'}\to F$ be the natural representable open immersion, and $F'_{U'}\sub F'$ be the fiber product of the diagram
\[\begin{tikzcd}
&F'\ar[d]\\
F_{U'}\ar[r,"\bar{j}"]&F
\end{tikzcd}\]
Then $F'_{U'}$ is a quasi-compact open subset of $F'$ containing $U'$.
\end{lemma}
\begin{proof}
In fact, we have $F'_{U'}=p_1p_2^{-1}(U')$, where we write $p_i$ for the projections of $F'\times_FF'$. Since the morphisms $p_i$ are quasi-compact and $U'$ is also quasi-compact, we conclude the lemma.
\end{proof}
Since we can also write $F'_{U'}=F_{U'}\times_TT'$, we are then reduced to proving that $F_{U'}$ is representable. For this, note that since $F'_{U'}$ is quasi-compact, the morphism $F'_{U'}\to T'$ is quasi-affine by Zariski's main theorem (\cite{EGA4-4}, \Rmnum{4}, 18.12.13). That $F_{U'}$ is a scheme then follows from the fact that quasi-affine morphisms are effective for the fppf topology. This completes the proof of statement (a) of \cref{algebraic space given by quotient by equivalence relation}.\par
For (b), note that since the square
\[\begin{tikzcd}
R\ar[d]\ar[r]&X\times_SX\ar[d]\\
Y\ar[r,"\Delta"]&Y\times_SY
\end{tikzcd}\]
is Cartesian, $R$ is a scheme, and the projections $p_i:R\to X$ are \'etale since $X\to Y$ is \'etale. The remaining statements in (b) are immediate, and this completes the proof of \cref{algebraic space given by quotient by equivalence relation}.

\begin{example}\label{algebraic space given by quotient scheme by free action}
Let $X$ be a scheme and $G$ be a discrete group acting on $X$. The action of $G$ is called \textbf{free} if the map
\begin{equation}\label{algebraic space given by quotient scheme by free action-1}
G\times X\to X\times X\times X,\quad (g,x)\mapsto (x,\rho(g,x))
\end{equation}
is a monomorphism, where $\rho:G\times X\to X$ is the action map. In this case, let $X/G$ be the sheaf (with respect to the \'etale topology) assocaited to the presheaf $T\mapsto X(T)/G$. Then $X/G$ is a quotient of $X$ by the \'etale equivalence relation (\ref{algebraic space given by quotient scheme by free action-1}), and therefore $X/G$ is an algebraic space.
\end{example}

\begin{example}
Let $k$ be a field and consider the scheme $X:=\Spec(k[s,t]/(st))$ obtained by glueing two copies of the affine line along the origin. Let $U\sub X$ be the open subset obtained by deleting the origin, and set $R:=X\coprod U$. Consider two morphisms $\pi_1,\pi_2:R\to X$ defined as follows. The restriction of both $\pi_1$ and $\pi_2$ to $X$ is the identity, but on $U$ we define $\pi_1$ to be the natural inclusion, and $\pi_2$ to be the morphism which switches the two components. Then the resulting morphism
\[\pi_1\times\pi_2:R\to X\times X\]
is an \'etale equivalence relation. Let $F=X/R$ be the resulting algebraic space, we claim that $F$ is not a scheme. 
\end{example}

\begin{example}
Let $k$ be a field of characteristic $0$ and let $\Z$ act on $\A^1_k$ by the usual translation action. This is a free action and the quotient $X:=\A^1_k/\Z$ is an algebraic space which is not a scheme. To see this suppose to the contrary that $X$ is a scheme. Then $X$ has a surjective \'etale covering by $\A^1_k$ and therefore is smooth and connected, and for any affine open $U\sub X$ the sections $\mathscr{O}_X(U)$ are included into the $\Z$-invariants of the rational function field $k(x)$, where $n\in\Z$ acts by $x\mapsto x+n$. The $\Z$-invariants in $k(x)$ are just the constant functions since a nonconstant $\Z$-invariant function $f\in k(x)$ would have infinitely many zeros and poles. It follows that the coordinate ring of any nonempty open subset of $X$ is $k$, which implies that $X=\Spec(k)$. This contradicts the fact that the map $\A^1_k\to X$ is \'etale, and therefore $X$ does not contain any nonempty open subspace which is a scheme.\par
Similarly, let $\Z^2$ act on $\A^1_\C$ by the imbedding $\Z^2\hookrightarrow\C$ sending $(a,b)$ to $a+\i b$ and the standard translation action of $\C$ on $\A^1_{\C}$. Then the quotient $\A^1_{\C}/\Z^2$ is an algebraic space which is not a scheme by the same argument. On the other hand, the quotient of $\C$, with the analytic topology, by this action of $\Z^2$ is an elliptic curve.
\end{example}


\section{Grothendieck Topoi}
We have seen in \autoref{site category sheaf exactness property subsection} that various exactness properties for the category of sheaves over $\mathcal{C}$, where $\mathcal{C}$ is a small site, which can be expressed by saying that in many respects such a category inherit familiar properties from the category $\mathbf{Set}$ of (small) sets. In this section, we consider categories that can be realized as the category of sheaves of sets over a site. As we shall see, topoi behave much like the category of sets and possess a notion of localization.
\subsection{Characterization of topoi}
A category $\mathcal{X}$ is called a \textbf{$\mathscr{U}$-topos}, or simply a \textbf{topos}, if there exists a small site $\mathcal{C}$ such that $\mathcal{X}$ is equivalent the the category $\Sh(\mathcal{C})$ of sheaves of sets over $\mathcal{C}$. Let $\mathcal{X}$ be a topos. We will always endow $\mathcal{X}$ with the canonical topology, so that it is a site (and in fact a $\mathscr{U}$-site as we shall see). Unless futher explaination, we will not consider any other topology on $\mathcal{X}$.\par
We have seen in (\cite{SGA4-1} \Rmnum{2}, 4.8), (\cite{SGA4-1} \Rmnum{2}, 4.10) and (\cite{SGA4-1} \Rmnum{2}, 4.11) that a $\mathscr{U}$-topos $\mathcal{X}$ is a $\mathscr{U}$-category satisfying the following properties (these are called \textbf{Giraud's conditions}):
\begin{enumerate}
\item[(a)] Finite projective limits exist in $\mathcal{X}$.
\item[(b)] Small direct sums exist in $\mathcal{X}$ and are disjoint.
\item[(c)] All equivalence relations in $\mathcal{X}$ are effective.
\item[(d)] $\mathcal{X}$ admits a small set of generators.
\end{enumerate}
In fact, we will see that these intrinsic properties characterize $\mathscr{U}$-topoi:
\begin{theorem}[\textbf{J. Giraud}]\label{topos Giraud characterization}
Let $\mathcal{X}$ be a $\mathscr{U}$-category. The following properties are equivalent:
\begin{enumerate}
\item[(\rmnum{1})] $\mathcal{X}$ is a $\mathscr{U}$-topos.
\item[(\rmnum{1}')] There exists a small site $\mathcal{C}$ endowed with a subcanonical topology such that projective limits exist in $\mathcal{C}$ and $\mathcal{X}$ is equivalent to the category of sheaves over $\mathcal{C}$.
\item[(\rmnum{2})] $\mathcal{X}$ satisfies Giraud's conditions.
\item[(\rmnum{3})] The sheaves over $\mathcal{X}$ (endowed with the canonical topology) are representable, and $\mathcal{X}$ admits a small set of generators.
\item[(\rmnum{4})] There exists a small category $\mathcal{C}$ and a fully faithful functor $i:\mathcal{X}\to \PSh(\mathcal{C})$ which admits an exact left adjoint.
\end{enumerate}
\end{theorem}
\begin{proof}
The equivalence of (\rmnum{1}) and (\rmnum{4}) follows from \cref{site topology correspond to subcategory}, and we have remarked that (\rmnum{1})$\Rightarrow$(\rmnum{2}). As (\rmnum{1}') clearly implies (\rmnum{1}), it remains to prove that (\rmnum{2})$\Rightarrow$(\rmnum{3}) and (\rmnum{3})$\Rightarrow$(\rmnum{1}').\par
We first deal with the implication (\rmnum{3})$\Rightarrow$(\rmnum{1}'), so let $\X=(X_i)_{i\in I}$ be a small family of generators of $\mathcal{X}$ and assume that any sheaf over $\mathcal{X}$ is representable. As $\mathcal{X}$ is a $\mathscr{U}$-category, the set of isomorphism classes of finite diagrams in $\mathcal{X}$ with objects belonging to $\X$ is $\mathscr{U}$-small. Therefore, the smallest set $\X'$ of objects of $\mathcal{X}$ containing the finite projective limits of objects of $\X^{(0)}$ is a countable union of small sets, hence is small. By redefining $\X^{(n+1)}=(\X^{(n)})'$ and $\X=\bigcup_n\X^{(n)}$, we see that, by adding generators if necessary, we can suppose that $\X$ is stable under finite projective limits.
\end{proof}
\begin{corollary}\label{topos subcategory sheaf cat equivalent iff generating}
Let $\mathcal{X}$ be a $\mathscr{U}$-topos and $\mathcal{C}$ be a full subcategory of $\mathcal{X}$ endowed with the induced topology (\cite{SGA4-1} \Rmnum{3}, 3.1). Consider the functor
\[\mathcal{C}\to \Sh(\mathcal{C})\]
which associates an object $X$ of $\mathcal{X}$ the restriction to $\mathcal{C}$ of the sheaf represented by $X$. This functor is an equivalence of categories if and only if $\Ob(\mathcal{C})$ is a topological generating family of $\mathcal{X}$.
\end{corollary}
\begin{proof}
It suffices to note that the considered functor factors into $\mathcal{X}\to \Sh(\mathcal{X})\to \Sh(\mathcal{C})$, where the first one is an equivalence by \cref{topos Giraud characterization}(\rmnum{3}). The question is then reduced to determining whether $\Sh(\mathcal{X})\to \Sh(\mathcal{C})$ is an equivalence, which can be deduced from the comparision lemma (\cite{SGA4-1} \Rmnum{3}, 4.1).
\end{proof}
\section{Cohomology of topoi}

\subsection{Complements on abelian categories}
In this paragraph, we recall some definitions and results concerning abelian categories which will be used later in the discussion of cohomology of topos. The material we give here can all be found on the famuous papar "Tohoku".

\begin{proposition}\label{abelian cat with generator AB5 iff}
Let $\mathcal{A}$ be an abelian category with a generator. The following conditions are equivalent:
\begin{enumerate}
    \item[(\rmnum{1})] The category $\mathcal{A}$ verifies the axiom (AB5): $\mathcal{A}$ possesses small direct sums and if $(X_i)_{i\in I}$ is a filtered small family of sub-objects of an object $X$ of $\mathcal{A}$ and $Y$ is a sub-object of $X$, then
    \[(\sup_iX_i)\cap Y=\sup_i(X_i\cap Y).\]
    \item[(\rmnum{2})] Small filtered limits exist in $\mathcal{A}$ and commute with finite projective limits.
\end{enumerate}
\end{proposition}

An abelian category $\mathcal{A}$ possessing a generator and satisfying
the axiom (AB5) is called a \textbf{Grothendieck category}. It can be proved that any Grothendieck category has enough injectives i.e. any object embeds itself in a injective object. Moreover, according to the result already cited, small products are representable in $\mathcal{A}$.

\begin{proposition}\label{abelian cat adjoint functor exact iff injective to injective}
Let $\mathcal{A}$ and $\mathcal{B}$ be abelian categories and $F\dashv G:\mathcal{A}\to \mathcal{B}$ be an adjoint pair of additive functors. Consider the following properties:
\begin{enumerate}
    \item[(\rmnum{1})] The functor $F$ is exact.
    \item[(\rmnum{2})] The functor $G$ transforms injective object in $\mathcal{B}$ to injective objects in $\mathcal{A}$.
\end{enumerate}
Then we always have (\rmnum{1})$\Rightarrow$(\rmnum{2}). If any nonzero object of $\mathcal{B}$ is the source of a nonzero morphism into an injective object (this is true for example if $\mathcal{B}$ has enough injectives), then (\rmnum{2})$\Rightarrow$(\rmnum{1}).
\end{proposition}

\begin{proposition}\label{abelian cat adjoint functor engouh injective if}
Let $\mathcal{A}$ and $\mathcal{B}$ be abelian categories and $F\dashv G:\mathcal{A}\to \mathcal{B}$ be an adjoint pair of additive functors. Suppose that:
\begin{enumerate}
    \item[(a)] the category $\mathcal{B}$ has enough injectives;
    \item[(b)] the equivalent conditions of \cref{abelian cat adjoint functor exact iff injective to injective} are satisfied;
    \item[(c)] the functor $F$ is faithful. 
\end{enumerate}
Then the category $\mathcal{A}$ has enough injectives.
\end{proposition}

\begin{remark}
The category of abelian groups has enough injectives, so by applying \cref{abelian cat adjoint functor engouh injective if}, we deduce that any category of modules over a ring has enough injectives. Then applying the result of [5] (used in the proof of \cref{abelian cat with generator AB5 iff}) and \cref{abelian cat adjoint functor exact iff injective to injective}, we deduce that any Grothendieck category has enough injectives, which provides a new proof of this fact.
\end{remark}

\begin{proposition}\label{abelian category G spectral sequence iff injective to acyclic}
Let $\mathcal{A}$, $\mathcal{B}$, $\mathcal{C}$ be abelian categories and $F:\mathcal{A}\to \mathcal{B}$, $G:\mathcal{B}\to \mathcal{C}$ be two left exact additive functors. Suppose that $\mathcal{A}$ and $\mathcal{B}$ have enough injectives. Then the following conditions are equivalent:
\begin{enumerate}
    \item[(\rmnum{1})] There exists a spectral functor
    \[E_2^{p,q}=R^pG\circ R^qF\Rightarrow R^{p+q}(G\circ F).\]
    \item[(\rmnum{2})] The functor $F$ transforms injective objects to $G$-acyclic objects. 
\end{enumerate}
\end{proposition}
\begin{proof}
The implication (\rmnum{1})$\Rightarrow$(\rmnum{2}) is trivial because it suffices to apply this spectral sequence to an injective object of $\mathcal{A}$. The converse implication is the famous Grothendieck spectral sequence.
\end{proof}

\begin{proposition}\label{abelian category acyclic collection if}
Let $F:\mathcal{A}\to \mathcal{B}$ be a left exact additive functor of abelian categories. Let $\mathfrak{M}$ be a collection of object of $\mathcal{A}$ possessing the following properties:
\begin{enumerate}
    \item[(a)] Any object of $\mathcal{A}$ can be embedded into an element of $\mathfrak{M}$.
    \item[(b)] If $X\oplus Y$ belongs to $\mathfrak{M}$, then $X$ and $Y$ belong to $\mathfrak{M}$.
    \item[(c)] If we have an exact sequence $0\to X'\to X\to X''\to 0$ is where $X'$ and $X$ belong to $\mathfrak{M}$, then $X''$ belongs to $\mathfrak{M}$ and the sequence
    \[\begin{tikzcd}
        0\ar[r]&F(X')\ar[r]&F(X)\ar[r]&F(X'')\ar[r]&0
    \end{tikzcd}\]
    is exact. Moreover, the zero object belongs to $\mathfrak{M}$.
\end{enumerate}
Then any injective object belongs to $\mathfrak{M}$, and the objects of $\mathfrak{M}$ are $F$-acyclic, i.e. for any $p>0$ and any $X\in\mathfrak{M}$ we have $R^pF(X)=0$. In particular, the resolutions by objects of $\mathfrak{M}$ computes the derived functors of $F$.
\end{proposition}

\begin{proposition}\label{abelian category generaring family in universe prop}
Let $\mathscr{U}\sub\mathscr{V}$ be universes, $\mathcal{A}$ (resp. $\mathcal{B}$) be an abelian $\mathscr{U}$-category (resp. $\mathscr{V}$-category) satisfying (AB5) and possesses a $\mathscr{U}$-small (resp. $\mathscr{V}$-small) topological generating family. Let $\eps:\mathcal{A}\to \mathcal{B}$ be a fully faithful and exact functor. The following conditions are equivalent:
\begin{enumerate}
    \item[(\rmnum{1})] There exists a generaring family $(X_i)_{i\in I}$ of $\mathcal{A}$ such that $(\eps(X_i))_{i\in I}$ is a generating family of $\mathcal{B}$.
    \item[(\rmnum{1}')] Any object of $\mathcal{B}$ is isomorphic to a quotient of an object of the form $\bigoplus_{\alpha\in A}\eps(Y_\alpha)$, where $A$ is $\mathscr{V}$-small.
\end{enumerate}
Under these equivalent conditions, we have:
\begin{enumerate}
    \item[(\rmnum{2})] the functor $\eps$ transforms $\mathscr{U}$-small products to products (hence commutes with $\mathscr{U}$-small projective limits),
\end{enumerate}
and the following conditions are equivalent:
\begin{enumerate}
    \item[(a)] For any object $Y$ of $\mathcal{A}$, any sub-object of $\eps(Y)$ is isomorphic to the image under $\eps$ of a sub-object of $Y$.
    \item[(a')] There exists a generating family $(X_i)_{i\in I}$ of $\mathcal{A}$ such that the family $(\eps(X_i))_{i\in I}$ is generating in $\mathcal{B}$ and that for any $i\in I$, any sub-object of $\eps(X_i)$ is isomorphic to the image under $\eps$ of a sub-object of $X_i$.
    \item[(b)] Any object of $\mathcal{B}$ is isomorphic to a sub-object of an object of the form $\prod_{\alpha\in A}\eps(Y_\alpha)$, where $A$ is $\mathscr{V}$-small.
    \item[(c)] $\eps$ commutes with $\mathscr{U}$-small direct sums (hence commutes with $\mathscr{U}$-small inductive limits).
\end{enumerate}
Finally, if these conditions are satisfied, the functor $\eps$ transforms injective objects to injective objects.
\end{proposition}

\begin{remark}
If $\mathscr{U}=\mathscr{V}$, then the conditions (\rmnum{1}) and (a') imply that $\eps$ is an equivalence of categories, since we then have conditions (b), (\rmnum{2}) and (b).
\end{remark}

\subsection{Flat modules on ringed topoi}
Let $(\mathcal{X},A)$ be a ringed topos. A right (resp. left) $A$-module $M$ is called \textbf{flat} if the functor $M\otimes_A(-)$ (resp. $(-)\otimes_AM$) from the category of left (resp. right) $A$-modules to the category of abelian sheaves on $\mathcal{X}$ is exact.

\begin{proposition}\label{ringed topos flat module prop}
Let $M$ be a $(B,A)$-bimodule.
\begin{enumerate}
    \item[(a)] The following properties are equivalent:
    \begin{enumerate}
        \item[(\rmnum{1})] The right $A$-module $M$ is flat.
        \item[(\rmnum{2})] For any injective $B$-module $I$, the right $A$-module $\sHom_B(M,I)$ is injective.
    \end{enumerate}
    \item[(b)] A filtered limit of flat modules is flat.
    \item[(c)] If $M^\bullet$ is an exact complex of flat modules, then for any module $F$, the complex $M^\bullet\otimes_AF$ is exact.
\end{enumerate}
\end{proposition}
\begin{proof}
By the adjunction (\cite{SGA4-1} \Rmnum{4}, 12.12), we have a canonical isomorphism
\begin{equation}\label{ringed topos flat module prop-1}
\Hom_B(M\otimes_A(-),-) \stackrel{\sim}{\to } \Hom_A(-,\sHom_B(M,-)).
\end{equation}
To establish the equivalence of (\rmnum{1}) and (\rmnum{2}), it then suffices to apply \cref{abelian cat adjoint functor exact iff injective to injective}. The isomorphism (\ref{ringed topos flat module prop-1}) also shows that tensor products commutes with inductive limits, so the fact the filtered inductive limits are exact (\cref{abelian cat with generator AB5 iff}) implies the second assertion. To see that the complex $M^\bullet\otimes_AF$ is exact if $M^\bullet$ is an exact flat complex, it suffices to show that for any injective abelian sheaf $I$, the complex $\Hom^\bullet_\Z(M^\bullet\otimes_AF,I)$ is exact. This complex is isomorphic, in view of the adjunction formula, to the complex $\Hom^\bullet_A(F,\sHom(M^\bullet,I))$, and by the equivalence (\rmnum{1})$\Rightarrow$(\rmnum{2}), the complex $\sHom_\Z(M^\bullet,I)$ is an exact complex whose objects are injective, whence our conclusion.
\end{proof}

\begin{proposition}\label{ringed topos flat module shrink is flat}
Let $(\mathcal{X},A)$ be a ringed topos, $X$ be an object of $\mathcal{X}$, $j:\mathcal{X}_{/X}\to \mathcal{X}$ be the localiztion functor, and $M$ be a flat $A|_X$-module. Then $j_!(M)$ is a flat $A$-module. In particular, $A_X$ is a flat $A$-module.
\end{proposition}
\begin{proof}
Suppose that $M$ is a right $A|_X$-module. For any left $A$-module $N$, we have a canonical isomorphism (\cite{SGA4-1} \Rmnum{4}, 12)
\[N\otimes_Aj_!(M) \stackrel{\sim}{\to } j_!(N\otimes_{A|_X}M).\]
The functors $j_!$ and $j^*$ are exact by (\cite{SGA4-1} \Rmnum{4}, 11.3.1) and (\cite{SGA4-1} \Rmnum{4}, 11.12.2), and by hypothesis the functor $(-)\otimes_{A|_X}M$ is exact. We then conclude that the functor $(-)\otimes_Aj_!(M)$ is exact, so $j_!(M)$ is exact.
\end{proof}

\begin{proposition}[\textbf{Projection formula for closed immersions}]\label{ringed topos closed immersion projection formula}
Let $(\mathcal{X},A)$ be a ringed topos, $i:\mathcal{Z}\to \mathcal{X}$ be a closed subtopos of $\mathcal{X}$, and put $A_{/\mathcal{Z}}=i^*(A)$. Then for any right $A_{/\mathcal{Z}}$-module $M$ and any left $A$-module $N$, we have a canonical isomorphism
\begin{equation}\label{ringed topos closed immersion projection formula-1}
i_*(M\otimes_{A_{/\mathcal{Z}}}i^*(N)) \stackrel{\sim}{\to } i_*(M)\otimes_AN.
\end{equation}
\end{proposition}
\begin{proof}
Let $\mathcal{U}$ be the open complement of $\mathcal{Z}$ and $j:\mathcal{U}\to \mathcal{X}$ be the canonical open immersion. We have $j_*(i_*(M)\otimes_AN) \stackrel{\sim}{\to } 0\otimes_{A_{/U}}j^*(N)$ (\cite{SGA4-1} \Rmnum{4}, 12), so $i_*(M)\otimes_AN$ is supported in $\mathcal{Z}$, and the corresponding unit morphism
\[i_*(M)\otimes_AN\to i_*i^*(i_*(M)\otimes_AN)\]
is an isomorphism (\cite{SGA4-1} \Rmnum{4}, 14). We have $i^*(i_*(M)\otimes_AN)\cong i^*i_*(M)\otimes_{A_{/\mathcal{Z}}}i^*(N)$ by (\cite{SGA4-1} \Rmnum{4}, 12), and $i^*i_*(M)\cong M$ since $i$ is a closed immersion; whence the canonical isomorphism.
\end{proof}

\begin{corollary}\label{ringed topos closed immersion flat module direct image flat}
Let $(\mathcal{X},A)$ be a ringed topos, $i:\mathcal{Z}\to \mathcal{X}$ be a closed subtopos of $\mathcal{X}$, and put $A_{/\mathcal{Z}}=i^*(A)$. For any flat $A_{/\mathcal{Z}}$-module $M$, the $A$-module $i_*(M)$ is flat.
\end{corollary}
\begin{proof}
It follows from \cref{ringed topos closed immersion projection formula} and (\cite{SGA4-1} \Rmnum{4} 14) that the functor $N\mapsto i_*(M)\otimes_AN$ is exact, so $i_*(M)$ is flat.
\end{proof}

Let $(\mathcal{X},A)$ be a ringed topos, $x:\mathcal{P}\to \mathcal{X}$ be a point of $\mathcal{X}$ (SGA \Rmnum{4}, 6.1), and $\mathfrak{U}(x)$ be the category of neighborhoods of $x$ (SGA \Rmnum{4}, 6.8). For any object $V$ of $\mathfrak{U}(x)$, we can associates an object of $\mathcal{X}$ (still denote by $V$), and a point $x_V:\mathcal{P}\to \mathcal{X}/V$ of $\mathcal{X}/V$. Moreover, any morphism $u:V\to W$ in $\mathfrak{U}(x)$ corresponds to a commutative diagram of topos (\cite{SGA4-1} \Rmnum{4}, 6.7)
\[\begin{tikzcd}[row sep=12mm,column sep=12mm]
\mathcal{P}\ar[rd,swap,"x_W"]\ar[r,"x_V"]&\mathcal{X}/V\ar[d,"j_u"]\\
&\mathcal{X}/W
\end{tikzcd}\]

As an application of the materials given in this paragraph, we construct the \v{C}ech complex for a family of morphisms in $\mathcal{X}$ and prove its exactness under certain circumstances, that is, for epimorphic families. Now let $\mathcal{X}$ be a topos and $\mathfrak{U}=\{U_i\to X\}_{i\in I}$ be a small family of morphisms. For any ordered set $[n]=\{0,\dots,n\}$, we define
\[S_n(\mathfrak{U})=\coprod_{f:[n]\to I}U_f\]
where the direct sum is taken over all maps $f:[n]\to I$, and for such a map $f$ we define $U_f$ to be
\[U_f:=U_{f(1)}\times_XU_{f(2)}\times_X\cdots\times_XU_{f(n)}.\]
For any nondecreasing map $g:[m]\to [n]$, we have a morphism
\begin{equation}\label{ringed topos Cech complex for covering-1}
s(g):S_n(\mathfrak{U})\to S_m(\mathfrak{U})
\end{equation}
defined in the following way: for any map $f:[n]\to I$, the restriction of $s(g)$ to the component $U_f$ is the composition morphism
\[\begin{tikzcd}
U_f\ar[r,"s_f(g)"]&U_{fg}\ar[r,hook]&S_m(\mathfrak{U})
\end{tikzcd}\]
where $s_f(g):U_f\to U_{fg}$ is the unique morphism such that for any $i\in[m]$, we have 
\begin{equation}\label{ringed topos Cech complex for covering-2}
\pr_{f(g(i))}s_f(g)=\pr_{f(g(i))},
\end{equation}
where $\pr_j$ is the $j$-th projection. We therefore obtain a contravariant functor $[n]\mapsto S_n$ from the category of finite sets to $\mathcal{X}$, or in other words, a semi-simplicial object $S_\bullet(\mathfrak{U})$ of $\mathcal{X}$. Note that this complex is canonically augmented by $X$. Any functor of $\mathcal{X}$ into a category $\mathcal{C}$ transforms $S_\bullet(\mathfrak{U})$ into a simplicial object of $\mathcal{C}$. In particular, if $A$ is a ring object of $\mathcal{X}$, the "free $A$-module functor" transforms $S_\bullet(\mathfrak{U})$ into a simplicial complex of $A$-bimodules augmented by $A_X$, which is denoted by $A_\bullet(\mathfrak{U})$. We have
\begin{equation}\label{ringed topos Cech complex for covering-3}
A_n(\mathfrak{U})=\bigoplus_{f:[n]\to I}A_{U_{fg}}.
\end{equation}
Let $\{d_i:S_n(\mathcal{C})\to S_{n-1}(\mathcal{C})\}_{0\leq i\leq n}$ be the face maps of $S_\bullet(\mathcal{C})$, then the complex $A_\bullet(\mathfrak{U})$ has the following form
\begin{equation}\label{ringed topos Cech complex for covering-4}
\begin{tikzcd}[column sep=12mm]
\cdots\ar[r,shift left=8pt,"s_0"description]\ar[r,"s_1"description]\ar[r,shift right=8pt,"s_2"description]
&\bigoplus_{i,j}A_{U_i\times_XU_j}\ar[r,shift left=4pt,"s_0"description]\ar[r,shift right=4pt,"s_1"description]
&\bigoplus_iA_{U_i}\ar[r]
&A_X
\end{tikzcd}
\end{equation}
For such a complex, we can define a differential complex, augmented by $A_X$, by simply setting $d=\sum_i(-1)^is_i$:
\begin{equation}\label{ringed topos Cech complex for covering-5}
\begin{tikzcd}
\cdots\ar[r,"d"]&\bigoplus_{i,j}A_{U_i\times_XU_j}\ar[r,"d"]&A_X
\end{tikzcd}
\end{equation}

\begin{proposition}\label{ringed topos Cech complex resolution for epimorphic}
If the famly $\mathfrak{U}$ is epimorphic, the differential complex (\ref{ringed topos Cech complex for covering-5}) is exact and hence a resolution of $A_X$.
\end{proposition}
\begin{proof}
We denote by $\Z$ the constant sheaf with values $\Z$. By the definition of the "free $A$-module functor", we have, for any object $Y$ of $\mathcal{X}$,
\[A_Y\cong\Z_Y\otimes_\Z A,\]
whence an isomorphism
\[A_\bullet(\mathfrak{U})\cong\Z_\bullet(\mathfrak{U})\otimes_\Z A.\]
As the components of $\Z_\bullet(\mathfrak{U})$ are all flat $\Z$-modules by \cref{ringed topos flat module shrink is flat}, it suffices to prove the proposition for $A=\Z$.\par
Suppose first that $\mathcal{X}$ is the topos of sets. Then the augmented complex $S_\bullet(\mathfrak{U})$ is the direct sum of augmented complexed of the form
\[\begin{tikzcd}
\cdots\ar[r,shift left=6pt]\ar[r,shift left=2pt]\ar[r,shift right=2pt]\ar[r,shift right=6pt]
&S\times S\times S\ar[r,shift left=4pt]\ar[r,shift right=4pt]\ar[r]
&S\times S\ar[r,shift left=2pt]\ar[r,shift right=2pt]
&S\ar[r]&\ast
\end{tikzcd}\]
where $\ast$ is the set with a single element. Since each of these complexes is homotopically trivial, we then conclude that $S_\bullet(\mathfrak{U})$ is a homotopically trivial augmented complex, whence the proposition in this case.\par
Now let $p:\mathbf{Set}\to \mathcal{X}$ be a point of $\mathcal{X}$. As the formation of the complex $\Z_\bullet(\mathfrak{U})$ commutes with inverse image functors, $p^*(\Z_\bullet(\mathfrak{U}))\cong\Z_\bullet(p^*(\mathfrak{U}))$ is a resolution of $\Z_{p^*(X)}\cong p^*(\Z_X)$, which proves the proposition if $\mathcal{X}$ possesses enough fiber functors (\cite{SGA4-1} \Rmnum{4} 4.6). This is the case in particular if $\mathcal{X}$ is the topos of presheaves over a small site $\mathcal{C}$, because for any object $X$ of $\mathcal{C}$, $\Gamma(X,-)$ is a fiber functor. In the general case, $\mathcal{X}$ is equivalent to the topos of sheaves over a small site $\mathcal{C}$ (\cref{topos Giraud characterization}), and the epimorphic family $\mathfrak{U}$ is the image, under the sheafification functor, of an epimorphic family $\mathfrak{U}'=\{U_i'\to X'\}$. Therefore we have $\Z_\bullet(\mathfrak{U})=(\Z_\bullet(\mathfrak{U}'))^\#$, which is a resolusion of $(\Z_{X'})^\#\cong\Z_X$.
\end{proof}

\subsection{\v{C}ech cohomology}
\paragraph{The general notion of cohomology}\label{ringed topos cohomology def paragarph}
Let $(\mathcal{X},A)$ be a ringed topos, $M$, $N$ be two (left) $A$-modules. We denote by $\Ext_A^p(\mathcal{X};M,N)$ (or simply $\Ext_A^p(M,N)$ if there is no risk of confusion) the value of the $p$-th right derived functor of the functor $\Hom_A(M,-)$ at $N$. In other words,
\begin{equation}\label{ringed topos cohomology def-1}
\Ext_A^p(\mathcal{X};M,N):=R^p\Hom_A(M,-)(N).
\end{equation}
The functors $\Ext^p_A(\mathcal{X};M,N)$ then form a $\delta$-functor on the variable $N$, and is also a contravariant functor on the variable $M$.\par
Let $X$ be an object of $\mathcal{X}$. If $M=A_X$ is the free $A$-module generated by $X$ (\cite{SGA4-1} \Rmnum{4}, 12), we then write
\begin{equation}\label{ringed topos cohomology def-2}
\Ext_A^p(\mathcal{X};A_X,N)=H^p(X,N).
\end{equation}
Note that in this notation, the ring $A$ no longer appears. This leads to no confusion because we will show that the formation of $H^p(X,-)$ commutes to the restriction of scalars, and the functor $H^p(X,-)$ is the $p$-th right derived functor of the functor $\Hom_A(A_X,-)=\Hom_\mathcal{X}(X,-)$, which is again denoted by $\Gamma(X,-)$. In particular, if $X$ is the final object of $\mathcal{X}$, then $A_X=A$ and we write
\[\Ext_A^p(\mathcal{X};A,N)=H^p(\mathcal{X},N).\]
Let $X$ be an object of $\mathcal{X}$ and $j:\mathcal{X}_{/X}\to \mathcal{X}$ be the localization morphism (\cite{SGA4-1} \Rmnum{4}, 8). The functor $j^*$ is exact on $A$-modules and admits a left adjoint functor $j_!$. Therefore $j^*$ transforms injective modules to injective modules (\cref{abelian cat adjoint functor exact iff injective to injective}), and for any $A$-module $N$ and $A|_X$-module $M$, we have a canonical isomorphism
\begin{equation}\label{ringed topos Ext localization to object}
\Ext_{A|_X}^p(\mathcal{X}_{/X};M,j^*(N)) \stackrel{\sim}{\to } \Ext_A^p(\mathcal{X};j_!(M),N).
\end{equation}
In particular, by setting $M=A$, we obtain canonical isomorphisms
\begin{equation}\label{ringed topos cohomology localization to object}
H^p(\mathcal{X}_{/X},j^*(N)) \stackrel{\sim}{\to } H^p(X,N).
\end{equation}
For any object $X$ of $\mathcal{X}$ and any couple $M$, $N$ of $A$-modules, we put
\begin{equation}\label{ringed topos Ext on object def}
\Ext_A^p(X;M,N):=\Ext_A^p(\mathcal{X}_{/X};M|_X,N|_X)
\end{equation}
We then see that $\Ext_A^p(X;M,-)$ are the derived functors of the functors $\Hom_{A|_X}(M|_X,(-)|_X)$, and the functors $(M,N)\mapsto\Ext_A^p(X;M,N)$ form a $\delta$-functor with respect to each of the variables.

\paragraph{Cohomology for the topos of presheaves}\label{ringed topos presheaf cohomology paragarph}
Let $\mathcal{C}$ be a small category endowed with a presheaf of rings $A$, $\PSh(\mathcal{C})$ be the topos of presheaves over $\mathcal{C}$. We divide the computation of cohomology groups into two cases:
\begin{itemize}
    \item Let $X$ be a representable object of $\PSh(\mathcal{C})$. The functor which associates an $A$-module $M$ with the group $\Gamma(X,M)=M(X)$ is then exact by (\cite{SGA4-1} \Rmnum{1}, 3), so we have $H^p(X,M)=0$ for any $p>0$ and any $A$-module $M$. In particular, since $M(X)=\Hom_A(A_X,M)$, we conclude that $A_X$ is a projective $A$-module.
    \item Let $S$ be a presheaf over $\mathcal{C}$. We have a canonical isomorphism for any $A$-module $M$ (\cite{SGA4-1} \Rmnum{1}, 2):
    \[\Gamma(S,M)=\Hom(S,M)=\llim_{U\in\mathcal{C}_{/S}}M(U).\]
    Moreover, for any injective $A$-module $M$, the $A|_S$-module $M|_S$ is injective (\cite{SGA4-1} 2.2). Therefore, the group $H^p(S,M)$ is the value at $M|_S$ of the $p$-th right derived functor of the functor $\llim_{U\in\mathcal{C}_{/S}}\Gamma(U,-)$. Denote by $\llim_{\mathcal{C}_{/S}}^p$ this derived functor, we then have canonical isomorphism
    \begin{equation}\label{ringed topos presheaf cohomology is limit-1}
        H^p(S,M) \stackrel{\sim}{\to } \llim\nolimits_{\mathcal{C}_{/S}}^pM.
    \end{equation}
    In particular, if $S$ is the final object in $\mathcal{S}$, we then obtain a canonical isomorphism
    \begin{equation}\label{ringed topos presheaf cohomology is limit-2}
        H^p(\PSh(\mathcal{C}),M)\cong\llim\nolimits_{\mathcal{C}}^pM.
    \end{equation}
\end{itemize}

We now turn to the computation of \v{C}ech cohomologies of $\PSh(\mathcal{C})$. Let $X$ be an object of $\mathcal{C}$ and $\mathfrak{U}=\{U_i\to X\}_{i\in I}$ be a family of squarable morphisms in $\mathcal{C}$. We denote by $A_\bullet$ the simplicial complex (\ref{ringed topos Cech complex for covering-4}):
\[A_\bullet:\begin{tikzcd}[column sep=12mm]
\cdots\ar[r,shift left=8pt,"s_0"description]\ar[r,"s_1"description]\ar[r,shift right=8pt,"s_2"description]
&\bigoplus_{i,j}A_{U_i\times_XU_j}\ar[r,shift left=4pt,"s_0"description]\ar[r,shift right=4pt,"s_1"description]
&\bigoplus_iA_{U_i}\ar[r]
&A_X
\end{tikzcd}\]
For any $A$-module $M$, we denote by $C^\bullet(\mathfrak{U},M)$ the complex obtained by applying $\Hom_A(A_\bullet,M)$:
\[C^\bullet(\mathfrak{U},M):\begin{tikzcd}[column sep=12mm]
\prod_{i}M(U_i)\ar[r,shift left=2pt]\ar[r,shift right=2pt]
&\prod_{i,j}M(U_i\times_XU_j)\ar[r,shift left=4pt]\ar[r]\ar[r,shift right=4pt]
&\cdots
\end{tikzcd}\]
The cohomology of this complex of abelian groups is denoted by $H^p(\mathfrak{U},M)=H^p(C^\bullet(\mathfrak{U},M))$.

\begin{proposition}\label{ringed topos presheaf Cech cohomology char}
With the above notions, let $R\hookrightarrow X$ be the sieve generated by $\mathfrak{U}$. Then we have a canonical isomorphism
\begin{equation}\label{ringed topos presheaf Cech cohomology char-1}
H^p(\mathfrak{U},M) \stackrel{\sim}{\to } H^p(R,M)
\end{equation}
Moreover, the functors $H^p(\mathfrak{U},-)$ commutes with restrictions of scalars.
\end{proposition}
\begin{proof}
As $R$ is a sub-object of $X$ in $\PSh(\mathcal{C})$, the fiber products $U_{i_1}\times_R\cdots\times_RU_{i_p}$ and $U_{i_1}\times_X\cdots\times_XU_{i_p}$ are canonical isomorphic, so it follows from \cref{ringed topos Cech complex resolution for epimorphic} that the complex $A_\bullet$ is a resolution of $A_R$. Now recall from our previous discussion that the components of $A_\bullet$ are projective $A$-modules, so by definition, the cohomology groups of $C^\bullet(\mathfrak{U},M)$ are then canonically isomorphic to $\Ext_A^p(A_R,M)$, whence the isomorphism (\ref{ringed topos presheaf Cech cohomology char-1}). The second assertion follows immediately from the description of the complex $C^\bullet(\mathfrak{U},M)$.
\end{proof}

\begin{corollary}\label{ringed topos presheaf Cech cohomology refinement prop}
Let $\mathfrak{U}=\{U_i\to X\}$ and $\mathfrak{V}=\{V_i\to X\}$ be two families of morphisms with target $X$ and
\[\phi=(\phi:I\to J,f_i:U_i\to V_{\phi(i)}),\quad \phi=(\psi:I\to J,g_i:U_i\to V_{\phi(i)})\]
be morphisms (lying over $X$) from $\mathfrak{U}$ to $\mathfrak{V}$. Then $\phi$ and $\psi$ induce equal morphisms $H^p(\mathfrak{U},M)\to H^p(\mathfrak{U},M)$. In particular, if the families $\mathfrak{U}$ and $\mathfrak{V}$ are equivalent (i.e. there exists a morphism from $\mathfrak{U}$ to $\mathfrak{V}$ and a morphism from $\mathfrak{V}$ to $\mathfrak{U}$), then the $A$-modules $H^p(\mathfrak{U},M)$ and $H^p(\mathfrak{V},M)$ are canonically isomorphic.
\end{corollary}

\paragraph{Cohomology for small sites}\label{ringed small site cohomology paragraph}
Let $(\mathcal{C},A)$ be a ringed $\mathscr{U}$-site, $\Sh(\mathcal{C})$ be the topos of sheaves over $\mathcal{C}$, and $\eps:\mathcal{C}\to \Sh(\mathcal{C})$ be the canonical functor which associated an object of $\mathcal{C}$ with the associated sheaf. By abusing of languages, for any object $X$ of $\mathcal{C}$ and any sheaf of $A$-modules $M$, we define $H^p(X,M)$ to be the $p$-th derived functor of the functor $\Gamma(X,-)$. Recall that if the topology on $\mathcal{C}$ is subcanonical, then the functor $\eps$ is fully faithful and we can identify $\mathcal{C}$ with a subcategory of $\Sh(\mathcal{C})$.\par
Now consider the inclusion functor $\mathcal{H}^0:\Sh(\mathcal{C},A)\to\PSh(\mathcal{C},A)$ from the category of sheaves of $A$-modules to the category of presheaves of $A$-modules. For any sheaf of $A$-modules $M$ and any object $X$ of $\mathcal{C}$, we have by definition
\[\mathcal{H}^0(M)(X)=H^0(X,M)=M(X).\]
Since functor $\mathcal{H}^0$ is obviously left exact, we can define its right derived functors, which are denoted by $\mathcal{H}^p$. Note that as for any object $X$ of $\mathcal{C}$, the functor $\Gamma(X,-)$ is exact on the category of presheaves, we have
\begin{equation}\label{ringed small site sheaf cohomology sheaf section char}
\mathcal{H}^p(M)(X)=H^p(X,M)
\end{equation}
for any sheaf of $A$-modules $M$, so the presheaf $\mathcal{H}^p(M)$ is defined by $X\mapsto H^p(X,M)$.\par
The definition of the cohomology group $H^p(X,M)$ is simple, but hard to compute. It is therefore necessary to introduce another cohomology group, the \v{C}ech cohomology group, which are much easily to handle. Suppose that $(\mathcal{C},A)$ is a small ringed site, so that $\PSh(\mathcal{C})$ is a topos and we can apply the results of \ref{ringed topos presheaf cohomology paragarph}. Let $X$ be an object of $\mathcal{C}$ and $R\hookrightarrow X$ be a covering sieve. For any presheaf of $A$-modules $G$, the groups $H^p(R,G)$ (which are computed in the topos $\PSh(\mathcal{C})$) are then called the \textbf{\v{C}ech cohomology groups of the presheaf $G$ relative to the covering sieve $R$}. If $R\hookrightarrow X$ is generated by a covering family $\mathfrak{U}=\{U_i\to X\}$, these groups are then computed by the \v{C}ech complex $C^\bullet(\mathfrak{U},G)$, and called the \textbf{\v{C}ech cohomology groups of the presheaf $G$ relative to the covering family $\mathfrak{U}$} (denoted by $H^p(\mathfrak{U},G)=H^p(R,G)$). If $M$ is a sheaf of $A$-modules over $\mathcal{C}$, the groups $H^p(\mathfrak{U},\mathcal{H}^0(M))$ are then denoted by $H^p(\mathfrak{U},M)$, and called the \v{C}ech cohomology groups of the sheaf $M$ relative to the covering family $\mathfrak{U}$.\par
The cohomology group $H^p(R,M)$ thus defined is inadequate to reflect the cohomological natures of $M$, and in fact differs from the group $H^p(X,M)$. To fix this, we must apply a limit process as the case of classical \v{C}ech cohomologies. So let $\check{\mathcal{H}}^0:\PSh(\mathcal{C},A)\to \PSh(\mathcal{C},A)$ be the natrual extension of the functor $L$ of \autoref{site sheafification subsection} to the category of presheaves of $A$-modules. We then have, by (\ref{site small generated sheafification-2}), for any presheaf $G$ and any object $X$ of $\mathcal{C}$:
\begin{equation}\label{ringed small site presheaf 0-cohomology sheaf section char}
\check{\mathcal{H}}^0(G)(X)=\rlim_{R\hookrightarrow X}G(R)
\end{equation}
where the inductive limit is taken over all covering sieves of $X$. Recall that the functor $\check{\mathcal{H}}^0$ is left exact (\cref{site small generated sheafification functor prop}), and we denote its right derived functors by $\check{\mathcal{H}}^p$. As taking filtered limits is exact, it follows from (\ref{ringed small site presheaf 0-cohomology sheaf section char}) that
\begin{equation}\label{ringed small site presheaf p-cohomology sheaf section char}
\check{\mathcal{H}}^p(G)(X)=\rlim_{R\hookrightarrow X}H^p(R,G),
\end{equation}
The presheaves $\check{\mathcal{H}}^p(G)$ are then called the \textbf{presheaves of \v{C}ech chomologies of $G$}. For any object $X$ of $\mathcal{C}$, the \textbf{\v{C}ech cohomology groups of $G$} are defined to be
\begin{equation}\label{ringed small site presheaf Cech cohomology group def}
\check{H}^p(X,G):=\check{\mathcal{H}}^p(G)(X).
\end{equation}
If the topology of $\mathcal{C}$ is defined by a basis, which is most of the case in practice, we then have, in view of \cref{ringed topos presheaf Cech cohomology char},
\begin{equation}\label{ringed small site presheaf Cech p-cohomology sheaf section char}
\check{H}^p(X,G)=\rlim_\mathfrak{U}H^p(\mathfrak{U},G)
\end{equation}
where the inductive limit is taken over all covering families $\mathfrak{U}$ of $X$. If $M$ is a sheaf of $A$-modules, then by abusing of languages, we write
\begin{equation}\label{ringed small site sheaf Cech cohomology group def}
\check{H}^p(X,M)=\check{H}^p(X,\mathcal{H}^0(M))=\check{\mathcal{H}}^p(\mathcal{H}^0(M))(X).
\end{equation}
The groups $\check{H}^p(X,M)$ are called the \textbf{\v{C}ech cohomology groups of the sheaf $M$}. Note that although the functors $\check{H}^p$ are derived functors on the category of presheaves, they do not, in general, form a $\delta$-functor on the category of sheaves.
\paragraph{\v{C}ech cohomology for \texorpdfstring{$\mathscr{U}$}{U}-sites}\label{site cohomology change universe paragraph}
Let $(\mathcal{C},A)$ be a ringed $\mathscr{U}$-site and $\mathscr{V}$ be a universe containing $\mathscr{U}$. Then the site $(\mathcal{C},A)$ is also a $\mathscr{V}$-site, and we have a $\mathscr{U}$-topos $\Sh(\mathcal{C})_\mathscr{U}$, a $\mathscr{V}$-topos $\Sh(\mathcal{C})_\mathscr{V}$, and a canonical inclusion functor $\eps:\Sh(\mathcal{C})_\mathscr{U}\to \Sh(\mathcal{C})_\mathscr{V}$. The functor $\eps$ is exact and fully faithful over the category of modules and transforms injective modules to injective modules (\cref{abelian category generaring family in universe prop}). For any couple of $\mathscr{U}$-sheaves of $A$-modules, we then have caonical isomorphisms
\begin{equation}\label{site cohomology change universe-1}
\Ext_A^p(\Sh(\mathcal{C})_\mathscr{U};M,N)\stackrel{\sim}{\to } \Ext_{\eps(A)}^p(\Sh(\mathcal{C})_\mathscr{V};\eps(M),\eps(N))\for p\geq 0.
\end{equation}
In particular, for any $\mathscr{U}$-sheaf of sets $R$ over $\mathcal{C}$, we have canonical isomorphisms
\begin{equation}\label{site cohomology change universe-2}
H^p(R,M)\stackrel{\sim}{\to } H^p(\eps(R),\eps(M));
\end{equation}
and more particularly, for any object $X$ of $\mathcal{C}$, 
we have canonical isomorphisms
\begin{equation}\label{site cohomology change universe-3}
H^p(X,M)\stackrel{\sim}{\to } H^p(X,\eps(M)).
\end{equation}
We can therefore say that the cohomology of sheaves does not depend on the choice of universes and one can always, for the need of a proof or a construction, augment the universe to calculate the cohomology of a sheaf.\par
Now consider the inclusion functor $\hat{\eps}:\PSh(\mathcal{C})_\mathscr{U}\to \PSh(\mathcal{C})_\mathscr{V}$ from $\mathscr{U}$-presheaves to $\mathscr{V}$-presheaves. This functor is exact, so the derived functors of $\hat{\eps}\mathcal{H}^0:\Sh(\mathcal{C},A)\to \PSh(\mathcal{C},A)_\mathscr{V}$ are equal to $\hat{\eps}\mathcal{H}^p$ for $p\geq 0$. By abusing of languages, we then denote them by $\mathcal{H}^p:\Sh(\mathcal{C},A)\to \PSh(\mathcal{C},A)_\mathscr{V}$. This enlargement of the universe has the following advantage if $\mathcal{C}$ is $\mathscr{V}$-small: The category $\PSh(\mathcal{C})_\mathscr{U}$ is in general not a $\mathscr{U}$-topos and the $\mathscr{U}$-presheaves of $A$-modules are not necessarily submodules of injective $\mathscr{U}$-presheaves, whereas the category of $\mathscr{V}$-presheaves is a $\mathscr{V}$-topos and therefore any $\mathscr{V}$-presheaf of $A$-modules is a sub-object of an injective $\mathscr{V}$-presheaf. Therefore for any $\mathscr{V}$-presheaf of sets $R$ (and in particular when $R$ is a $\mathscr{U}$-presheaf) and any $\mathscr{U}$-sheaf of $A$-modules $M$, the groups $H^p(R,\mathcal{H}^p(M))$ are defined by (\ref{ringed topos cohomology def paragarph}) and it follows from (\ref{site cohomology change universe-2}) that these groups do not depend on the considered universe. Similarly, for any pair of positive integer $p$ and $q$, the presheaves $\check{\mathcal{H}}^p(\mathcal{H}^p(M))$ are defined by (\ref{ringed small site sheaf Cech cohomology group def}) and it follows from (\ref{site cohomology change universe-2}) and (\ref{ringed small site presheaf Cech p-cohomology sheaf section char}) that these presheaves do not depend on the universe $\mathscr{V}$ used to define them.

\subsection{The Cartan-Laray spectral sequence}
The classical Leray spectral sequence for a covering $\mathfrak{U}$ (also called the \v{C}ech-to-derive spectral sequence) of a topological space $X$ relates the cohomology sheaf and \v{C}ech cohomology into a spectral sequence of the form
\begin{equation*}
E_2^{p,q}=\check{H}^p(\mathfrak{U},\mathcal{H}^q(X,\mathscr{F}))\Rightarrow H^{p+q}(X,\mathscr{F})
\end{equation*}
where $\mathscr{F}$ is a sheaf over $X$. This spectral sequence has many useful concequences. For example, if the cohomology vanishes for any finite intersections of the covering $\mathfrak{U}$, then the $E_2$-term degenerates and the edge morphisms yield an isomorphism of \v{C}ech cohomology for this covering to sheaf cohomology. This provides a method of computing sheaf cohomology using \v{C}ech cohomology: for instance, this happens if $\mathscr{F}$ is a quasi-coherent sheaf on a scheme and each element of $\mathfrak{U}$ is an open affine subscheme such that all finite intersections are again affine (e.g. if the scheme is separated).\par
In this paragraph we provide a direct genralization of the Leray spectral sequence for cohomology of topos. As we shall see, the language of derived functors and the Grothendieck spectral sequence can be used to give an easy proof of such generalizations. A relative version of this, which relates the sheaf cohomology with higher direct images of a morphism, will also be given after we introduce the notion of flasque sheaves.

\begin{proposition}\label{ringed site change universe cohomology prop}
Let $(\mathcal{C},A)$ be a ringed $\mathscr{U}$-site and $\mathscr{V}$ be a universe containing $\mathscr{U}$. Then the functor $\mathcal{H}^0:\Sh(\mathcal{C},A)\to \PSh(\mathcal{C},A)_\mathscr{V}$ transforms injective $A$-modules to injective presheaves. For any integer $p>0$ and any $A$-module $M$, the sheaf associated with the presheaf $\mathcal{H}^p(M)$ is zero.
\end{proposition}
\begin{proof}
We denote by $(-)^\#_\mathscr{V}$ the sheafification functor on $\mathscr{V}$-presheaves, and $\eps:\Sh(\mathcal{C},A)\to \Sh(\mathcal{C},A)_\mathscr{V}$ the inclusion functor. Since we have $(\mathcal{H}^0)^\#_\mathscr{V}=\eps$ by \cref{site small generated sheafification functor prop} and the functors $(-)^\#_\mathscr{V}$ and $\eps$ are exact, we conclude that $(\mathcal{H}^p)^\#=0$ for any integer $p>0$. Now for any $\mathscr{U}$-sheaf $M$ and any $\mathscr{V}$-presheaf $N$, we have a functorial isomorphism
\[\Hom_{\PSh(\mathcal{C},A)}(N,\mathcal{H}^0(M)) \stackrel{\sim}{\to } \Hom_{\Sh(\mathcal{A})_\mathscr{V}}(N^\#_\mathscr{V},\eps(M)).\]
If $M$ is injective, then $\eps(M)$ is injective (\cref{abelian cat adjoint functor exact iff injective to injective}) and as the functor $(-)^\#_\mathscr{V}$ is exact, the functor $\Hom_{\PSh(\mathcal{C},A)}(-,\mathcal{H}^0(M))$ is exact, therefore $\mathcal{H}^0(M)$ is injective.
\end{proof}

\begin{theorem}\label{ringed site Leray spectral sequence for presheaf functor}
Let $(\mathcal{C},A)$ be a ringed $\mathscr{U}$-site, $R$ be a $\mathscr{U}$-presheaf of sets over $\mathcal{C}$, $M$ be a sheaf of $A$-modules. Then there exists a canonical spectral sequence
\begin{equation}\label{ringed site Leray spectral sequence for presheaf functor-1}
E_2^{p,q}=H^p(R,\mathcal{H}^q(M))\Rightarrow H^{p+q}(R^\#,M).
\end{equation}
(If $\mathcal{C}$ is not $\mathscr{U}$-small, the term $H^p(R,\mathcal{H}^q(M))$ should be considered as the cohomology of the presheaf $\mathcal{H}^p(M)$ in the topos $\PSh(\mathcal{C},A)_\mathscr{V}$, where $\mathscr{V}$ is a universe containing $\mathscr{U}$ such that $\mathcal{C}$ is $\mathscr{V}$-small.)
\end{theorem}
\begin{proof}
By the definition of the functor $\#$, we have an isomorphism of functors
\[H^0(R^\#,M) \stackrel{\sim}{\to } H^0(R,\mathcal{H}^0(M)).\]
The functor $\mathcal{H}^0$ transforms injective objects to injective objects, so we conclude the spectral sequence from \cref{abelian category G spectral sequence iff injective to acyclic}.
\end{proof}

\begin{corollary}\label{ringed site Leray spectral sequence for covering sieve}
Let $X$ be an object of $\mathcal{C}$ and $\mathfrak{U}=\{U_i\to X\}$ be a covering family of $X$. Then we have the following Cartan-Leray spectral sequence
\begin{equation}\label{ringed site Leray spectral sequence for covering sieve-1}
E_2^{p,q}=H^p(\mathfrak{U},\mathcal{H}^p(M))\Rightarrow H^{p+q}(X,M).
\end{equation}
\end{corollary}
\begin{proof}
Let $R\hookrightarrow X$ be the sieve generated by $\mathfrak{U}$. As the sieve is covering, the sheaf associated with $R$ is the sheaf associated with $X$ (\cref{site morphism of presheaf bicovering iff}), so we have $H^{p+q}(R^\#,M)=H^{p+q}(X,M)$ in view of the definition of $H^p$. The corollary then follows from \cref{ringed topos Cech complex resolution for epimorphic}. 
\end{proof}

\begin{corollary}\label{ringed site Cech to derive spectral sequence}
There exists a canonical spectral sequence on sheaves $M$ and the objects $X$ of $\mathcal{C}$:
\begin{equation}\label{ringed site Cech to derive spectral sequence-1}
E_2^{p,q}=\check{H}^p(X,\mathcal{H}^p(M))\Rightarrow H^{p+q}(X,M).
\end{equation}
As $X$ varies in $\mathcal{C}$, this spectral sequence gives a spectral sequence of presheaves
\begin{equation}\label{ringed site Cech to derive spectral sequence-2}
E_2^{p,q}=\check{\mathcal{H}}^p(\mathcal{H}^p(M))\Rightarrow \mathcal{H}^{p+q}(M),
\end{equation}
which gives canonical edge morphisms
\begin{align}
\phi^p(M)&:\check{\mathcal{H}}^p(M)\to \mathcal{H}^p(M),\label{ringed site Cech to derive spectral sequence-3}\\
\phi^p_X(M)&:\check{H}^p(X,M)\to H^p(X,M).\label{ringed site Cech to derive spectral sequence-4}
\end{align}
The morphisms $\phi^p(M)$ and $\phi_X^p(M)$ are isomorphisms for $p=0,1$, and are monomorphisms for $p=2$. In general, if the presheaf $\mathcal{H}^i(M)$ is zero for $0<i<n$, then the morphisms $\phi^p(M)$ and $\phi^p_X(M)$ are isomorphic for $0\leq p\leq n$ and monomorphic for $p=n+1$.
\end{corollary}
\begin{proof}
The first spectral sequence are obtained by passing to inductive limits in the spectral sequence (\ref{ringed site Leray spectral sequence for covering sieve-1}) over covering sieves $R\hookrightarrow X$, and the second one is induced in view of (\ref{ringed small site presheaf Cech cohomology group def}). By \cref{ringed site Leray spectral sequence for presheaf functor}, the sheaf associated with the presheaf $\mathcal{H}^p(M)$ is zero if $p>0$, which implies $\check{\mathcal{H}}^0\mathcal{H}^q(M)=0$ for $p>0$ (\cref{site small generated sheafification functor prop}). The assertions on the induced morphisms $\phi^p$ and $\phi^p_X$ therefore follows.
\end{proof}

\begin{corollary}\label{ringed site sheaf cohomology restriction of scalar}
Let $(\mathcal{X},A)$ be a ringed topos and $M$ be a (left) $A$-module. Denote by $\mathscr{M}$ the underlying abelian group of $M$. Then the functor $M\mapsto\mathscr{M}$ is exact and for any object $X$ of $\mathcal{X}$, we have a canonical isomorphism
\[H^0(X,M) \stackrel{\sim}{\to } H^0(X,\mathscr{M})\]
which extendes to isomorphisms
\begin{equation}\label{ringed site sheaf to underlying group exact-1}
H^p(X,M) \stackrel{\sim}{\to } H^p(X,\mathscr{M})\for p\geq 0.
\end{equation}
\end{corollary}
\begin{proof}
For any object $Y$ of $\mathcal{X}$, we have
\[\check{H}^p(Y,M)=\rlim_\mathfrak{U}H^p(\mathfrak{U},M),\quad \check{H}^p(Y,\mathscr{M})=\rlim_\mathfrak{U}H^p(\mathfrak{U},\mathscr{M})\]
where the limit is taken over covering families $\mathfrak{U}$. Since the cohomology $H^p(\mathfrak{U},-)$ commutes with restriction of scalars (\cref{ringed topos Cech complex resolution for epimorphic}~(b)), we conclude that the canonical homomorphism $\check{H}^p(Y,M)\to \check{H}^p(Y,\mathscr{M})$ is an isomorphism. Now if $M$ is an injective $A$-module, we have have $\check{\mathcal{H}}^p(\mathscr{M})=0$ for $p>0$, whence $\mathcal{H}^p(\mathscr{M})=0$ by induction on $p$ and use \cref{ringed site Cech to derive spectral sequence}. It then follows that $H^p(X,\mathscr{M})=0$ for $p>0$, so the functor $M\mapsto\mathscr{M}$ transforms injective objects to acyclic objects for the functor $H^0(X,-)$, and we can apply \cref{abelian category G spectral sequence iff injective to acyclic} to get the isomorphisms (\ref{ringed site sheaf to underlying group exact-1}).
\end{proof}

\begin{example}
Let $G$ be a topological group and $\mathcal{B}G$ be the classifying topos. Let $E_G$ be the left regular representation of $G$ (given by left translations of $G$), which is an object of $\mathcal{B}G$. The canonical morphism from $E_G$ to the final object $e_G$ of $B_G$ is easily seen to be an epimorphism, so it gives a covering $\mathfrak{U}=\{E_G\to e_G\}$ and, for any abelian sheaf $F$ on $\mathcal{B}G$, a spectral sequence
\begin{equation}\label{topos BG spectral sequence of E_G to e_G}
E_2^{p,q}=H^p(\mathfrak{U},\mathcal{H}^p(F))\Rightarrow H^{p+q}(\mathcal{B}G,F).
\end{equation}
By definition, the $E_2$ terms of this spectral sequence is computed as the cohomology of the following sequence
\[\begin{tikzcd}
H^p(E_G,F)\ar[r]&H^p(E_G\times E_G,F)\ar[r]&H^p(E_G\times E_G\times E_G,F)\ar[r]&\cdots
\end{tikzcd}\]
Let $\Topos(G)$ denote the topos of sheaves over the big site $\mathbf{Top}_{/G}$ associated with $G$. We claim that for each integer $n>0$, there is a canonical equivalence
\[\mathcal{B}G_{/(E_G)^{\times n}} \stackrel{\sim}{\to } \Topos(G^{\times(n-1)})\]
which associates each $G$-set $X$ over $(E_G)^{\times n}$ with its orbit set $X/G$. To see this is an equivalence, it suffices to note that any $G$-set $X$ over $(E_G)^{\times n}$ has a faithful action by $G$, hence isomorphic to a product of coplies of $G$. By passing to quotient we then obtain a morphism.
\end{example}

\subsection{Acyclic sheaves}
Let $(\mathcal{X},A)$ be a ringed topos, $F$ be an $A$-module, $S$ be a topological generating family of $\mathcal{X}$. The sheaf $F$ is said to be \textbf{$S$-acyclic} if for any object $X$ of $S$ and any integer $p>0$, we have $H^p(X,F)=0$, and \textbf{$\mathcal{C}$-acyclic} if $S$ is the family of sheaves assoicated with the objects of $\mathcal{C}$. If $S$ is equal to $\Ob(\mathcal{X})$, the $S$-acyclic sheaves are then called \textbf{flasque sheaves}.
\begin{proposition}\label{ringed site C-acyclic sheaf iff}
Let $(\mathcal{C},A)$ be a ringed $\mathscr{U}$-site, $F$ be a sheaf of $A$-modules. Denote by $\mathcal{H}^0:\Sh(\mathcal{C},A)\to \PSh(\mathcal{C},A)$ the canonical inclusion functor. The following conditions are equivalent:
\begin{enumerate}
    \item[(\rmnum{1})] $F$ is $\mathcal{C}$-acyclic.
    \item[(\rmnum{2})] For any object $X$ of $\mathcal{C}$ and any covering sieve $R\hookrightarrow X$, we have $H^p(R,\mathcal{H}^0(F))=0$ for $p>0$.
    \item[(\rmnum{3})] For any object $X$ of $\mathcal{C}$, we have $\check{H}^p(X,F)=0$ for $p>0$.
\end{enumerate}
\end{proposition}
\begin{proof}
If $F$ is $\mathcal{C}$-acyclic, the presheaf $\mathcal{H}^p(F)$ is zero for $p>0$, so the spectral sequence (\ref{ringed site Leray spectral sequence for presheaf functor-1}) gives an isomorphism $H^p(R,\mathcal{H}^0(F))\cong H^p(X,F)$ for $p>0$, which implies (\rmnum{2}). By passing to inductive limit on $R$, it is immediate that (\rmnum{2})$\Rightarrow$(\rmnum{3}). Conversely, if $\check{H}^p(X,F)=0$ for $p>0$, then by induction and \cref{ringed site Cech to derive spectral sequence} we conclude that $\mathcal{H}^p(F)=0$ for $p>0$, whence (\rmnum{1}).
\end{proof}

It follows from \cref{ringed site C-acyclic sheaf iff}(\rmnum{2}) and \cref{ringed site sheaf cohomology restriction of scalar} that the property of $S$-acyclicity only depends on the underlying abelian sheaf. In particular, a sheaf of $A$-modules is flasque if and only if the underlying abelian sheaf is flasque.

\begin{corollary}\label{ringed topos flasque sheaf iff Cech for epimorphic}
Let $(\mathcal{X},A)$ be a ringed topos and $F$ be an $A$-module. The following properties are equivalent:
\begin{enumerate}
\item[(\rmnum{1})] $F$ is flasque;
\item[(\rmnum{2})] for any epimorphic family $\mathfrak{U}=\{X_i\to X\}$, $H^p(\mathfrak{U},F)=0$ for $p>0$.
\end{enumerate}
\end{corollary}
\begin{proof}
In the definition, we can take $\mathcal{C}$ to be the topos $\mathcal{X}$, so the corollary follows from the equivalence (\rmnum{1})$\Leftrightarrow$(\rmnum{2}) of \cref{ringed site C-acyclic sheaf iff}.
\end{proof}

Any injective sheaf is by definition flasque, and flasque sheaves are $S$-acyclic for any topological generating family $S$. Note that a flasque sheaf is not necessarily injective (for example consider the topos of sets). An $S$-acyclic sheaf is also not necessarily flasque.

\begin{proposition}\label{ringed topos flasque sheaf restriction surjective}
Let $(\mathcal{X},A)$ be a topos, $F$ be a flasque $A$-module, $X$ be an object of $\mathcal{X}$. Then for any sub-object $Y$ of $X$, the canonical homomorphism $H^0(X,F)\to H^0(Y,F)$ is surjective.
\end{proposition}
\begin{proof}
Let $Y$ be a sub-object of $X$ such that the morphism $H^0(X,F)\to H^0(Y,F)$ is not surjective, and $Z$ be the object obtained by glueing two copies of $X$ along $Y$. The object $Z$ is then covered by two sub-objects $X_1$ and $X_2$ isomorphic to $X$, and we have $X_1\times_ZX_2=Y$. If $\mathfrak{U}=\{X_1,X_2\}$ is the corresponding covering of $Z$, we then have $H^1(\mathfrak{U},F)\neq 0$, which is a contradiction.
\end{proof}

The criterion of \cref{ringed topos flasque sheaf restriction surjective} is not sufficient to characterize, in the case of general topos, flasque sheaves. However, it characterizes them in the case of topos generated by their open sets and in particular in the case of topos associated with topological spaces. Therefore, our terminology adopted here coincides with the terminology for classical flasque sheaves over topological spaces.

\begin{proposition}\label{ringed topos morphism on acyclic sheaf}
Let $f:(\mathcal{X},A)\to (\mathcal{Y},B)$ be a morphism of ringed topoi.
\begin{enumerate}
    \item[(a)] The functor $f_*$ transforms flasque $A$-modules into flasque $B$-modules.
    \item[(b)] Let $S$ (resp. $T$) be a topological generating family of $\mathcal{X}$ (resp. $\mathcal{Y}$) such that $f^*(T)\sub S$. Then the functor $f_*$ transforms $S$-acyclic $A$-modules to $T$-acyclic $T$-modules.
    \item[(c)] If $f$ is a flat morphism, the functor $f_*$ transforms injective $A$-modules to injective $B$-modules.
\end{enumerate}
\end{proposition}
\begin{proof}
Let $Y$ be an object of $\mathcal{Y}$, $\mathfrak{V}=\{Y_i\to Y\}$ be an epimorphic family, $F$ be a flasque $A$-module, $C^\bullet(\mathfrak{U},f_*(F))$ be the \v{C}ech complex of covering $\mathfrak{V}$. By using the adjunction of $f_*$ and $f^*$ and the fact that $f^*$ commutes with fiber products, we then obtain a canonical isomorphism
\[C^\bullet(\mathfrak{V},f_*(F))\cong C^\bullet(f^*(\mathfrak{V}),F).\]
Since $f^*$ also commutes with inductive limits, $f^*(\mathfrak{V})$ is an epimorphic family, and we then conclude that $H^p(f^*(\mathfrak{V}),F)=0$ for $p>0$ since $F$ is flasque, whence
\[H^p(\mathfrak{V},f_*(F))=H^p(C^\bullet(\mathfrak{V},f_*(F)))=H^p(C^\bullet(f^*(\mathfrak{V}),F))=H^p(f^*(\mathfrak{V}),F)=0\for p>0.\]
We then conclude that $f_*(F)$ is flasque (\cref{ringed topos flasque sheaf iff Cech for epimorphic}), whence the first assertion. The second assertion can be done similarly if the family $T$ is stable under fiber products. In the general case, we can use the spectral sequence (\ref{ringed topos Leray spectral sequence for morphism-2}) of the morphism $f$, since its proof only depends on assertion (a). Let $F$ be $S$-acyclic sheaf. Then $R^pf_*(F)$ are the sheaves associated with the presheaves $Y\mapsto H^p(f^*(Y),F)$. As $T$ is a topologically generating family and $F$ is $S$-acyclic, we have $R^pf_*(F)=0$ for $p>0$. The spectral sequence (\ref{ringed topos Leray spectral sequence for morphism-2}) then provides a cannical isomorphism $H^p(Y,f_*(F))\cong H^p(f^*(Y),F)$ for $Y\in\Ob(\mathcal{Y})$, so we conclude that $H^p(Y,f_*(F))=0$ for $p>0$ and $Y\in T$, which means $F$ is $T$-acyclic. Finally, if $f$ is flat, then the functor $f^*$ is exact on modules, so $f_*$ transforms injective objects to injective objects (\cref{abelian category G spectral sequence iff injective to acyclic}).
\end{proof}

\begin{proposition}\label{ringed topos injective sheaf sHom is exact}
Let $F$ be an $A$-module over a ringed topos $(\mathcal{X},A)$ and $I$ be an injective $A$-module.
\begin{enumerate}
\item[(a)] The functor $M\mapsto\sHom_A(M,G)$ is exact.
\item[(b)] The abelian sheaf $\sHom_A(F,G)$ is flasque.
\end{enumerate}
\end{proposition}
\begin{proof}
To prove the first assertion, we consider an exact sequence
\[\begin{tikzcd}
0\ar[r]&F'\ar[r]&F\ar[r]&F''\ar[r]&0
\end{tikzcd}\]
which induces a sequence
\[\begin{tikzcd}
0\ar[r]&\sHom_A(F'',G)\ar[r]&\sHom_A(F,G)\ar[r]&\sHom_A(F',G)\ar[r]&0
\end{tikzcd}\]
To prove that this sequence is exact, it suffices to consider, for any object $H$ of $\mathcal{X}$, the following sequence
\[\begin{tikzcd}[column sep=3mm]
0\ar[r]&\Hom_\mathcal{X}(H,\sHom_A(F'',G))\ar[r]&\Hom_\mathcal{X}(H,\sHom_A(F,G))\ar[r]&\Hom_\mathcal{X}(H,\sHom_A(F',G))\ar[r]&0
\end{tikzcd}\]
which is isomorphic to the sequence
\[\begin{tikzcd}[column sep=5mm]
0\ar[r]&\Hom_A(A_H\otimes_AF'',G)\ar[r]&\Hom_A(A_H\otimes_AF,G)\ar[r]&\Hom_A(A_H\otimes_AF',G)\ar[r]&0
\end{tikzcd}\]
Since the $A$-module $A_H$ is flat (\cref{ringed topos flat module shrink is flat}), this sequence is exact, whence the desired assertion. Now to prove that $\sHom_A(F,G)$ is flasque, we consider an epimorphic family $\mathfrak{U}=\{X_i\to X\}$ and the complex $\Z_\bullet(\mathfrak{U})$ defined in (\ref{ringed topos Cech complex for covering-5}). This complex is a flat resolution of the object $\Z_X$, which is also flat by (\cref{ringed topos flat module shrink is flat}). From the definition of \v{C}ech cohomology, we then have
\[H^p(\mathfrak{U},\sHom_A(F,G)) \stackrel{\sim}{\to } H^p(\Hom_\Z(\Z_\bullet(\mathfrak{U}),\Hom_A(F,G))) \stackrel{\sim}{\to } H^p(\Hom_A(\Z_\bullet(\mathfrak{U})\otimes_\Z F,G)).\]
The complex $Z_\bullet(\mathfrak{U})\otimes_\Z F$ is exact at nonzero degrees because $\Z_\bullet(\mathfrak{U})$ is a flat resolution of a flat module, so $\Hom(\Z_\bullet(\mathfrak{U})\otimes_\Z F,G)$ is acyclic at nonzero degrees, which proves our assertion.
\end{proof}

\begin{proposition}\label{ringed topos flasque injective sheaf restriction prop}
Let $(\mathcal{X},A)$ be a ringed topos, $F$ be a flasque (resp. injective) sheaf of $A$-modules.
\begin{enumerate}
\item[(a)] For any object $X$ of $\mathcal{X}$, the $A|_X$-module $j_X^*(F)$ is flasque (resp. injective).
\item[(b)] For any closed $\mathcal{Z}$ of $\mathcal{X}$, the sheaf of sections of $F$ supported in $\mathcal{Z}$ is flasque (resp. injective).
\end{enumerate}
\end{proposition}
\begin{proof}
The first assertion follows from \cref{ringed topos morphism on acyclic sheaf} if $F$ is flasque. The functor $j_X^*$ admits a left adjoint $(j_X)_!$, so if $F$ is injective, $j_X^*(F)$ is also injective (\cref{abelian cat adjoint functor exact iff injective to injective}). As for (b), let $i:\mathcal{Z}\to \mathcal{X}$ be the inclusion morphism. The sheaf of sections of $F$ with support in $\mathcal{Z}$ is then given by $i^*i^!(F)$ (\cite{SGA4-1} \Rmnum{4}, 14). Since $i_*i^!$ is right adjoint to $i_*i^*$, which is exact by (\cite{SGA4-1} \Rmnum{4}, 14), we conclude that it transforms injective sheaves to injective sheaves. Now let $\mathcal{U}$ be the open complement of $\mathcal{Z}$, $j:\mathscr{U}\to \mathcal{X}$ be the inclusion morphism, and $F$ be a flasque sheaf. We then have an exact sequence (\cite{SGA4-1} \Rmnum{4}, 14)
\begin{equation}\label{ringed topos flasque injective sheaf restriction prop-1}
\begin{tikzcd}
0\ar[r]&i_*i^!(F)\ar[r]&F\ar[r]&j_*j^*(F)
\end{tikzcd}
\end{equation}
For any object $X$ of $\mathcal{X}$, we have $j_*j^*(F)(X)=F(X\times\mathcal{U})$ and the induced morphism $F(X)\to j_*j^*(F)(X)$ is given by the canonical inclusion $X\times\mathcal{U}\hookrightarrow X$. As $F$ is flasque, this morphism is surjective by \cref{ringed topos flasque sheaf restriction surjective}, so the last arrow of (\ref{ringed topos flasque injective sheaf restriction prop-1}) is an epimorphism of presheaves. For any object $X$ of $\mathcal{X}$, the long exact sequence induced by \cref{ringed topos flasque sheaf restriction surjective} shows that $H^p(X,i_*i^!(F))=0$ for $p>0$, so $i_*i^!(F)$ is flasque.
\end{proof}

\begin{example}
Let $X$ be a locally compact space and $F$ be a $c$-soft sheaf on $X$. 
\end{example}

\begin{example}
Let $G$ be a discrete group and $\mathcal{B}G$ be the classifying topos. Prove that for any abelian sheaf $F$ and any monomorphism $X\hookrightarrow Y$, the homomorphism $F(Y)\to F(X)$ is surjective. Let $E_G$ be the group $G$ considered as a $G$-set with left translations of $G$. Then the topos $\mathcal{B}G_{/E_G}$ can be identified with the pointed topos. The morphism $E_G\to e_G$ ($e_G$ being the final object of $\mathcal{B}G$) is an epimorphism. For any abelian sheaf $F$ of $\mathcal{B}G$, the sheaf $F|_{E_G}$ is flasque. Deduce that the property of being flasque (or injective) is not a local property.
\end{example}

\begin{example}
We say a topos $\mathcal{X}$ is \textbf{generated by its open subtopos} if the open subtopoi of $\mathcal{X}$ (i.e. the sub-objects of the final object $e$ of $E$) form a generating family. Such a topos has the following property:
\begin{enumerate}
\item[(P)] Any epimorphic family $\{X_i\to X\}$ is dominated by an epimorphic family $\{U_j\to X\}$, where the $U_j\to X$ are monomorphisms.
\end{enumerate}
\end{example}

As an application of flasque sheaves, we now consider a morphism $f:(\mathcal{X},A)\to (\mathcal{Y},B)$ of ringed topoi and the direct image functor $f_*:\mathcal{X}\to \mathcal{Y}$ induced by $f$. The functor $f_*$ is left exact on the category of (left) modules, let $R^pf_*$ denote its right derived functors. The higher direct images $R^pf_*$ behaves much like the classical case, and we also have a Leray spectral sequence relating $R^pf_*$ and sheaf cohomology $H^p$.

\begin{proposition}\label{ringed topos morphism higher direct image prop}
Let $f:(\mathcal{X},A)\to (\mathcal{Y},B)$ be a morphism of ringed topoi and $M$ be an $A$-module.
\begin{enumerate}
\item[(a)] The sheaf $R^pf_*(M)$ is the sheaf associated with the presheaf $Y\mapsto H^p(f^*(Y),M)$.
\item[(b)] The formation of $R^pf_*$ commutes with restriction of scalars.
\item[(c)] The formation $R^pf_*$ commutes with localization. More precisely, for any object $Y$ of $\mathcal{X}$, if we denote by $f_{/X}:\mathcal{X}_{/X}\to \mathcal{Y}_{/Y}$ the induced morphism under localization, where $X=f^*(Y)$, we have, for any $A$-module $M$, a canonical isomorphism
\begin{equation}\label{ringed topos morphism higher direct image prop-1}
R^p(f_{/X})_*(M|_X) \stackrel{\sim}{\to } R^pf_*(M)|_Y\for p\geq 0.
\end{equation}
\end{enumerate}
\end{proposition}
\begin{proof}
We denote by $\hat{f}_*:\PSh(\mathcal{X})\to \PSh(\mathcal{Y})$ the direct image functor for $\mathscr{U}$-presheaves (that is, $\hat{f}_*(M)=M\circ f^*$). As $f^*$ and $f_*$ are adjoints, we have an isomorphism $f_*=(\hat{f}_*)^\#$. But the functors $\#$ and $\hat{f}_*$ are exact, so this implies
\[R^pf_*\cong(\hat{f}_*)^\#\mathcal{H}^p,\]
which is equivalent to assertion (a). Assertion (b) then follows from (a) and \cref{ringed site sheaf cohomology restriction of scalar}. To prove (c), let $Y$ be an object of $\mathcal{Y}$ and consider the induced morphism $f_{/X}:\mathcal{X}_{/X}\to \mathcal{Y}_{/Y}$, where $X=f^*(Y)$. By the definition of the morphism $f_{/X}$, we have the canonical isomorphism
\[(f_{/X})_*(M|_{X}) \stackrel{\sim}{\to } f_*(M)|_Y.\]
The case general for higher direct images is then deduced by noting that the localization functors are exact and transform injective objects into injective objects (\cref{abelian cat adjoint functor exact iff injective to injective}).
\end{proof}

\begin{proposition}\label{ringed topos morphism acyclic direct image prop}
Let $f:\mathcal{X}\to \mathcal{Y}$ be a morphism of topoi and $T$ be a topological generating family of $\mathcal{Y}$. Then the sheaves $M$ acyclic for the functors $H^0(f^*(Y),-)$, $Y\in T$ are acyclic for the functor $f_*$. In particular, the flasque sheaves are acyclic for $f_*$.
\end{proposition}
\begin{proof}
This follows from the assertion of \cref{ringed topos morphism higher direct image prop}~(a).
\end{proof}

\begin{proposition}\label{ringed topos Leray spectral sequence for morphism}
Let $f:\mathcal{X}\to \mathcal{Y}$ be a morphism of topoi and $M$ be an abelian sheaf on $\mathcal{X}$. Then we have a spectral sequence
\begin{equation}\label{ringed topos Leray spectral sequence for morphism-1}
E_2^{p,q}=H^p(\mathcal{Y},R^pf_*(M))\Rightarrow H^{p+q}(\mathcal{X},M).
\end{equation}
More generally, for any object $Y$ of $\mathcal{Y}$, we have a spectral sequence
\begin{equation}\label{ringed topos Leray spectral sequence for morphism-2}
E_2^{p,q}=H^p(Y,R^pf_*(M))\Rightarrow H^{p+q}(f^*(Y),M).
\end{equation}
\end{proposition}
\begin{proof}
By the definitions of the direct image and inverse image functors, we have a canonical isomorphism $H^0(Y,f_*(M)) \stackrel{\sim}{\to } H^0(f^*(Y),M)$. The functor $f_*$ transforms injective objects to flasque objects (\cref{ringed topos morphism on acyclic sheaf}), so the spectral sequence follows from \cref{abelian category G spectral sequence iff injective to acyclic}.
\end{proof}

\begin{remark}[\textbf{Flasque sheaves and changing the universe}]
Let $\mathcal{C}$ be a $\mathscr{U}$-site (for example a $\mathscr{U}$-topos) and $\mathscr{V}$ be a universe containing $\mathscr{U}$. Let $\eps:\Sh(\mathcal{C})_\mathscr{U}\to \Sh(\mathcal{C})_\mathscr{V}$ be the canonical injection functor. Let $F$ be an abelian $\mathscr{U}$-sheaf that is flasque over $\mathcal{C}$. Then for any object $X$ of $\Sh(\mathcal{C})_\mathscr{U}$, we have $H^p(\eps(X),\eps(F))=0$ for $p>0$. Since any object $Y$ in $\Sh(\mathcal{C})_\mathscr{V}$ admits an epimorphic family $\{\eps(X_i)\to Y\}$ where $\eps(X_i)\to Y$ are monomorphisms, we then conclude that
\[H^p(Y,\eps(F))=\llim\nolimits_{\eps(Y)\hookrightarrow Y}^pF(X).\]
By reducing to the topos $\Sh(\Ouv(\mathcal{C}_{/Y}))_\mathscr{V}$ and use the fact that in this topos, a sheaf is flasque if it is locally flasque, we conclude that $\eps(F)$ is flasque.
\end{remark}

\subsection{Local Ext and cohomology with closed support}

\paragraph{The local and lobal Ext}
Let $(\mathcal{X},A)$ be a ringed topos and $M$ be a (left) $A$-module. The functor $N\mapsto\Hom_A(M,N)$ from the category of left $A$-modules to the category of abelian groups is left exact, and its derived functors are then denoted by $\sExt_A^p(M,N)$. In particular, we have
\[\sExt_A^0(M,N)=\sHom_A(M,N).\]
By definition, for any object $X$ of $\mathcal{X}$, we have the following canonical isomorphisms
\[H^0(X,\sExt_A^0(M,N))=\Ext_A^0(X;M,N)=\Hom_{A|_X}(M|_X,N|_X).\]

\begin{proposition}\label{ringed topos sExt porp}
Let $(\mathcal{X},A)$ be a ringed topos and $M,N$ be left $A$-modules.
\begin{enumerate}
    \item[(a)] The formation of $\sExt_A^p$ commutes with localizations. More precisely, for any object $X$ of $\mathcal{X}$, we have a functorial isomorphism
    \begin{equation}\label{ringed topos sExt porp-1}
        \sExt_A^p(M,N)|_X \stackrel{\sim}{\to } \sExt_{A|_X}^p(M|_X,N|_X).
    \end{equation}
    \item[(b)] The sheaf $\sExt_A^p(M,N)$ is the sheaf associated with the presheaf $X\mapsto\Ext_A^p(X;M,N)$.
    \item[(c)] There is a spectral sequence
    \begin{equation}\label{ringed topos sExt porp-2}
        E_2^{p,q}=H^p(\mathcal{X},\sExt_A^p(F,G))\Rightarrow \Ext_A^p(\mathcal{X};M,N).
    \end{equation}
    More generally, for any object $X$ of $\mathcal{X}$, we have a functorial spectral sequence
    \begin{equation}\label{ringed topos sExt porp-3}
        E_2^{p,q}=H^p(X,\sExt_A^p(F,G))\Rightarrow \Ext_A^p(X;M,N).
    \end{equation}
\end{enumerate}
\end{proposition}
\begin{proof}
By the definition of $\sHom$, we have the isomorphism (\ref{ringed topos sExt porp-1}) for $p=0$, so the general case follows from the fact that the localization functor is exact and transforms injective modules to injective modules (\ref{abelian cat adjoint functor exact iff injective to injective}). The functor $N\mapsto\sHom_A(M,N)=\sExt_A^0(M,N)$ transforms injective modules to flasque sheaves (hence flasque for $H^0(X,-)$), so the spectral sequences (\ref{ringed topos sExt porp-2}) and (\ref{ringed topos sExt porp-3}) follow from \cref{abelian category G spectral sequence iff injective to acyclic}. If $X$ varies in $\mathcal{X}$, the spectral sequence (\ref{ringed topos sExt porp-3}) becomes a spectral sequence for presheaves, whence by passing to sheafification, a spectral sequence for presheaves. As the sheaf associated with the presheaf $X\mapsto H^p(X,-)$ is zero for $p>0$ (\cref{ringed site change universe cohomology prop}), this spectral sequence degenerates and we obtain the isomorphism in (b).
\end{proof}

\begin{proposition}\label{ringed topos sExt is delta-functor}
The functors $(M,N)\mapsto\sExt_A^p(M,N)$ form a $\delta$-functor on the variable $M$ or the variable $N$, and the same is true for the functors $(M,N)\mapsto\Ext_A^p(X;M,N)$ for any object $X$ of $\mathcal{X}$.
\end{proposition}
\begin{proof}
This follows from the general property of the functors $\Ext_A^p$ that for any object $X$ of $\mathcal{X}$, the functors $(M,N)\mapsto\Ext_A^p(X;M,N)$ form a $\delta$-functor on each of its variable, whence our assertion in view of \cref{ringed topos sExt porp}~(b).
\end{proof}

\paragraph{Cohomology with support in a closed topos}
Let $(\mathcal{X},A)$ be a ringed topos, $M$ be an $A$-module, $\mathcal{Z}$ be a closed of $\mathcal{X}$ (\cite{SGA4-1} \Rmnum{4}, 9), $\mathcal{U}$ be the complement of $\mathcal{Z}$. We denote by $H^0_\mathcal{Z}(\mathcal{X},M)$ the group of sections of $M$ whose support is contained in $\mathcal{Z}$ (\cite{SGA4-1} \Rmnum{4}, 14) and $\mathcal{H}^0_\mathcal{Z}(M)$ the sub-sheaf of $M$ defined by the section of $M$ "with support in $\mathcal{Z}$" (\cite{SGA4-1} \Rmnum{4}, 14). The functors $H^0_\mathcal{Z}(\mathcal{X},-)$ and $\mathcal{H}^0_\mathcal{Z}(-)$ are both left exact by (\cite{SGA4-1} \Rmnum{4}, 14). Their right derived functors are denoted by $H^p_\mathcal{Z}(\mathcal{X},-)$ and $H_\mathcal{Z}^p(-)$, respectively, and called the cohomology group (resp. sheaf) of $M$ with support in $\mathcal{Z}$.\par
We have the following canonical isomorphisms (\cite{SGA4-1} \Rmnum{4}, 14):
\begin{gather}
H^0_\mathcal{Z}(\mathcal{X},M) \stackrel{\sim}{\to } \Hom_A(A_\mathcal{Z},M) \stackrel{\sim}{\to } \Ext_A^0(\mathcal{X};A_\mathcal{Z},M),\label{ringed topos closed cohomology group isomorphism-1}\\
\mathcal{H}^0_\mathcal{Z}(M) \stackrel{\sim}{\to } \sHom_A(A_\mathcal{Z},M) \stackrel{\sim}{\to } \sExt_A^0(A_\mathcal{Z},M),\label{ringed topos closed cohomology sheaf isomorphism-1}
\end{gather}
whence the isomorphisms for $p\geq 0$:
\begin{gather}
H^p_\mathcal{Z}(\mathcal{X},M) \stackrel{\sim}{\to } \Ext_A^p(\mathcal{X};A_\mathcal{Z},M),\label{ringed topos closed cohomology group isomorphism-2}\\
\mathcal{H}^p_\mathcal{Z}(M) \stackrel{\sim}{\to } \sExt_A^p(A_\mathcal{Z},M).\label{ringed topos closed cohomology sheaf isomorphism-2}
\end{gather}
We remark that, since $A_\mathcal{Z}$ is a bimodule, the sheaves $\Ext_A^p(A_\mathcal{Z},M)\cong\mathcal{H}^p_\mathcal{Z}(M)$ are canonically endowed with a structure of $A$-modules.\par
For any object $X$ of $\mathcal{X}$, let $\mathcal{Z}_{/X}$ be the sub-topos of $\mathcal{X}_{/X}$ induced by localization (which is the complement of $\mathcal{U}\times X$). By definition, we have a canonical isomorphism
\begin{equation}\label{ringed topos closed cohomology localization-1}
H^0(X,\mathcal{H}_\mathcal{Z}^0(M)) \stackrel{\sim}{\to } \mathcal{H}^0_{\mathcal{Z}_{/X}}(\mathcal{X}_{/X},M|_X).
\end{equation}
If we define
\begin{equation}\label{ringed topos closed cohomology group on X-1}
H^p_\mathcal{Z}(X,M):=H^p_{\mathcal{Z}_{/X}}(\mathcal{X}_{/X},M|_X)
\end{equation}
we then have, in view of (\ref{ringed topos closed cohomology sheaf isomorphism-1}), canonical isomorphisms
\begin{equation}\label{ringed topos closed cohomology group on X-2}
H^p_\mathcal{Z}(X,M) \stackrel{\sim}{\to } \Ext_A^p(X;A_\mathcal{Z},M).
\end{equation}

\begin{proposition}\label{ringed topos closed cohomology prop}
Let $(\mathcal{X},A)$ be a ringed topos and $\mathcal{Z}$ be a closed of $\mathcal{X}$.
\begin{enumerate}
    \item[(a)] The formation of $\mathcal{H}_\mathcal{Z}^p$ commutes with localizations. More precisely, for any object $X$ of $\mathcal{X}$ and any $A$-module $M$, we have canonical isomorphisms
    \begin{equation}\label{ringed topos closed cohomology prop-1}
    \mathcal{H}^p_\mathcal{Z}(M)|_X \stackrel{\sim}{\to } \mathcal{H}^p_{\mathcal{Z}_{/X}}(M|_X).
    \end{equation}
    \item[(b)] The sheaf $\mathcal{H}^p_\mathcal{Z}(M)$ is the sheaf associated with the presheaf $X\mapsto H^p_\mathcal{Z}(X,M)$.
    \item[(c)] There exists a spectral sequence
    \begin{equation}\label{ringed topos closed cohomology prop-2}
        E_2^{p,q}=H^p(\mathcal{X},\mathcal{H}^p_{\mathcal{Z}}(M))\Rightarrow H^{p+q}_\mathcal{Z}(\mathcal{X},M).
    \end{equation}
    More generally, for any object $X$ of $\mathcal{X}$, there is a spectral sequence
    \begin{equation}\label{ringed topos closed cohomology prop-3}
        E_2^{p,q}=H^p(\mathcal{X},\mathcal{H}^p_{\mathcal{Z}}(M))\Rightarrow H^{p+q}_\mathcal{Z}(\mathcal{X},M).
    \end{equation}
\end{enumerate}
\end{proposition}
\begin{proof}
From the isomorphisms (\ref{ringed topos closed cohomology group isomorphism-1}) and (\ref{ringed topos closed cohomology sheaf isomorphism-1}), the proposition is a particular case of \cref{ringed topos sExt porp}.
\end{proof}

\begin{proposition}\label{ringed topos closed cohomology exact sequence}
With the notations of \cref{ringed topos closed cohomology prop}, let $j:\mathcal{U}\to \mathcal{X}$ be the canonical inclusion. For any $A$-module $M$, there exist an exact sequence of sheaves:
\begin{equation}\label{ringed topos closed cohomology exact sequence-1}
\begin{tikzcd}
0\ar[r]&\mathcal{H}^0_\mathcal{Z}(M)\ar[r]&M\ar[r]&j_*(M|_U)\ar[r]&\mathcal{H}^1_\mathcal{Z}(M)\ar[r]&0
\end{tikzcd}
\end{equation}
and isomorphisms for $p\geq 2$:
\begin{equation}\label{ringed topos closed cohomology exact sequence-2}
\mathcal{H}^p_\mathcal{Z} \stackrel{\sim}{\to } \sExt_A^{p-1}(A_\mathcal{U},M) \stackrel{\sim}{\to } R^{p-1}j_*(M|_U).
\end{equation}
Moreover, we have a long exact sequence
\begin{equation}\label{ringed topos closed cohomology exact sequence-3}
\begin{tikzcd}
\cdots\ar[r]&H^p_\mathcal{Z}(\mathcal{X},M)\ar[r]&H^p(\mathcal{X},M)\ar[r]&H^p(\mathcal{U},M)\ar[r]&H^{p+1}(\mathcal{X},M)\ar[r]&\cdots
\end{tikzcd}
\end{equation}
and more generally, for any object $X$ of $\mathcal{X}$, we have a long exact sequence
\begin{equation}\label{ringed topos closed cohomology exact sequence-4}
\begin{tikzcd}
\cdots\ar[r]&H^p_\mathcal{Z}(X,M)\ar[r]&H^p(X,M)\ar[r]&H^p(X\times\mathcal{U},M)\ar[r]&H^{p+1}(\mathcal{X},M)\ar[r]&\cdots
\end{tikzcd}
\end{equation}
\end{proposition}
\begin{proof}
By the definition of $A_\mathcal{Z}$, we have an exact sequence (\cite{SGA4-1} \rmnum{4}, 14)
\begin{equation}\label{ringed topos closed cohomology exact sequence-5}
\begin{tikzcd}
0\ar[r]&A_\mathcal{U}\ar[r]&A\ar[r]&A_\mathcal{Z}\ar[r]&0
\end{tikzcd}
\end{equation}
We have $\sHom_A(A_\mathcal{U},M)\cong j_*(M|_U)$ (\cite{SGA4-1} \rmnum{4}, 14), so $\sExt_A^p(A_\mathcal{U},M)\cong R^pj_*(M|_U)$ by (\ref{ringed topos Ext localization to object}). On the other hand, the functor $\sExt_A^p(A,-)$ is zero for $p>0$ and $\sExt_A^p(A_\mathcal{Z},M)\cong\mathcal{H}^p_\mathcal{Z}(M)$, so the exact sequences (\ref{ringed topos closed cohomology exact sequence-1}) and (\ref{ringed topos closed cohomology exact sequence-2}) follow from induced the long exact sequence of $\sExt_A(-,M)$. The long exact sequences (\ref{ringed topos closed cohomology exact sequence-2}) and (\ref{ringed topos closed cohomology exact sequence-3}) follows from the long exact sequence of the $\delta$-functors $\Ext_A^p(X;-,M)$ (note that $\Ext_A^p(X;A,-)$ is usually nontrivial).
\end{proof}

\begin{proposition}\label{ringed topos closed cohomology flasque is aycyclic}
With the notations of \cref{ringed topos closed cohomology exact sequence}:
\begin{enumerate}
    \item[(a)] the flasque sheaves are acyclic for the functors $\mathcal{H}^0_\mathcal{Z}$ and $H^0_\mathcal{Z}(X,-)$;
    \item[(b)] the functors $\mathcal{H}^p_\mathcal{Z}$ and $H^p_\mathcal{Z}(X,-)$ commutes with restriction of scalars.
\end{enumerate}
\end{proposition}
\begin{proof}
Let $M$ be a flasque sheaf. Then \cref{ringed topos closed cohomology exact sequence} implies the equality $H_\mathcal{Z}^p(X,M)=0$ for any $X$ and any $p\geq 2$, and there is an exact sequence
\[\begin{tikzcd}
0 \ar[r] & H^0_\mathcal{Z}(X,M) \ar[r] & H^0(X,M) \ar[r] & H^0(X\times\mathcal{U},M) \ar[r] & H^1_\mathcal{Z}(X,M) \ar[r] & 0
\end{tikzcd}\]
Since the sheaf $M$ is flasque, the morphism $H^0(X,M)\to H^0(X\times\mathcal{U},M)$ is surjective (\cref{ringed topos flasque sheaf restriction surjective}), so $H^1_\mathcal{Z}(X,M)=0$ and $M$ is acyclic for $H^0_\mathcal{Z}(X,M)$. By passing to associate sheaf, we conclude that $M$ is acyclic for $\mathcal{H}^0_\mathcal{Z}$ (\cref{ringed topos closed cohomology prop}). It is clear that the functors $\mathcal{H}^0_\mathcal{Z}$ and $H^0_\mathcal{Z}(X,-)$ commutes with restriction of scalars, and as the flasque sheaves are acyclic for them, assertion (b) follows from \cref{abelian category G spectral sequence iff injective to acyclic}.
\end{proof}

\begin{proposition}\label{ringed topos closed cohomology of Hom isomorphism}
Let $(\mathcal{X},A)$ be a ringed topos, $\mathcal{Z}$ be a closed of $\mathcal{X}$, $\mathcal{U}$ be the open complement of $\mathcal{Z}$, $M$, $N$ be two $A$-modules. There exists a functorial isomorphism comtatible with closed base change:
\begin{equation}\label{ringed topos closed cohomology of Hom isomorphism-1}
\mathcal{H}^0_\mathcal{Z}(\sHom_A(M,N)) \stackrel{\sim}{\to } \sHom_A(M,\mathcal{H}^0_\mathcal{Z}(N)) \stackrel{\sim}{\to } \sHom_A(M\otimes_AA_\mathcal{Z},N).
\end{equation}
\end{proposition}
\begin{proof}
This is the result of (\cite{SGA4-1} \rmnum{4}, 14), in view of (\ref{ringed topos closed cohomology sheaf isomorphism-1}). 
\end{proof}

In view of the results of \cref{ringed topos closed cohomology of Hom isomorphism}, we put
\begin{equation}\label{ringed topos sheaf Hom with support closed-1}
\sHom_{A,\mathcal{Z}}(M,N)=\mathcal{H}^0_\mathcal{Z}(\sHom_A(M,N)).
\end{equation}
It is easy to see that the functor $N\mapsto\sHom_{A,\mathcal{Z}}(M,N)$ is left exact. Its right derived functors are denoted by $\sExt_{A,\mathcal{Z}}^p(M,N)$, and called the extension sheaf with support in $\mathcal{Z}$. With this definition, we then have
\begin{equation}\label{ringed topos sheaf Hom with support closed-2}
\sExt_{A,\mathcal{Z}}^0(M,N)=\sHom_{A,\mathcal{Z}}(M,N).
\end{equation}
If $M_\mathcal{Z}=M\otimes_AA_\mathcal{Z}$, then it follows from (\cite{SGA4-1} \rmnum{4}, 14) that $M_\mathcal{Z}$ is equal to the direct image of the inverse image of $M$ to $\mathcal{Z}$. We then have, in view of \cref{ringed topos closed cohomology of Hom isomorphism}, that
\begin{equation}\label{ringed topos sheaf Hom with support closed-3}
\sExt_{A,\mathcal{Z}}^p(M,N)=\sExt_A^p(M_\mathcal{Z},N).
\end{equation}
We now pass from local to global invariants, so define
\begin{equation}\label{ringed topos Hom with support closed-1}
\Hom_{A,\mathcal{Z}}(M,N):=\Ext_{A,\mathcal{Z}}^0(\mathcal{X};M,N)=H_\mathcal{Z}^0(\mathcal{X},\sHom_A(M,N)).
\end{equation}
The group $\Hom_{A,\mathcal{Z}}(M,N)$ is the subgroup of $\Hom_A(M,N)$ with support contained in $\mathcal{Z}$ (\cite{SGA4-1} \rmnum{4}, 14), i.e. which is zero over $\mathcal{U}$. More generally, for any objet $X$ of $\mathcal{X}$, we set
\begin{equation}\label{ringed topos Hom with support closed-2}
\Ext_{A,\mathcal{Z}}^0(X;M,N):=H_\mathcal{Z}^0(X,\sHom_A(M,N)).
\end{equation}
The functor $N\mapsto\Ext_{A,\mathcal{Z}}^0(X;M,N)$ is clearly left exact, its derived functors are then denoted by $\Ext_{A,\mathcal{Z}}^p(X;M,N)$ and called the extension group of $M$ and $N$ with support in $\mathcal{Z}$. The definition (\ref{ringed topos closed cohomology group on X-1}), (\ref{ringed topos sheaf Hom with support closed-1}) and (\ref{ringed topos Hom with support closed-2}) and the isomorphism of \cref{ringed topos closed cohomology of Hom isomorphism} then give the following isomorpihsms
\begin{equation}\label{ringed topos Hom with support closed-3}
\Ext_{A,\mathcal{Z}}^0(X;M,N) \stackrel{\sim}{\to } H^0(X,\sHom_{A,\mathcal{Z}}(M,N)) \stackrel{\sim}{\to } \Ext_A^0(X;M,\mathcal{H}_\mathcal{Z}^0(N)) \stackrel{\sim}{\to } \Ext_A^0(X;M_\mathcal{Z},N).
\end{equation}
whence the following isomorphisms
\begin{equation}\label{ringed topos Hom with support closed-4}
\Ext_{A,\mathcal{Z}}^p(X;M,N) \stackrel{\sim}{\to } \Ext_A^p(X;M_\mathcal{Z},N).
\end{equation}

\begin{proposition}\label{ringed topos sheaf Hom with support closed spectral sequence}
Let $(\mathcal{X},A)$ be a ringed topos and $\mathcal{Z}$ be a closed of $\mathcal{X}$.
\begin{enumerate}
    \item[(a)] There exist two functorial spectral sequence 
    \begin{equation}\label{ringed topos sheaf Hom with support closed spectral sequence-1}
    \left.\begin{array}{l}
    _{\Rmnum{1}}E_2^{p,q}=\mathcal{H}_\mathcal{Z}^p(\sExt_A^p(M,N))\\[8pt]
    _{\Rmnum{2}}E_2^{p,q}=\sExt_A^p(M,\mathcal{H}_\mathcal{Z}^p(N))    
    \end{array}\right\}
    \Rightarrow \sExt_{A,\mathcal{Z}}^{p+q}(M,N)
    \end{equation}
    which are compatible with closed base changes.
    \item[(b)] There exist three functorial spectral sequence 
    \begin{equation}\label{ringed topos sheaf Hom with support closed spectral sequence-2}
    \left.\begin{array}{l}
    _{\Rmnum{1}}E_2^{p,q}=H_\mathcal{Z}^p(X,\sExt_A^p(M,N))\\[8pt]
    _{\Rmnum{2}}E_2^{p,q}=H^p(X,\sExt_{A,\mathcal{Z}}^p(M,N))\\[8pt]
    _{\Rmnum{3}}E_2^{p,q}=\Ext_A^p(X;M,\mathcal{H}_\mathcal{Z}^p(N))
    \end{array}\right\}
    \Rightarrow \Ext_{A,\mathcal{Z}}^{p+q}(X;M,N)
    \end{equation}
    \item[(c)] The sheaf $\sExt_{A,\mathcal{Z}}^p(M,N)$ is the sheaf associated with the presheaf $X\mapsto\Ext_{A,\mathcal{Z}}^p(X;M,N)$.
\end{enumerate}
\end{proposition}
\begin{proof}
If $N$ is injective, the sheaf $\sHom_A(M,N)$ is flasque by \cref{ringed topos injective sheaf sHom is exact}, hence acyclic for $\mathcal{H}^0_\mathcal{Z}$ (\cref{ringed topos closed cohomology flasque is aycyclic}). The first spectral sequence of (\ref{ringed topos sheaf Hom with support closed spectral sequence-1}) then follows from (\ref{ringed topos sheaf Hom with support closed-1}) and \cref{abelian category G spectral sequence iff injective to acyclic}. Similarly, if $N$ is injective, $\mathcal{H}_\mathcal{Z}^0(N)$ is injective (\cref{ringed topos flasque injective sheaf restriction prop}), so the second spectral sequence of (\ref{ringed topos sheaf Hom with support closed spectral sequence-1}) follows from \cref{abelian category G spectral sequence iff injective to acyclic} and the second isomorphism of (\ref{ringed topos closed cohomology of Hom isomorphism-1}). The spectral sequences of (\ref{ringed topos sheaf Hom with support closed spectral sequence-2}) similarly follow from \cref{abelian category G spectral sequence iff injective to acyclic} and the first two isomorphisms of (\ref{ringed topos Hom with support closed-3}) and (\ref{ringed topos Hom with support closed-2}). Finally, by varying $X$ in the second spectral sequence of (\ref{ringed topos sheaf Hom with support closed spectral sequence-2}), we obtain a spectral sequence
\[E_2^{p,q}=\mathcal{H}^p(\sExt_{A,\mathcal{Z}}^p(M,N))\Rightarrow (X\mapsto \Ext_{A,\mathcal{Z}}^p(X;M,N)).\]
By passing to the associated sheaves and apply (\ref{ringed site change universe cohomology prop}), we obtain a degenerate spectral sequence of sheaves, which provides the isomorphism of (c).
\end{proof}

\begin{proposition}\label{ringed topos sheaf Hom with support closed long exact sequence}
The functors $(M,N)\mapsto\sExt_{A,\mathcal{Z}}^p(M,N)$ and $(M,N)\mapsto\Ext_{A,\mathcal{Z}}^p(X;M,N)$ are $\delta$-functors on each of its variables. If $M_\mathcal{U}$ is the sheaf $M\otimes_AA_\mathcal{U}$, we have a long exact sequence
\begin{equation}\label{ringed topos sheaf Hom with support closed long exact sequence-1}
\begin{tikzcd}[column sep=6mm]
\cdots\ar[r,"\delta"]&\sExt_{A,\mathcal{Z}}^p(M,N)\ar[r]&\sExt_A^p(M,N)\ar[r]&\sExt_A^p(M_\mathcal{U},N)\ar[r,"\delta"]&\sExt_{A,\mathcal{Z}}^{p+1}(M,N)\ar[r]&\cdots
\end{tikzcd}
\end{equation}
and a similar long exact sequence by replacing $\sExt$ with $\Ext$.
\end{proposition}
\begin{proof}
The functors $\sExt_A^p(-,-)$ and $\Ext_A^p(X;-,-)$ are $\delta$-functors on each variables, and $M\mapsto M_\mathcal{Z}$ is  exact because $A_\mathcal{Z}$ is flat (\cref{ringed topos closed immersion flat module direct image flat}). The first assertion then follows from the isomorphisms (\ref{ringed topos sheaf Hom with support closed-3}) and (\ref{ringed topos Hom with support closed-4}). The long exact sequence (\ref{ringed topos sheaf Hom with support closed long exact sequence-1}) can be induced from the exact sequence
\[\begin{tikzcd}
0\ar[r]&M_\mathcal{U}\ar[r]&M\ar[r]&M_\mathcal{Z}\ar[r]&0
\end{tikzcd}\]
in view of (\ref{ringed topos sheaf Hom with support closed-3}) and (\ref{ringed topos Hom with support closed-4}).
\end{proof}

\section{Cohomological descent}
Let $X$ be a topological space and $\mathfrak{U}=(U_i)_{i\in I}$ be a covering of $X$, which we suppose to be open or locally finite and closd. Let $\mathscr{F}$ be an abelian sheaf over $X$, the Leray spectral sequence
\begin{equation}\label{cohomology descent introduction-1}
\check{H}^p(\mathfrak{U},\mathcal{H}^p(X,\mathscr{F}))\Rightarrow H^{p+q}(X,\mathscr{F})
\end{equation}
defined by $\mathfrak{U}$ can be described as follows: The covering $\mathfrak{U}$ defines a \v{C}ech resolution $\mathscr{C}^\bullet(\mathfrak{U},\mathscr{F})$, which is functorial on $\mathscr{F}$. On the other hand, for any sheaf $\mathscr{F}$ we have a canonical flasque resolution $C^\bullet(\mathscr{F})$, which is also functorial on $\mathscr{F}$. With these notations, the spectral sequence (\ref{cohomology descent introduction-1}) is obtained, in the case where $\mathfrak{U}$ is an open covering, from the following double complex
\[\Gamma(X,\mathscr{C}^\bullet(\mathfrak{U},C^\bullet(\mathscr{F}))),\]
and in the case where $\mathfrak{U}$ is locally finite and closed, from the following double complex
\[\Gamma(X,C^\bullet(\mathscr{C}^\bullet(\mathfrak{U},\mathscr{F}))).\]
We now seek a unified description of these double complexes. Let $X_0$ be the direct sum of the topological spces $U_i$ and $X_n$ be the~$(n+1)$-fold fiber product of $X_0$ over $X$:
\begin{equation}\label{cohomology descent introduction-2}
X_n=\prod_{i_0,\dots,i_n\in I}U_{i_0}\cap\cdots\cap U_{i_n}=\prod_{\sigma\in\Hom([n],I)}U_{\sigma(0)}\cap\cdots\cap U_{\sigma(n)}.
\end{equation}
The $X_n$ then form a simplicial system of topological spaces, and if $j_n:X_n\to X$ is the canonical projection, we have 
\begin{equation}\label{cohomology descent introduction-3}
\mathscr{C}^n(\mathfrak{U},\mathscr{F})=(j_n)_*j_n^*(\mathscr{F}).
\end{equation}
Note that the formation of the canonical flasque resolution commutes with restriction to open subsets and direct image under a closed immersions, so
\begin{enumerate}
\item[(a)] if $\mathfrak{U}$ is open, 
\[\mathscr{C}^p(\mathfrak{U},C^q(\mathscr{F}))=(j_q)_*j_q^*(C^p(\mathscr{F}))=(j_q)_*(C^p(j_q^*(\mathscr{F})));\]
\item[(b)] if $\mathfrak{U}$ is closed and locally finite,
\[C^p(\mathscr{C}^q(\mathfrak{U},\mathscr{F}))=C^p((j_q)_*j_q^*(\mathscr{F}))=(j_q)_*(C^p(j_q^*(\mathscr{F}))).\]
\end{enumerate}
Therefore, to obtain a unified description of (\ref{cohomology descent introduction-1}), we see that it suffices to take the canonical flasque resolution of $j_q^*(\mathscr{F})$ over $X_q$ for all $q$, and then apply the functor $(j_q)_*$ to this resolution.\par
We also note that this description is in fact meaningful for any simplicial system of spaces topological above $X$:
\[\Delta^0\to \mathbf{Top}_{/X},\quad [n]\mapsto X_n.\]
However, in this case the double complex
\begin{equation}\label{cohomology descent introduction-4}
(j_q)_*(C^p(j_q^*(\mathscr{F})))
\end{equation}
is not in general a resolution of $\mathscr{F}$. We are then devoted to find sufficient conditions for which (\ref{cohomology descent introduction-4}) is a resolution of $\mathscr{F}$. In this case, the spectral sequence (\ref{cohomology descent introduction-1}) is generalized to a spectral sequence
\begin{equation}\label{cohomology descent introduction-5}
\check{H}^p(H^q(X_p,j_p^*(\mathscr{F})))\Rightarrow H^{p+q}(X,\mathscr{F})
\end{equation}
which is called the \textit{descent spectral sequence}.

\subsection{Topoi over a fixed category}
In this section, we fix a universe $\mathscr{U}$ and only consider $\mathscr{U}$-topoi. We shall make constant use of the language of fibre categories, introduced in \autoref{fibre cat category section}. Let's just fix some notations: if $\mathcal{F}\to \mathcal{E}$ is a fibrant (resp. cofibrant) functor, for a morphism $f:T\to S$, we denote by $f^*:\mathcal{F}_S\to \mathcal{F}_T$ (resp. $f_*:\mathcal{F}_T\to \mathcal{F}_S$) the inverse image (resp. direct image) functor associated with $\mathcal{F}$; each of these functors is defined up to a unique functorial isomorphism. If $F:\mathcal{F}\to \mathcal{G}$ is a $\mathcal{E}$-functor, for any object $S$ of $\mathcal{E}$, we denote by $F_S:\mathcal{F}_S\to \mathcal{G}_S$ the restriction functor induced by $F$ on categorical fibers.

\paragraph{\texorpdfstring{$\mathcal{E}$}{E}-topoi}
Let $\mathcal{E}$ be a category and $p:\mathcal{X}\to \mathcal{E}$ be a bifibrant functor. We say that $\mathcal{X}$ is a \textbf{$\mathcal{E}$-topos} if the following categories are satisfied:
\begin{enumerate}[leftmargin=40pt]
\item[(F1)] For any object $S$ of $\mathcal{E}$, the categorical fiber $\mathcal{X}_S$ is a topos.
\item[(F2)] For any morphism $f:T\to S$ in $\mathcal{E}$, there exists a morphism of topoi $\alpha:\mathcal{X}_S\to \mathcal{X}_T$ such that $f_*=\alpha^*$ and $f^*=\alpha_*$.
\end{enumerate}

We recall that if $\mathcal{X}$ and $\mathcal{Y}$ are topoi, a morphism from $\mathcal{X}$ to $\mathcal{Y}$ consists of an adjoint pair $(\Phi^*,\Phi_*)$ of functors
\[\Phi_*:\mathcal{X}\to \mathcal{Y},\quad \Phi^*:\mathcal{Y}\to \mathcal{X}\]
such that $\Phi^*$ is left exact (i.e. commutes with finite projective limits). Therefore, consition (F2) of $\mathcal{E}$-topos is just saying that the functor $f_*$ is left exact, since we can then take the adjoint pair $(f_*,f^*)$ to be the required morphism. If $\mathcal{E}=\Delta$ (resp. $\Delta\times\Delta$), a $\Delta$-topos (resp. $\Delta\times\Delta$-topos) is then called a \textbf{simplicial topos} (resp. \textbf{bisimplicial topos}).\par

In practice, we often encounter $\mathcal{E}$-topoi induced by fibre categories fibered into dual topoi. Here is the precise definition of this terminology:
\begin{definition}
Let $\mathcal{F}$ be a bifibre category over $\mathcal{E}$. We say that $\mathcal{F}$ is \textbf{bifibered into dual topoi over $\mathcal{E}$} if $\mathcal{F}^{\op}$ is an $\mathcal{E}^{\op}$-topos.
\end{definition}

Explicitly, a bifibre category $\mathcal{F}$ over $\mathcal{E}$ is bifibered into dual topoi over $\mathcal{E}$ if it satisfies the following conditions:
\begin{enumerate}[leftmargin=40pt]
\item[(FD1)] For any object $S$ of $\mathcal{E}$, the dual $\mathcal{F}^{\op}_S$ of the categorical fiber $\mathcal{F}_S$ is a topoi.
\item[(FD2)] For any morphism $f:T\to S$ in $\mathcal{E}$, there exists a morphism of topoi $\alpha:\mathcal{F}_S\to \mathcal{F}_T$ such that $\alpha^*=f^*$, $\alpha_*=f_*$ (or equivalently, the functor $f^*$ is left exact).
\end{enumerate}

Recall that a functor $X:\mathcal{D}^{\op}\to \mathcal{E}$ is often called an \textbf{$\mathcal{D}$-object} of $\mathcal{E}$, and we denote by $X_i$ the image of an object $i$ in $\mathcal{D}$ under $X$. The $\mathcal{D}$-objects of $\mathcal{E}$ then form a category, which is denoted by $\mathcal{E}_\mathcal{D}$. If $S$ is an object of $\mathcal{E}$, an $\mathcal{D}$-object of $\mathcal{E}_{/S}$ is also called a \textbf{$\mathcal{D}$-object augmented by $S$}. If $\mathcal{F}\to \mathcal{E}$ be a bifibre category into dual topoi over $\mathcal{E}$ and $X:\mathcal{D}^{\op}\to \mathcal{E}$ is a $\mathcal{D}$-object of $\mathcal{E}$, then the fiber product $(\mathcal{D}^{\op}\times_\mathcal{E}\mathcal{F})^{\op}$ is a $\mathcal{D}$-topos, which we denote by $X_\mathcal{F}$. Note that if $i$ is an object of $\mathcal{D}$, the fiber of $X_\mathcal{F}$ is then given by
\begin{equation}\label{topos fibre given by D-object-1}
(X_\mathcal{F})_i=(\mathcal{D}^{\op}\times_\mathcal{E}\mathcal{F})^{\op}\times_\mathcal{D}i=\mathcal{F}^{\op}\times_{\mathcal{E}^{\op}}\mathcal{D}\times_\mathcal{D}i=\mathcal{F}^{\op}\times_{\mathcal{E}^{\op}}X_i=\mathcal{F}_{X_i}^{\op}.
\end{equation}
The $\mathcal{D}$-topos $X_\mathcal{F}$ obtained from a bifibre category into dual topoi over $\mathcal{E}$ and any $\mathcal{D}$-object $X$ is called the \textbf{topos induced by $X$}.

\begin{example}\label{topos fibre D-object given by fiber product}
Suppose that the category $\mathcal{E}$ possesses finite fiber products. Let $f:T\to S$ be a morphism in $\mathcal{E}$. The bifunctor
\[\Delta^{\op}\times(\mathcal{E}_{/S})^{\op}\to \mathbf{Set}, \quad ([n],U)\mapsto\Hom_{\mathbf{Set}}([n],\Hom_S(U,T))\]
then defines a functor
\[\Delta^{\op}\to \mathcal{E}_{/S},\quad [n]\mapsto T_n\]
where $T_n=T\times_S\cdots\times_ST$ is the~$(n+1)$-fold fiber product representing the functor
\[Z\mapsto\Hom_{\mathbf{Set}}([n],\Hom_S(Z,T)).\]
In this way, we have defined a semi-simplicial object augmented by $S$, which is denoted by $[T|_fS]$ or $[T|S]$.\par
If $X$ and $Y$ are two semi-simplicial objects of $\mathcal{E}$ (or of $\mathcal{E}_{/S}$) and $u:X\to Y$ is a morphism of functors, we can similarly define a simplicial object $[X|_uY]$ of $\mathcal{E}_{\Delta}$, which can be interpreted as a bisimplicial object of $\mathcal{E}$, using the isomorphism $(\mathcal{E}_{\Delta})_\Delta\stackrel{\sim}{\to }\mathcal{E}_{\Delta\times\Delta}$.
\end{example}

Let $\mathcal{X}$ be a $\mathcal{E}$-topos and $\bm{\Gamma}(\mathcal{X}/\mathcal{E})$ be the category $\sHom_{/\mathcal{E}}(\mathcal{X},\mathcal{E})$. Let $\lambda:\mathcal{E}'\to \mathcal{E}$ be a functor; the category $\mathcal{E}'\times_\mathcal{E}\mathcal{X}$ is then a $\mathcal{E}'$-topos, and by composing with $\lambda$ we obtain a functor
\[\lambda^*:\bm{\Gamma}(\mathcal{X}/\mathcal{E})\to \bm{\Gamma}(\mathcal{E}'\times_\mathcal{E}\mathcal{X}/\mathcal{E}').\]
In the case where $\mathcal{E}'$ is reduced to a single object $S$ of $\mathcal{E}$ (with identity morphism) and $\lambda$ is the canonical inclusion, the category $\mathcal{E}'\times_\mathcal{E}\mathcal{X}$ is then the fiber $\mathcal{X}_S$, and the functor $\lambda^*$ is identified with the evaluation functor
\begin{equation}\label{topos fibre evaluation functor def}
i_S^*:\bm{\Gamma}(\mathcal{X}/\mathcal{E})\to \mathcal{X}_S,\quad u\mapsto u(S).
\end{equation}

\begin{proposition}\label{topos fibre inverse image on section adjoint exist}
If $\mathcal{E}'$ is a $\mathscr{U}$-small category, the functor $\lambda^*$ possesses a right adjont $\lambda_*$ and a left adjoint $\lambda_!$. 
\end{proposition} 
This in fact follows from a slight generalization of Kan's lemma, which we shall use frequently.
\begin{lemma}\label{fibre cat pullback on Hom adjoint exist lemma}
Let $\mathcal{I},\mathcal{J}$ and $\mathcal{A}$ be cetegories over a category $\mathcal{E}$, and suppose that $\mathcal{I}$ is $\mathscr{U}$-small and that $\mathcal{A}$ is bifibre over $\mathcal{E}$. Let $\lambda:\mathcal{I}\to \mathcal{J}$ be a $\mathcal{E}$-functor and
\[\lambda^*:\sHom_{/\mathcal{E}}(\mathcal{J},\mathcal{A})\to \sHom_{/\mathcal{E}}(\mathcal{I},\mathcal{A})\]
be the functor induced by composition with $\lambda$. If in each fiber of $\mathcal{A}$ over $\mathcal{E}$, the $\mathscr{U}$-inductive limits (resp. projective limits) exist, then $\lambda$ possesses a left adjoint (resp. a right adjoint).
\end{lemma}
\begin{proof}

\end{proof}

\begin{corollary}\label{topos fibre evaluation functor adjoint char}
Let $\mathcal{X}$ be a $\mathcal{E}$-topos and $S$ be an object of $\mathcal{E}$. Then the evaluation functor $i_S^*:\bm{\Gamma}(\mathcal{X}/\mathcal{E})\to \mathcal{X}_S$ admits a left adjoint $(i_S)_!$ and a right adjoint $(i_S)_*$:
\begin{gather}
(i_S)_!:\mathcal{X}_S\to \bm{\Gamma}(\mathcal{X}/\mathcal{E}), \quad \xi \mapsto \big(T\mapsto\coprod_{f\in\Hom_\mathcal{E}(S,T)}f_*(\xi)\big),\label{topos fibre evaluation functor adjoint char-1}\\
(i_S)_*:\mathcal{X}_S\to \bm{\Gamma}(\mathcal{X}/\mathcal{E}), \quad \xi \mapsto \big(T\mapsto\prod_{f\in\Hom_\mathcal{E}(T,S)}f^*(\xi)\big).\label{topos fibre evaluation functor adjoint char-2}
\end{gather}
\end{corollary}

\begin{proposition}\label{topos fibre section category is topos}
Let $\mathcal{E}$ be a $\mathscr{U}$-small category and $\mathcal{X}$ be a $\mathcal{E}$-topos. Then the category $\bm{\Gamma}(\mathcal{X}/\mathcal{E})$ is a $\mathscr{U}$-topos.
\end{proposition}
\begin{proof}
By considering the fibers of $\mathcal{X}$ and using \cref{fibre cat pullback on Hom adjoint exist lemma}, we verify that $\bm{\Gamma}(\mathcal{X}/\mathcal{E})$ satisfies the following conditions:
\begin{enumerate}
\item[(a)] Finite projective limits exist.
\item[(b)] Small direct sums exist, and are disjoint and universal.
\item[(c)] The equivalence relations are universally effective.
\end{enumerate}
It then remains to prove that $\bm{\Gamma}(\mathcal{X}/\mathcal{E})$ possesses a $\mathscr{U}$-small generating family. For this, note that if for any object $S$ of $\mathcal{E}$, $(\xi^S_\alpha)_{\alpha\in I_S}$ is a generating family of $\mathcal{X}_S$ (where $I_S$ is a $\mathscr{U}$-small set), the family $((i_S)_!(\xi^S_\alpha))_{S,\alpha}$ is then a generating family of $\bm{\Gamma}(\mathcal{X}/\mathcal{E})$.
\end{proof}

We now consider the notion of morphisms between $\mathcal{E}$-topoi. For this, we need the following terminology: let $F:\mathcal{F}\to\mathcal{G}$ be an $\mathcal{E}$-functor, a \textbf{left $\mathcal{E}$-adjoint} of $F$ is defined to be a functor $G:\mathcal{G}\to\mathcal{F}$ which is left adjoint to $F$ and such that the canonical morphisms $1\to GF$ and $FG\to 1$ are $\mathcal{E}$-morphisms. Under this conditions, it is easy to verify that if $F$ is Cartesian, then $G$ is also Cartesian.

\begin{definition}
Let $\mathcal{X}$ and $\mathcal{Y}$ be $\mathcal{E}$-topoi. A \textbf{morphism} from $\mathcal{X}$ to $\mathcal{Y}$ is a couple of $\mathcal{E}$-functors 
\[\Phi_*:\mathcal{X}\to\mathcal{Y},\quad \Phi^*:\mathcal{Y}\to\mathcal{X}\]
endowed with a $\mathcal{E}$-adjunction
\[\mu:\Hom_\mathcal{X}(\Phi^*(-),-) \stackrel{\sim}{\to } \Hom_\mathcal{Y}(-,\Phi_*(-)),\]
such that for any object $S$ of $\mathcal{E}$, the couple $(\Phi_*(S),\Phi^*(S))$, endowed with the adjunction induced by $\mu$, is a morphism of topoi from $\mathcal{X}_S$ to $\mathcal{Y}_S$. 
\end{definition}

\begin{proposition}\label{topos fibre E-morphism section is morphism}
Let $\mathcal{X}$ and $\mathcal{Y}$ be $\mathcal{E}$-topoi and $(\Phi_*,\Phi^*):\mathcal{X}\to\mathcal{Y}$ be a $\mathcal{E}$-morphism. Suppose that $\mathcal{E}$ is a $\mathscr{U}$-small category, then the couple
\[(\bm{\Gamma}(\Phi_*),\bm{\Gamma}(\Phi_*)):\bm{\Gamma}(\mathcal{X}/\mathcal{E})\to\bm{\Gamma}(\mathcal{Y}/\mathcal{E})\]
is a morphism of topoi.
\end{proposition}
\begin{proof}
This is trivial from the above definition of $\mathcal{E}$-morphisms.
\end{proof}
A $\mathcal{E}$-morphism of $\mathcal{E}$-topoi is in fact completely determined by the restriction on each caegorical fibers. In order to construct such a morphism from the restrictions on fibers, we need the following lemma:
\begin{lemma}\label{topos fibre E-morphism adjoint fiberwise lemma}
Let $\mathcal{X}$ and $\mathcal{Y}$ be bifibre categories over $\mathcal{E}$ and $\Phi:\mathcal{X}\to\mathcal{Y}$ be a Cartesian $\mathcal{E}$-functor such that for any object $S$ of $\mathcal{E}$, $\Phi_S:\mathcal{X}_S\to\mathcal{Y}_S$ possesses a left adjoint. Then, by choosing for any object $S$ a left adjoint of $\Phi_S$, we obtain a $\mathcal{E}$-functor $\Psi:\mathcal{Y}\to\mathcal{X}$, which is $\mathcal{E}$-adjoint to $\Phi$.
\end{lemma}
\begin{proof}

\end{proof}

\begin{remark}
Under the conditions of \cref{topos fibre E-morphism adjoint fiberwise lemma}, suppose that $\mathcal{X}$ and $\mathcal{Y}$ are two $\mathcal{E}$-topoi and that for any object $S$ of $\mathcal{E}$, the left adjoint of $\Phi_S$ is left exact. Then, if $\Psi:\mathcal{Y}\to\mathcal{X}$ is the constructed functor, the couple $(\Phi,\Psi):\mathcal{X}\to\mathcal{Y}$ is a morphism of $\mathcal{E}$-topos. 
\end{remark}

\begin{example}
Let $\mathcal{F}\to\mathcal{E}$ be a category bifibered into dual topoi over $\mathcal{E}$, $X,Y$ be two $\mathcal{D}$-objects of $\mathcal{E}$, and $\alpha:X\to Y$ be a morphism of $\mathcal{D}$-objects. Then by choosing normalized cleveages for $\mathcal{X}$ and $\mathcal{X}^{\op}$, we obtain a morphism
\[(\alpha_*,\alpha^*):X_\mathcal{F}\to Y_\mathcal{F}\]
of $\mathcal{D}$-topoi. On the other hand, for any object $i$ of $\mathcal{D}$, the morphism $\alpha(i):X_i\to Y_i$ in $\mathcal{E}$ induces functors
\[\alpha(i)_*:\mathcal{F}_{X_i}\to \mathcal{F}_{Y_i},\quad \alpha(i)^*:\mathcal{F}_{Y_i}\to\mathcal{F}_{X_i}.\]
which, in view of (\ref{topos fibre given by D-object-1}), coincides with the opposite of the morphisms on fibers induced by $(\alpha_*,\alpha^*)$.
\end{example}

\paragraph{Ringed \texorpdfstring{$\mathcal{E}$}{E}-topoi}
A \textbf{ringed $\mathcal{E}$-topos} is a couple $(\mathcal{X},A)$ where $\mathcal{X}$ is a $\mathcal{E}$-topos and $A$ is a ring of $\bm{\Gamma}(\mathcal{X}/\mathcal{E})$. If $(\mathcal{X},A)$ is a ringed $\mathcal{E}$-topos, then for any object $S$ of $\mathcal{E}$, $A_S$ is a ring of the topos $\mathcal{X}_S$, and any morphism $f:T\to S$ induced a canonical morphism $A_T\to f^*(A_S)$. If $(\mathcal{X},A)$ and $(\mathcal{Y},B)$ are two ringed $\mathcal{E}$-topoi, a \textbf{morphism} from $(\mathcal{X},A)$ to $(\mathcal{Y},B)$ is defined to be a couple $(\Phi,\theta)$, where $\Phi:\mathcal{X}\to\mathcal{Y}$ is a morphism of $\mathcal{E}$-topoi and $\theta:B\to\Gamma(\Phi_*)(A)$ is a ring homomorphism. By \cref{topos fibre E-morphism section is morphism}, if $\mathcal{E}$ is $\mathscr{U}$-small, such a morphism induces a morphism $(\bm{\Gamma}(\Phi),\theta):(\bm{\Gamma}(\mathcal{X}/\mathcal{E}),A)\to (\bm{\Gamma}(\mathcal{Y}/\mathcal{E}),B)$ of ringed topoi.

\begin{example}
Let $\mathcal{F}\to\mathcal{E}$ be a category bifibered into dual topoi over $\mathcal{E}$ and $\mathcal{O}$ be a ring of $\bm{\Gamma}(\mathcal{F}^{\op}/\mathcal{E})=\Hom_{/\mathcal{E}^{\op}}(\mathcal{E}^{\op},\mathcal{F}^{\op})$. If $X:\mathcal{D}^{\op}\to\mathcal{E}$ is a $\mathcal{D}$-object of $\mathcal{E}$, then since $\bm{\Gamma}(X_\mathcal{F}/\mathcal{D})=\sHom(\mathcal{D},\mathcal{F}^{\op})$, the $\mathcal{D}$-topos $X_\mathcal{F}$ is naturally a ringed via the composition
\[\begin{tikzcd}
\mathcal{D}\ar[r,"X^{\op}"]&\mathcal{E}^{\op}\ar[r,"\mathcal{O}"]&\mathcal{F}^{\op}
\end{tikzcd}\]
and we denote by $(X_\mathcal{F},\mathcal{O})$ the ringed $\mathcal{D}$-topos thus obtained. If $\alpha:X\to Y$ is a morphism of $\mathcal{D}$-objects, the induced morphism $(\alpha_*,\alpha^*):X_\mathcal{F}\to Y_\mathcal{F}$ then induces canonically a morphism $(X_\mathcal{F},\mathcal{O})\to (Y_\mathcal{F},\mathcal{O})$ of ringed $\mathcal{D}$-topoi.
\end{example}

A ringed $\mathcal{E}$-topos $(\mathcal{X},A)$ defines a category $\Mod(\mathcal{X},A)$ which is bifibered into abelian categories over $\mathcal{E}$, whose fiber over an object $S$ of $\mathcal{E}$ is the category $\Mod(\mathcal{X}_S,A_S)$ of modules over the ringed topos $(\mathcal{X}_S,\mathcal{A}_S)$. With this notation, the category of $A$-modules of $\bm{\Gamma}(\mathcal{X}/\mathcal{E})$, denoted by $\Mod(\bm{\Gamma}(\mathcal{X}/\mathcal{E}),A)$, is then identified with the category $\Hom_{/\mathcal{E}}(\mathcal{E},\Mod(\mathcal{X},A))$.\par
Let $\varphi=(\Phi,\theta):(\mathcal{X},A)\to(\mathcal{Y},A)$ be a morphism of ringed $\mathcal{E}$-topoi. We then have two functors
\[\varphi_*:\Mod(\mathcal{X},A)\to\Mod(\mathcal{Y},B),\quad \varphi^*:\Mod(\mathcal{Y},B)\to\Mod(\mathcal{X},A)\]
of the corresponding categories, defined in the following way:
\begin{itemize}
    \item Let $M$ be an object $\Mod(\mathcal{X},A)$ lying over an object $S$ of $\mathcal{E}$, then $\Phi_*(M)$ is a module over $\Phi_*(A_S)$ and, via the homomorphism $\theta_S:B_S\to\Phi_*(A_S)$, it can be considered a module over $B_S$, which is denoted by $\varphi_*(M)$. The functor $\varphi_*$ is called the \textbf{direct image functor} induced by $\varphi$.
    \item Let $N$ be an object of $\Mod(\mathcal{Y},B)$ lying over an object $S$ of $\mathcal{E}$. Then $\Phi^*(N)$ is a module over $\Phi^*(B_S)$ and
    \[\phi^*(N)=\Phi^*(N)\otimes_{\Phi^*(B_S)}A_S\]
    is canonically endowed with a module structure over $A_S$. In view of \ref{topos fibre E-morphism adjoint fiberwise lemma}, we then obtain a functor $\varphi^*$ which is left adjiont to $\varphi_*$ and called the inverse image functor induced by $\varphi$.
\end{itemize}
The morphism $\varphi$ is called \textbf{flat} if the functor $\bm{\Gamma}(\varphi^*)$ is exact.
\begin{proposition}
Let $\lambda:\mathcal{E}'\to\mathcal{E}$ be a functor and $(\mathcal{X},A)$ be a ringed topos. Then the canonical functor
\[\lambda^*:\Mod(\bm{\Gamma}(\mathcal{X}/\mathcal{E}),A)\to\Mod(\bm{\Gamma}(\mathcal{X}\times_\mathcal{E}\mathcal{E}'/\mathcal{E}'),\lambda^*(A))\]
possesses a right adjoint $f_*$ and left adjoint $f_!$ if $\mathcal{E}'$ is $\mathscr{U}$-small category. In particular, it is exact in this case.
\end{proposition}
\begin{proof}
This follows immediately from \cref{fibre cat pullback on Hom adjoint exist lemma} and the identification
\begin{equation*}
\Hom_{/\mathcal{E}}(\mathcal{E},\Mod(\mathcal{X},A))\cong\Mod(\bm{\Gamma}(\mathcal{X}/\mathcal{E}),A).\qedhere
\end{equation*}
\end{proof}

\section{\'Etale site and topos of schemes}
In this section, we develop the we develop the elementary properties of \'etale topology and cohomology for schemes. Certain properties in this section is essentially valid for many other different topologies, such as the "fppf topology". However, there are also distinguished properties for the \'etale topology, due to the very particular nature of \'etale morphisms.

\subsection{The \'etale topology}
\paragraph{The big and small \'etale site}
We denote by $\mathbf{Sch}$ the category of schemes (in a fixed universe $\mathscr{U}$). Recall that a morphism $f:X\to Y$ is \'etale if it is locally of finite presentation, formally smooth and formally unramified. Equivalently, this means $f$ is locally of finite presentation and for any affine scheme $Y'$ over $Y$ and any subscheme $Y'_0$ defined by a nilpotent ideal, the map
\[\Hom(Y,X)\to\Hom_Y(Y'_0,X)\]
is bijective. We define the \textbf{\'etale topology} on $\mathbf{Sch}$ to be the topology generated by the basis given by $X\mapsto\Cov(X)$, where $\Cov(X)$ is formed by families of jointly surjective morphisms $\{u_i:X_i\to X\}$ such that each $u_i$ is \'etale. For each object $X$ of $\mathbf{Sch}$, we consider the subcategory $\mathbf{Et}_{/X}$ of $\mathbf{Sch}_{/X}$ formed by \'etale schemes over $X$, and endow it with the induced \'etale topology of that on $\mathbf{Sch}$ (called the \textbf{\'etale topology}). The resulting site is denoted by $X_{\et}$, and called the \textbf{\'etale site} of $X$. We note that any morphism in $\mathbf{Et}_{/X}$ is \'etale (\cref{scheme unramified smooth permanence prop}), so a family $\{U_i\to U\}$ of morphisms in $X_\et$ is covering if and only if it is jointly surjective. The topos $\Sh(X_{\et})$ of sheaves over $X_\et$ is called the \textbf{\'etale topos} of $X$. We usually use capital letters $F,G$ to denote a sheaf over the \'etale site $X_\et$, and the usual (Zariski) sheaves of modules over the scheme $X$ will be still denoted by $\mathscr{F},\mathscr{G}$.

\begin{proposition}\label{scheme etale site small generator exist}
Let $X$ be a scheme, $\mathcal{C}$ be a full subcategory of $X_\et$ such that for any \'etale scheme $Y$ over $X$ which is affine, $\mathcal{C}$ contains an object which is isomorphic to $Y$. Then $\mathcal{C}$ is a topological generating family of the site $X_\et$, hence a set of  generators for the topos $\Sh(X_\et)$, and the restriction functor $\Sh(X_\et)\to\Sh(\mathcal{C})$ is an equivalence of categories (where $\mathcal{C}$ is endowed with the induced topology).
\end{proposition}
\begin{proof}
This is trivial in view of the comparision lemma (\cite{SGA4-1} \Rmnum{3}).
\end{proof}

\begin{corollary}\label{scheme qs etale site of fp scheme prop}
Suppose that $X$ is quasi-separated. Let $\mathcal{C}$ be the full subcategory of $X_\et$ formed by \'etale schemes over $X$ that are of finite presentation, endowed with the induced topology of $X_\et$. Then
\begin{enumerate}
    \item[(a)] $\mathcal{C}$ is stable under fiber products and is a site of finite type if $X$ is quasi-compact.
    \item[(b)] The restriction functor $\Sh(X_\et)\to\Sh(\mathcal{C})$ is an equivalence of categories.
\end{enumerate}
In particular, if $X$ is quasi-compact and quasi-separated, the functors $H^p(X_\et,F)$ over abelian sheaves of $X_\et$ commute with inductive limits.
\end{corollary}
\begin{proof}
The first assertion is trivial in view of \cref{scheme morphism fp permanence prop}, and the second one follows from \cref{scheme etale site small generator exist} because $\mathcal{C}$ satisfies the condition of \cref{scheme etale site small generator exist}. In fact, since $X$ is quasi-separated, if $Y$ is quasi-compact, then it is quasi-compact over $X$, hence of finite presentation over $X$ if $Y$ is \'etale over $X$. Finally, if $X$ is quasi-compact, then by replacing $X_\et$ with $\mathcal{C}$, the last assertion follows from (a) and (\cite{SGA4-2} \Rmnum{6} 6.1.2(3)).
\end{proof}

As $X_\et$ is then a $\mathscr{U}$-site and $\Sh(X_\et)$ is a $\mathscr{U}$-topos, the general constructions and results can be applied to them. In the sequel, unless specified, the topologies on $\mathbf{Et}_{/X}$ or $\mathbf{Sch}$ are understood to be the \'etale topologies, and we often write $X$ instead of $X_\et$ or $\mathbf{Et}_{/X}$. For example, by sheaves of $X$, we mean sheaves for the \'etale topology on the site $X_{\et}$. We will denote by ̃$\Sh(X_\et)$ the category of these sheaves, which is a $\mathscr{U}$-topos. If $F$ is an abelian sheaf on $X$, we will denote its cohomology group by $H^p(X,F)$, which should be understood to be given by $H^p(X_\et,F)$.
\paragraph{The functoriality of \'etale topos}
Let $f:X\to Y$ be a morphism of schemes. Then the base change operation induces a functor
\begin{equation}\label{scheme etale morphism induced on topos-1}
f^*:Y_\et\to X_\et,\quad Y'\mapsto Y'\times_YX
\end{equation}
which commutes with finite projective limits and sends covering families to covering families, hence is continuous. By (\cite{SGA4-1} \Rmnum{1}), $f^*$ therefore defines a functor
\[f_\star:\PSh(X_\et)\to\PSh(Y_\et),\quad f_\star(F)(Y')=F(Y'\times_YX).\]
which admits a left adjoint
\[f^\star:\PSh(Y_\et)\to\PSh(X_\et),\quad f^\star(G)(X')=\rlim_{Y'\in\mathcal{I}_{X'}^{\op}}G(Y')\]
We also note that in this case the category $\mathcal{I}_{X'}$ can be identified with the category of commutative diagrams
\[\begin{tikzcd}
&X\times_YY'\ar[r]\ar[d]&Y'\ar[d]\\
U\ar[ru]\ar[r]&X\ar[r,"f"]&Y
\end{tikzcd}\]
where $Y'$ is an \'etale $Y$-scheme. On the other hand, in view of \cref{site small continuous functor iff}, the functor $f^*$ also induces a functor
\begin{equation}\label{scheme etale morphism induced on topos-2}
f_*^\et:\Sh(X_\et)\to\Sh(Y_\et),\quad f_*^\et(F)=f_\star(F),
\end{equation}
which admits a left adjoint
\begin{equation}\label{scheme etale morphism induced on topos-3}
f^*_\et:\Sh(Y_\et)\to\Sh(X_\et),\quad f^*_\et(G)=(f^\star(G))^\#
\end{equation}
so that $f^*_\et$ extends the functor (\ref{scheme etale morphism induced on topos-1}) and commutes with inductive limits and finite projective limits. In other words, $f$ defines a morphism of topos
\[f_\et:\Sh(X_\et)\to\Sh(Y_\et).\]

If $g:Y\to Z$ is another morphism of schemes, it is clear that we have canonical isomorphisms
\begin{equation}\label{scheme etale site inverse direct image functor transitive-1}
(gf)_*^\et\cong g_*^\et f_*^\et,\quad (gf)^*_\et\cong f_\et^*\hspace{1pt} g^*_\et
\end{equation}
whence an isomorphism $(gf)_\et\cong g_\et f_\et$.

Since we only consider the \'etale topology in this section, we just write $f^*$ and $f_*$ instead of $f^*_\et$ and $f_*^\et$. If $f:X\to Y$ is a morphism of schemes, the functors $R^pf_*^\et$ are then simply denoted by $R^pf_*$. Recall that for a sheaf $F$ over $X$, we have the following Leray spectral sequence:
\[E_2^{p,q}=H^p(Y,R^qf_*(F))\Rightarrow H^{p+q}(X,F).\]
Similarly, if $f:X\to Y$ and $g:Y\to Z$ are morphisms, we have a Grothendieck spectral sequence
\[E_2^{p,q}=R^pg_*(R^qf_*(F))\Rightarrow R^{p+q}(fg)_*(F).\]

If $f:X\to Y$ is an \'etale morphism, we can consider $X$ as an object of $Y_\et$, and there is then a canonical isomorphism of sites
\[X_\et\stackrel{\sim}{\to}(Y_\et)_{/X}.\]
In this case, the object $U\to Y$ is final in the category $\mathcal{I}_U$, so $f^\star(G)(U)=G(U)$ and we conclude that the functor
\[f^*:\Sh(Y_\et)\to\Sh(X_\et)\]
is isomorphic to the restriction functor to $Y$:
\begin{equation}\label{scheme etale morphism induced on topos-4}
f^*(G)=G\circ i_{X/Y}
\end{equation}
where $G$ is a sheaf over $Y_\et$ and $i_{X/Y}:X_\et\to Y_\et$ is the canonical inclusion.

\begin{remark}
Note that if $X$ is nonempty, then $X_\et$ is not an element of the chosen universe $\mathscr{U}$. However, as we pointed out, it can be proved that we can find a full subcategory $\mathcal{C}$ of $X_\et$ satisfying the conditions of the "comparison lemma" (\cite{SGA4-1} \Rmnum{3}), so that the restriction functor induces an equivalence $\Sh(X_\et)\stackrel{\sim}{\to}\Sh(\mathcal{C})$. Therefore, the \'etale topos is equivalent to a topos defined by a small site, so it is a $\mathscr{U}$-site.
\end{remark}

\begin{example}\label{scheme etale site subcanonical}
Let $Y$ be a scheme over $X$. Then $Y$ defines a sheaf over $\mathbf{Sch}_{/X}$ for the \'etale topology, given by $Y(X')=\Hom_X(X',Y)$. In other words, the \'etale topology is subcanonical on $\mathbf{Sch}_{/X}$ (this fact is essentially due to the result of (SGA1 \Rmnum{8} 5.1)). A fortiori, the restriction of this sheaf on $X_\et$ is a sheaf, which is still denoted by $Y$ if there is no risk of confusion. We also note that the functor thus obtained
\[\mathbf{Sch}_{/X}\to\Sh(X_\et)\]
commutes with finite projective limits (this is trivial). This implies for example if $Y$ is a group (resp. abelian group, ring, etc.) scheme over $X$, then the sheaf defined by $Y$ is a sheaf of groups (resp. abelian group, ring, etc.). Note that the induced functor $X_\et\to\Sh(X_\et)$ is nothing but the canonical functor of $X_\et$, which associates an object $Y$ of $X_\et$ the functor it represents. It is therefore an isomorphism from the category $X_\et$ to a full subcategory of the \'etale topos $\Sh(X_\et)$, by which we identify usually an object $Y$ of $X_\et$ with the corresponding sheaf, which will be denoted $h_Y$ or simply $Y$. It is clear that we have $H^0(X,Y)=\Hom_X(X,Y)$, and if $G$ is a group scheme over $X$ (abelian by our definition of cohomology groups, but note that this is also true for nonabelian group schemes), then $H^1(X,G)$ is canonically isomorphic to the classes of $G$-torsors over $X_\et$.
\end{example}

\begin{remark}
For \textit{any} scheme $Y$ over $X$, we denote by $\widetilde{Y}$ the associated sheaf over $X_\et$. If $f:X'\to X$ is a morphism of schemes, we have a evident homomorphism
\begin{equation}\label{scheme etale site associated sheaf and inverse image}
f^*(\widetilde{Y})\to\widetilde{Y_{(X')}},
\end{equation}
(where $Y_{(X')}=Y\times_XX'$) which is the adjoint homomorphism of the canonical homomorphism $\widetilde{Y}\to f_*(\widetilde{Y_{(X')}})$ obtained from the functorial homomorphism
\[\Hom_X(U,Y)\to\Hom_{X'}(U_{(X')},Y_{(X')})\]
where $U\in\Ob(X_\et)$. This homomorphism is in general not an isomorphism, i.e. the formation of associated \'etale sheaf does not commute with inverse image functors. However, if $Y$ is a \'etale scheme over $X$ (that is, $Y\in\Ob(X_\et)$), then for any sheaf $F'$ over $X'_\et$, we have
\begin{align*}
\Hom_{\Sh(X'_\et)}(f^*(\widetilde{Y}),F')&\cong\Hom_{\Sh(X_\et)}(\widetilde{Y},f_*(F'))\cong f_*(F')(Y)=F'(Y_{(X')})\cong\Hom_{\Sh(X'_\et)}(Y_{(X')},F')
\end{align*}
so (\ref{scheme etale site associated sheaf and inverse image}) is an isomorphism in this case. Similarly, the functor
\[\varphi_X:\mathbf{Sch}_{/X}\to\Sh(X_\et)\]
is not faithful if $X$ is nonempty, but its restriction to $X_\et$, which is the canonical functor $X_\et\to\Sh(X_\et)$, is fully faithful (since the topology on $X_\et$ is subcanonical).\par
Note that (\ref{scheme etale site associated sheaf and inverse image}) commutes with (small) direct sums, as can be easily verified. In particular, if for any set $I$ we denote by $I_X=\coprod_{i\in I}X$ the constant $X$-scheme over $X$, then this is none other than the constant sheaf $I_{X_\et}$ (direct sum of $I$ copies of final sheaf over $X_\et$, which sends $Y$ to $\coprod_{i\in I}Y$). As the functor $I\mapsto I_X$ commutes with finite projective limits, it transforms (abelian) groups to (abelian) groups, etc.\par
If $G$ is a ordinary abelian group, we write $H^p(X,G)$ for $H^p(X,G_X)$. Suppose, for example, that $G$ is a finite group; then $G_X$ is finite and hence affine over $X$, so using the remarks in \cref{scheme etale site subcanonical}, we obtain an interpretation of $H^1(X,G)$ as the classes of $G$-torsors over $X$ (SGA1 \Rmnum{5} 2.7). If $X$ is connected and endowed with a geometric point $\bar{x}$, then in terms of the \'etale fundamental group $\pi_1(X,\bar{x})$, we obtain an isomorphism
\begin{equation}\label{scheme etale site cohomology G coefficient is pi_1 Hom}
H^1(X,G)\stackrel{\sim}{\to}\Hom(\pi_1(X,\bar{x}),G)
\end{equation}
(where we may suppose that $G$ is commutative).
\end{remark}

\begin{example}\label{scheme etale sheaf induced by O_X module}
Let $\mathscr{F}$ be an $\mathscr{O}_X$-module over $X$, in the sense of Zariski topology. Then we can define a presheaf over $\mathbf{Sch}_{/X}$ by the formula
\[\Gamma_\mathscr{F}(Y)=\Gamma(Y,\mathscr{F}\otimes_{\mathscr{O}_X}\mathscr{O}_{Y})\]
which is a sheaf for the \'etale cohomology in view of (SGA1 \Rmnum{8} 1.6) and (SGA1 \Rmnum{4} 6.3.1). A fortiori, the restriction of $\Gamma_\mathscr{F}$ to $X_\et$ is a sheaf, which is also denoted by $\Gamma_\mathscr{F}$. By definition, we then have $H^0(X,\Gamma_\mathscr{F})=\Gamma(\mathscr{F})=H^0(X,\mathscr{F})$.
\end{example}

\subsection{Comparision of cohomologies}
We note that the examples considered in the previous paragraph are in fact in a natural way restrictions of sheaves defined on $\mathbf{Sch}_{/X}$ endowed with its \'etale topology (or even fpqc topology). In general, we have an inclusion functor $X_\et\hookrightarrow\mathbf{Sch}_{/X}$ which is continuous and commutes with finite projective limits, hence defines a morphism of sites
\[\iota:X_\et\to\mathbf{Sch}_{/X}\]
whence a functor $\iota_*:\Sh(\mathbf{Sch}_{/X})\to\Sh(X_\et)$ over the category of sheaves, given by $F\mapsto F\circ\iota$.
\begin{proposition}\label{scheme cohomology X_et and Sch_X comparision}
Let $\iota^*:\Sh(X_\et)\to\Sh(\mathbf{Sch}_{/X})$ be the functor defined by
\[\iota^*(F)(Y)=(p_Y)_\et^*(F)(Y)\]
where $Y\in\Ob(\mathbf{Sch}_{/X})$ and $p_Y$ is the structural morphism $Y\to X$. Then
\begin{enumerate}
    \item[(a)] The functor $i^*$ is fully faithful and a left adjiont to $\iota_*$, so for any sheaf $G$ over $X_\et$, the canonical homomorphism $G\mapsto \iota_*\iota^*(G)$ is an isomorphism.
    \item[(c)] Let $G$ (resp. $F$) be an abelian sheaf over $X_\et$ (resp. $\mathbf{Sch}_{/X}$). Then the canonical homomorphism (defined as the edge-homomorphisms of the Leray spectral sequence) are isomorphisms
\begin{gather*}
H^*(X_\et,\iota_*(F))\stackrel{\sim}{\to} H^*(\mathbf{Sch}_{/X},F),\quad H^*(X_\et,G)\stackrel{\sim}{\to} H^*(\mathbf{Sch}_{/X},\iota^*(G)).
\end{gather*}
\end{enumerate}
\end{proposition}
\begin{proof}
Let $Y$ be a scheme over $X$. Then in fact, the morphism $\iota$ is cocontinuous, so we can apply the result of (\cite{SGA4-1} \Rmnum{3}, 2.2).
\end{proof}

On the other hand, it is necessary to introduce on $\mathbf{Sch}$ (therefore on $\mathbf{Sch}_{/X}$) various topologies other than the \'etale topology. The coarsest of these is the \textit{Zariski topology} (Zar), defined by the basis where the covering families are the surjective families of open immersions; it is less fine than the \'etale topology. The finest of these topologies is the "\textit{faithfully flat and quasi-compact}" topology, for short (fpqc), which is the coarses topologies for which the covering families in the sense of Zariski, as well as the faithfully flat quasi-compact morphisms, are covering; the fpqc topology is finer as the topology spreads out. As we have already noted, the various examples of sheaves considered on $\mathbf{Sch}_{/X}$ are in fact already sheaves for the fpqc topology.\par
However, one should note that an abelian sheaf $F$ over $\mathbf{Sch}_{/X}$ for the fpqc topology (or the fppf topology), the cohomology group of $F$ for the fpqc topology is not always isomorphic to that for the \'etale topology (even if $X$ is the spectrum of a field $k$ and $F$ is represented by an algebraic group over $k$). In general, we can show that the \'etale cohomology gives the "good" cohomological groups when the coefficient is taken in any \'etale group scheme (or more generally smooth scheme) over $X$, but this is no longer true for group schemes such as the radical group over $X$, in which case we need to replace the \'etale cohomology with the fpqc or fppf topology.\par
As an example of the relations between cohomologies relative to different topologies, we consider here the Zariski topologies and the \'etale topology. We denote by $X_{\Zar}$ the site of Zariski open sets of $X$, so that we have a canonical inclusion functor $i:X_\Zar\to X_\et$, which defines an induced functor
\[i_*:\Sh(X_\et)\to\Sh(X_\Zar),\quad F\mapsto F\circ i,\]
and the corresponding inverse image functor
\[i^*:\Sh(X_\Zar)\to\Sh(X_\et)\]
which is left adjoint to $i_*$. Geometrically, the couple $(i^*,i_*)$ can be considered as a morphism of topos
\[i:\Sh(X_\et)\to\Sh(X_\Zar).\]
We therefore deduce a homomorphism of cohomology functors
\[H^*(X_\Zar,i_*(F))\to H^*(X_\et,F)\]
and a Leray spectral sequence
\[E_2^{p,q}=H^p(X_\Zar,R^qi_*(F))\Rightarrow H^{p+q}(X_\et,F),\]
where $F$ is an abelian sheaf over $X_\et$. This spectral sequence summarizes the general relations between \'etale cohomology and Zariski topology. Of course, for the constant coefficient sheafs $F$, this spectral sequence is in general far from being trivial, i.e. in general we have $R^qf_*(F)\neq 0$. However, the following result is true:
\begin{proposition}\label{scheme cohomology X_et and X_Zar qcoh isomorphism}
Let $\mathscr{F}$ be an $\mathscr{O}_X$-module on $X$ (in the sense of Zariski topology) and $\mathscr{F}_\et$ be the associated sheaf over $X_\et$ (cf. \cref{scheme etale sheaf induced by O_X module}). Then we have a canonical homomorphism of cohomological functors
\begin{equation}\label{scheme cohomology X_et and X_Zar qcoh isomorphism-1}
H^*(X,\mathscr{F})\to H^*(X_\et,\mathscr{F}_\et).
\end{equation}
If $\mathscr{F}$ is quasi-coherent, then the preceding homomorphism is an isomorphism.
\end{proposition}
\begin{proof}
In fact, the cohomology group $H^*(X,\mathscr{F})$ is equal to $H^*(X_\Zar,i_*(\mathscr{F}_\et))$, and with the preceding notations, it suffices to prove that
\[R^qi_*(\mathscr{F})=0\for q>0.\]
Since affine opens form a basis for the topology of $X$ and the formation of $Ri_*(\mathscr{F})$ is local (cf. \cref{ringed topos morphism higher direct image prop}), it suffices to assume that $X$ is affine and prove that
\[H^q(X_\et,\mathscr{F}_\et)=0\for q>0.\]
For this, let $\mathcal{C}$ be the full subcategory of $X_\et$ formed by \'etale affine schemes over $X$. In view of \cref{scheme etale site small generator exist}, we have
\[H^q(X_\et,\mathscr{F}_\et)\cong H^q(\mathcal{C},\mathscr{F}|_\mathcal{C}).\]
It then suffices to prove that $\mathscr{F}|_\mathcal{C}$ is $\mathcal{C}$-acyclic (\cite{SGA4-1} \Rmnum{5}, 4.1), or that it satisfies the condition of (\cite{SGA4-1} \Rmnum{5}, 4.3), i.e. that for all $U\in\Ob(\mathcal{C})$ and all covering family $\mathfrak{U}=\{U_i\to U\}$, we have $H^q(\mathfrak{U},\mathscr{F})=0$ for $q>0$. Since $U$ is quasi-compact, we can assume that $\mathfrak{U}$ is finite, so by replacing the $U_i$ with their direct sum, the covering family consists of a single morphism which is covering, i.e. \'etale and surjective. We are therefore reduced to proving that if $f:X\to Y$ is a surjective \'etale morphism of affine scheme and $\mathscr{F}$ a quasi-coherent module on $Y$, then $H^q(\{X\to Y\},\mathscr{F})=0$ for $q>0$, which follows from \cref{scheme etale cohomology of qcoh vanish} below.
\end{proof}
\begin{lemma}\label{scheme etale cohomology of qcoh vanish}
Let $A\to B$ is a faithfully flat homomorphism of rings and $M$ is an $A$-module. Then the sequence
\[\begin{tikzcd}
0\ar[r]&M\ar[r]&M\otimes_AB\ar[r,"d_0"]&M\otimes_AB\otimes_AB\ar[r,"d_1"]&M\otimes_AB\otimes_AB\otimes_AB\ar[r]&\cdots
\end{tikzcd}\]
is exact, where
\[d_n(x\otimes b_0\otimes\cdots\otimes b_n)=\sum_{i=0}^{n+1}(-1)^ix\otimes b_0\otimes\cdots\otimes b_{i-1}\otimes 1\otimes b_i\otimes\cdots\otimes b_n.\]
\end{lemma}
\begin{proof}
Since $B$ is faithfully flat over $A$, it suffices to prove that the sequence is exact after tensoring with $B$, that is, the sequence
\[\begin{tikzcd}
0\ar[r]&M\otimes_AB\ar[r]&M\otimes_AB\otimes_AB\ar[r,"d_0"]&M\otimes_AB\otimes_AB\otimes_AB\ar[r,"d_1"]&\cdots
\end{tikzcd}\]
where
\[d_n(x\otimes b_0\otimes\cdots\otimes b_n\otimes b)=\sum_{i=0}^{n+1}(-1)^ix\otimes b_0\otimes\cdots\otimes b_{i-1}\otimes 1\otimes b_i\otimes\cdots\otimes b_n\otimes b.\]
For this, we define a homotopy $h_n:M\otimes_AB^{\otimes(n+2)}\to M\otimes_AB^{\otimes(n+1)}$ by
\[h_n(x\otimes b_0\otimes\cdots\otimes b_n\otimes b)=x\otimes b_1\otimes\cdots\otimes b_n\otimes b_0b.\]
It is then immediate to check that $d_{n-1}h_n+h_{n+1}d_n=\id$, whence our assertion.
\end{proof}

\begin{corollary}\label{scheme affine cohomology X_et qcoh zero}
If $X$ is an affine scheme, then $H^p(X_\et,\mathscr{F}_\et)=0$ for $p>0$.
\end{corollary}

\begin{remark}
In fact, by \cref{scheme etale cohomology of qcoh vanish}, to have $H^q(\{X\to Y\},\mathscr{F})=0$ it suffices that $X\to Y$ be faithfully flat (instead of \'etale). This allows us to show by the previous proof that we still has isomorphisms analogous to that of \cref{scheme cohomology X_et and X_Zar qcoh isomorphism} if we consider (for example) any intermidiate topology between the Zariski topology and the fpqc topology.
\end{remark}

\subsection{Cohomology of a projective limit of schemes}\label{scheme etale cohomology of projective system}

\section{Fiber functor, supports, and cohomology of finite morphisms}
In this section, we consider the fiber functors on \'etale sites and topos associated with a geometric point, and definte the support of a \'etale sheaf. As an application, we discuss the cohomology groups of finite morphisms of schemes.

\subsection{Topological invariance of \'etale topos}
\begin{theorem}\label{scheme etale site equivalence if integral surj radical}
Let $f:X'\to X$ be a surjective, radical and integral morphism (or equivalently, a universal homeomorphism, cf. \cite{EGA4-4} 18.12.11). Then the base change functor
\[f^*:X_\et\to X'_\et\]
is an equivalence of sites (i.e an equivalence of sites whose quasi-inverse is continuous). Therefore, the functors
\[f_*:\Sh(X'_\et)\to\Sh(X_\et),\quad f^*:\Sh(X_\et)\to\Sh(X'_\et)\] 
are equivalences of categories and quasi-inverses of each other.
\end{theorem}
\begin{proof}
By (\cite{SGA1} \Rmnum{9} 3.4), the functor $f^*$ is fully faithful, so it remains to prove that it is essentially surjective, i.e. that any \'etale scheme $Z'$ over $X'$ is obtained by an \'etale scheme $Z$ over $X$. Suppose first that the assertion holds for $X$ and $X'$ being affine. In this case, we can choose an affine open covering $Z'=\bigcup_iZ_i'$ such that each $Z_i'$ maps into an affine open of $X'$. By assumption (affine case) we can find \'etale morphisms $Z_i\to X$ such that $Z_i\times_XX'\cong Z_i'$. Let $Z_{ij}$ be the open subscheme whose underlying space is $Z_i'\cap Z_j'$. From the fully faithfulness of $f^*$, we obtain isomorphisms
\[Z_{ij}\times_XX'\cong Z_i'\cap Z_j'\cong Z_{ji}\times_XX',\]
hence isomorphisms $\varphi_{ji}:Z_{ij}\to Z_{ji}$. Again, by the fully faithfulness, we see that $\varphi_{ji}$ form a dascent data on $Z_i$ ralative to $X'\to X$, so we can glue them to obtain a (\'etale) scheme $Z$ over $X$ such that $Z_i\cong Z\times_XX'$. It is then clear that $Z\times_XX'\cong Z'$.\par
We are therefore reduce to the case where $X=\Spec(A)$, $X'=\Spec(A')$, $Z'=\Spec(B')$ are affine. Writting $A'$ as an inductive limit of sub-$A$-algebras of finite type of $A'_i$, with $B'$ coming from a \'etale algebra over an $A'_i$ (cf. \cite{EGA4-4} 17.7.8), we may further assume that $A'$ is integral and of finite type over $A$, hence finite over $A$. We then have an isomorphism $A'\cong A''/\mathfrak{I}$, where $A''=A[T_1,\dots,T_n]$ and $\mathfrak{I}$ is an ideal of $A''$. Again, by writting $\mathfrak{I}$ as an inductive limit of its finitely generated subideals $\mathfrak{I}_i$ and putting $A'_i=A''/\mathfrak{I}_i$, we have $A'=\rlim_iA'_i$, so $B'$ comes from an \'etale algebra $B'_i$ over $A'_i$ (cf. \cite{EGA4-4} 17.7.8). On the other hand, as $\Spec(A')\to\Spec(A)$ is surjective, so is the morphism $\Spec(A'_i)\to\Spec(A)$, and we can verify that if $\Spec(A')\to\Spec(A)$ is radical, so is $\Spec(A'_i)\to\Spec(A)$ for $i\gg 0$ (apply \cite{EGA4-3} 8.10.5 to $\Spec(A)$). This brings us back to the case where $A'$ is one of $A'_i$, hence of finite presentation on $A$. We therefore conclude the first assertion by (\cite{SGA1} \Rmnum{9} 4.10), and the fact that $f^*$ and $f_*$ are quasi-inverse of each other is immediate.
\end{proof}
\begin{corollary}\label{scheme etale cohomology integral surj radical isomorphisms}
Let $F$ be an abelian sheaf over $X$ and $F'$ be the inverse image over $X'$. Then the canonical homomorphisms
\begin{equation}\label{scheme etale cohomology integral surj radical isomorphisms-1}
H^p(X,F)\to H^p(X',F')
\end{equation}
are isomorphisms. Similarly, if $F'$ is an abelian sheaf over $X'$ and $F$ is its image over $X$, then the canonical homomorphisms (\ref{scheme etale cohomology integral surj radical isomorphisms-1}) are isomorphisms.
\end{corollary}

\begin{example}\label{scheme etale integral surj radical eg}
The following examples of \cref{scheme etale site equivalence if integral surj radical} will be frequently used in this section.
\begin{enumerate}
    \item[(a)] $X'$ is a subscheme of $X$ with the same underlying space, i.e. defined by a nilideal $\mathfrak{I}$.
    \item[(b)] $X$ is a scheme over a separably closed field $k$, $k'$ is an algebraic closure of $k$, and $X'=X\otimes_kk'$.
    \item[(c)] Let $X$ be a geometrically unibrach scheme (for example an algebraic curve over a field $k$). Then, if $X'$ is the nomarlization of $X_\red$, by definition $X'\to X$ is radical, so \cref{scheme etale site equivalence if integral surj radical} applies. 
\end{enumerate}
\end{example}

\subsection{\'Etale sheaves over the spectrm of a field}
\begin{proposition}\label{scheme etale topos of field equivalent to pi-set}
Let $k$ be a field, $\bar{k}$ be a separable closure of $k$, $G=\Gal(\bar{k}/k)$ the Galois group, $X=\Spec(k)$ and $\widebar{X}=\Spec(\bar{k})$. Let $i:X_\et\to\Sh(X_\et)$ be the canonical inclusion and consider the functor
\[\Gamma:\Sh(X_\et)\to \mathcal{B}G,\quad \Gamma(F)=\rlim F(\Spec(k_\alpha))\]
where $k_\alpha$ runs through finite subextensions of $\bar{k}/k$ and $\mathcal{B}G$ is the classifying topos of $G$. Then $i$ and $\Gamma$ are equivalences of categories.
\end{proposition}
\begin{proof}
The composition functor
\[\Gamma\circ i:X_\et\to\Sh(X_\et)\to \mathcal{B}G\]
is an equivalence of categories, in view of the fundamental theorem of Galois theory (\cite{SGA1} \Rmnum{5}), so $X_\et$ is also a topos and a family $\{X_i\to X\}$ of morphisms in $X_\et$ is a covering if and only if it is jointly surjective, i.e. its image in $\mathcal{B}G$ is epimorphic, or equivalently, a covering family for the canonical topology of $\mathcal{B}G$. This proves that the topology on $X_\et$ is the canonical topology, so $i$ is an equivalence, and the same holds for $\Gamma$.
\end{proof}

\begin{corollary}\label{scheme etale abelian sheaf of field equivalence to Galois module}
The functor $\Gamma$ induces an equivalence from the category of abelian sheaves over $X=\Spec(k)$ to the category of Galois $G$-modules.
\end{corollary}
\begin{proof}
In fact, Galois $G$-modules are exactly the "abelian groups" in the topos $\mathcal{B}G$.
\end{proof}

\begin{corollary}\label{scheme field etale cohomology is Galois cohomology}
Let $F$ be an abelian sheaf over $X=\Spec(k)$ and $M=\Gamma(F)$ be the associated Galois $G$-module. Then there is a canonical isomorphism of $\delta$-functors
\[H^\bullet(X,F) \stackrel{\sim}{\to} H^\bullet(G,M).\]
\end{corollary}

\begin{corollary}\label{scheme separably closed field etale topos is set}
Suppose that $k$ is separably closed. Then the functor
\[\Gamma:\Sh(X_\et)\to\mathbf{Set},\quad F\mapsto F(X)\]
is an equivalence of categories. If $F$ is an abelian sheaf over $X=\Spec(k)$, we have $H^p(X,F)=0$ for $p>0$.  
\end{corollary}
\begin{proof}
In this case the Galois group is trivial, so the functor $\Gamma$ sends $\Sh(X_\et)$ into $\mathbf{Set}$. The rest of the corollary follows from \cref{scheme etale topos of field equivalent to pi-set} and \cref{scheme field etale cohomology is Galois cohomology}.
\end{proof}

\subsection{Fiber functor relative to a geometric point}
Let $X$ be a scheme. We recall that a \textit{geometric point} of $X$ is defined to be an $X$-morphism $\xi:\Spec(\Omega)\to X$, where $\Omega$ a separably closed field. Giving a geometric point of $X$ is equivalent to giving an ordinary point $x\in X$ and a field extension $\kappa(x)\to\Omega$, and we also write $\xi$ for the scheme $\Spec(\Omega)$. In practice we only take $\Omega$ to be a separable closure of $\kappa(x)$, and the corresponding geometric point is then denoted by $\bar{x}$. For a given point $x\in X$, the field $\widebar{\kappa(x)}$ (resp. $\bar{x}$) is determined up to nonunique isomorphisms.

\begin{remark}
In most geometric questions, it is more natural to consider algebraically closed fields $\Omega$. The convention made here is special to the study of \'etale topology, and is also the convention we adopted in the definition of the fundamental group. This difference of conventions is not essential because the key property of $\Omega$ used here is that any \'etale covering of the spectrum of $\Omega$ is trivial, i.e. that $\Omega$ is separately closed.
\end{remark}

\begin{definition}
Let $X$ be a scheme and $\xi:\Spec(\Omega)\to X$ be a geometric point $X$. The \textbf{(geometric) fiber functor} relative to $\xi$, denoted by $F\mapsto F_\xi$, is defined to be the composition
\[\begin{tikzcd}
\Sh(X_\et)\ar[r,"\xi^*"]&\Sh(\xi_\et)\ar[r,"\Gamma_\xi"]&\mathbf{Set}
\end{tikzcd}\]
where $\Gamma_\xi$ is the functor defined in \cref{scheme etale topos of field equivalent to pi-set}. In view of \cref{scheme separably closed field etale topos is set}, we can also say that a geometric point $\xi$ of $X$ defines a point of the topos $\Sh(X_\et)$, by which we mean the associated fiber functor.
\end{definition}

As the functor $\Gamma_\xi$ (section functor over $\xi$) is an equivalence of categories, the fiber functor $F\mapsto F_\xi$ is equivalent essentially to the inverse image functor $\xi^*$. Therefore, it follows from \cref{scheme separably closed field etale topos base change} that if $\xi$ is a geometric point of $X$ such that there exists an $X$-morphism $\xi'\to\xi$ (i.e. $\xi'$ corresponds to a separably closed extension $\Omega'$ of $\Omega$), then the canonical homomorphism $F_\xi\to F_{\xi'}$ is an isomorphism. This suggests us that in the study of fiber functors, we can (by replacing $\Omega$ with a separably closed closure of $k$ in $\Omega$) assume that $\Omega=k(\xi)$ is a separable closure $\widebar{\kappa(x)}$ of $\kappa(x)$. In this way, we usually denote the corresponding fiber functor by $F\mapsto F_{\bar{x}}$.\par
Let us point out an obvious property of transitivity (whose technical utility should not be confined exclusively to geometric points defined by separable closure of residual fields): Let $f:X'\to X$ be a morphism of schemes and $\xi':\xi'\to X'$ be a geometric point of $X$. Then $\xi=f\xi':\xi'\to X$ is a geometric point of $X$ and we have a functorial isomorphism on $F\in\Sh(X_\et)$:
\begin{equation}\label{scheme fiber functor transitivity}
f^*(F)_{\xi'}\cong F_\xi
\end{equation}
which follows from the transitivity of inverse images $(f\xi)^*\cong \xi^*f^*$.\par

Our main purpose for introducing the fiber functor is of course to show that various properties a morphism of abelian sheaves over $X_\et$ can be extracted from the induced morphism on fibers (i.e. by "taking stalk"). Before proving this, we need an efficient way to compute the fibers. For this, we recall that in the classical case, the stalk of a sheaf $\mathscr{F}$ at a point $x\in X$ is comupted as the inductive limit:
\begin{equation}\label{scheme fiber functor classical expression}
\mathscr{F}_x=\rlim_{U\ni x}\mathscr{F}(U)
\end{equation}
where $U$ runs through neighborhoods of $x$ in $X$. In the \'etale setting, we can also obtain an analogue of (\ref{scheme fiber functor classical expression}), provided that we replace topological neighborhoods by suitable \'etale neighborhoods over $X$: more precisely, an \textbf{\'etale neighborhoods of $\xi$ in $X$} is defined to be a commutative diagram
\[\begin{tikzcd}
&U\ar[d]\\
\xi\ar[ru]\ar[r]&X
\end{tikzcd}\]
where $U$ is an \'etale over $X$. The etale neighborhoods of $\xi$ in $X$ clearly form a category, which will be denoted by $\mathcal{C}_\xi$ (in fact, this is nothing than the category $\mathcal{I}_\xi$). Since \'etale morphisms are stable under fiber products, it is not hard to see that the category $\mathcal{C}_\xi$ is cofiltered. It turns out that the fiber $F_\xi$ can be derived by taking inductive limits in this category, as the following proposition shows:
\begin{proposition}\label{scheme etale site fiber functor expression}
Let $\xi$ be a geometric point of $X$ and $\mathcal{C}_\xi$ be the category of etale neighborhoods of $\xi$ in $X$. Then for any sheaf $F$ (resp. presheaf $P$) over $X$, we have a canonical functorial isomorphism
\begin{equation}\label{scheme etale site fiber functor expression-1}
F_\xi \stackrel{\sim}{\to} \rlim_{U\in\mathcal{C}_\xi^{\op}} F(U),\quad 
(\text{resp.}\quad (P^\#)_\xi \stackrel{\sim}{\to} \rlim_{U\in\mathcal{C}_\xi^{\op}} P(U)).
\end{equation}
\end{proposition}
\begin{proof}
We first note that for any presheaf $P$ over $\xi_\et$, if $P^\#$ is the associated sheaf, the natural homomorphism
\[P(\xi)\to P^\#(\xi)\]
is an isomorphism (this follows for example, by the explicit construction of $P^\#$ by (\ref{site small generated sheafification-1})). Therefore, if $F$ is a sheaf on $X$, we then have
\[F_\xi=\Gamma(\Spec(\Omega),\xi^*(F))=\Gamma(\Spec(\Omega),\xi^\star(F))=\rlim_{U\in\mathcal{C}_\xi^{\op}}F(U)\]
where we use the construction of $\xi^*$ in \cref{site continuous functor sheaf inverse image prop}. The assertion for presheaves can be proved similarly, using the observation that $\xi^*(P^\#)=(\xi^*(P))^\#$.
\end{proof}

\begin{theorem}\label{scheme etale site fiber functor conservative}
Let $X$ be a scheme.
\begin{enumerate}
    \item[(a)] For any geometric point $\xi$ of $X$, the fiber functor $F\mapsto F_\xi$ commutes with ($\mathscr{U}$-small) inductive limits and finite projective limits. In particular, it transforms sheaf of groups (resp. abelian sheaves, etc.) into groups (resp. abelian sheaves, etc.)
    \item[(b)] As $x$ turns therough the points of $X$, the fiber functors $F\mapsto F_{\bar{x}}$ form a conservative family of functors, i.e. if $u:F\to G$ is a homomorphism of sheaves over $X$, then $u$ is an isomorphism if and only if for any $x\in X$, the corresponding homomorphism $u_{\bar{x}}:F_{\bar{x}}\to G_{\bar{x}}$ is an isomorphism.
\end{enumerate}
\end{theorem}
\begin{proof}
The first assertion folows from the exactness properties in \ref{site continuous functor sheaf inverse image prop}. Now let $u:F\to G$ be a morphism of sheaves over $X$, such that for any $x\in X$, $u_{\bar{x}}:F_{\bar{x}}\to G_{\bar{x}}$ is a monomorphism. To show that $u$ is a monomorphism, we consider $X'\in\Ob(X_\et)$ and two elements $\varphi,\psi\in F(X')$ such that $u(\varphi)=u(\psi)$. By replacing $X$ by $X'$ and use the transitivity of fiber functor, we can assume that $X=X'$. For any $x\in X$, we have $u(\varphi)_{\bar{x}}=u(\psi)_{\bar{x}}$, i.e. $u_{\bar{x}}(\varphi_{\bar{x}})=u_{\bar{x}}(\psi_{\bar{x}})$, whence $\varphi_{\bar{x}}=\psi_{\bar{x}}$ since $u_{\bar{x}}$ is a monomorphism. Using (\ref{scheme etale site fiber functor expression-1}), we conclude that there exists an \'etale neighborhood $U_x$ of $\xi$ (where $x$ is the locality of $\xi$) such that the inverse images of $\varphi$ and $\psi$ coincide on $U_x$. As $x$ varies over $X$, the $U$ form a covering family of $X$, so we conclude that $\varphi=\psi$.\par
Suppose now that $u_{\bar{x}}$ is also an epimorphism for each $x\in X$. To show that $u$ is an epimorphism, it suffices to prove that for any $X'\in\Ob(X_\et)$ and any element $\psi\in G(X')$, we can find an element $\varphi\in F(X')$ such that $u(X')(\varphi)=\psi$. We may assume that $X'=X$, and by (\ref{scheme etale site fiber functor expression-1}), we see that there exist for each $x\in X$ an \'etale neighborhood $U_x$ and an element $\varphi_x\in F(U_x)$ whose image in $G(U_x)$ is equal to the inverse image of $\psi$. Using the fact that $u$ is a monomorphism, we see that the $\varphi_x$ coincides on overlapings, so there exists a unique element $\varphi\in F(X)$ such that $u(\varphi)=\psi$.
\end{proof}

\begin{corollary}\label{scheme etale site homomorphism inj surj iff fiber}
Let $u:F\to G$ be a homomorphism of sheaves. Then $u$ is a monomorphism (resp. epimorphism) if and only if for any $x\in X$, $u_{\bar{x}}:F_{\bar{x}}\to G_{\bar{x}}$ is injective (resp. surjective).
\end{corollary}

\begin{corollary}\label{scheme etale site homomorphism equal iff fiber}
Let $u,v:F\to G$ be two morphism of sheaves over $X$. Then $u=v$ if and only if for any $x\in X$, we have $u_{\bar{x}}=v_{\bar{x}}$. In particular, if $u,v$ are two sections of $F$, then $u=v$ if and only if $u_{\bar{x}}=v_{\bar{x}}$ for any $x\in X$.
\end{corollary}

\begin{corollary}\label{scheme etale site exact sequence iff fiber}
A sequence $F\to G\to H$ of sheaves over $X$ is exact if and only if for any $x\in X$, the corresponding sequence $F_{\bar{x}}\to G_{\bar{x}}\to H_{\bar{x}}$ is exact.
\end{corollary}

For any point $x\in X$, we consider the natural morphism $i_x:\Spec(\kappa(x))\to X$. This gives rise to a canonical functor
\[i_x^*:\Sh(X_\et)\to\Sh(x_\et)\]
(we also denote by $x$ the scheme $\Spec(\kappa(x))$). If $F$ is a sheaf over $X$, its inverse image under $i_x$ is denoted by $F_x=i_x^*(F)$, which is a sheaf over $\Spec(\kappa(x))$ (hence identified with an \'etale scheme over $\kappa(x)$ in view of \cref{scheme etale topos of field equivalent to pi-set}). This depends functorially on $F$, and the functor $i_x^*:F\mapsto F_x$ commutes with inductive limits and finite projective limits.\par
If $\bar{x}=\Spec(\widebar{\kappa(x)})$, the fiber functor $F\mapsto F_{\bar{x}}$ is canonically isomorphic with the composition of the functor $F\mapsto F_x$ and the functor $\Gamma$ of \cref{scheme etale topos of field equivalent to pi-set} (the latter is isomorphic to the fiber functor relative to the geometric point $\bar{x}$ of $x$). It then follows from \cref{scheme etale site fiber functor conservative} that the system of functors $(F\mapsto F_x)_{x\in X}$ is also conservative. On the other hand, if $\kappa(x)$ is spearably closed, i.e. $x=\bar{x}$, the notations of $F_x$ and $F_{\bar{x}}$ (strictly speaking) contradictory (the first is an object of $\Sh(x_\et)$, while the second is a set), but this is not essential, in view of \cref{scheme etale topos of field equivalent to pi-set}.\par
From the preceding remark we see that if $\bar{x}=\Spec(\widebar{\kappa(x)})$, then for any sheaf $F$ over $X$, the group $G_x=\Gal(\widebar{\kappa(x)}/\kappa(x))$ naturally acts on the fiber set $F_{\bar{x}}$, so that $F\mapsto F_{\bar{x}}$ can be viewed as a functor
\[\Sh(X_\et)\to\mathcal{B}G_x\]
which is essentially equivalent to the functor $F\mapsto F_x$.

\begin{remark}
Consider a subset $E$ of $X$ such that for any \'etale morphism $f:X'\to X$, $E'=f^{-1}(E)$ is very dense in $X'$ (\cite{EGA4-3} 10.1.3), i.e. that for any $f$ as above, any open subset of $X'$ cointaing $E'$ is equal to $X'$. Then the fiber functor $F_{\bar{x}}$ over $\Sh(X_\et)$, for $x\in E$, form a conservative system (this can be seen from the proof of \cref{scheme etale site fiber functor conservative}~(b)). This observation is applicable in the following cases:
\begin{enumerate}
    \item[(a)] $X$ is a Jacobson scheme, for example a locally algebraic scheme over a field, or over $\Spec(\Z)$, and $E$ is the set of closed points of $X$.
    \item[(b)] $X$ is locally of finite type over a scheme $X$ and $E$ is the set of points of $X$ that is closed in the corresponding fiber.
    \item[(c)] $X$ is locally Noetherian and $E$ is the set of $x\in X$ such that $\bar{x}$ is a finite set (i.e. an Artinian scheme) (c.f. \cite{EGA4-3} 10.5.3 et 10.5.5).
\end{enumerate} 
\end{remark}

\subsection{Strict local rings and schemes}
We recall that a local ring $(A,\m)$ is called henselian if the following equivalent conditions are satisfied:
\begin{enumerate}
    \item[(\rmnum{1})] Any algebra $B$ finite over $A$ is a direct product $\prod_iB_i$ of local rings (the $B_i$ are necessarily isomorphic to $B_{\m_i}$, where $\m_i$ are maximal ideals of $B$). 
    \item[(\rmnum{2})] Any algebra $B$ over $A$ that is a localization of an algebra $C$ of finite type over $A$ at a prime ideal $\p$ lying over a maximal ideal $\m$ of $A$, and such that $B/\m B$ is finite over $k=A/\m$, is finite over $A$.
    \item[(\rmnum{3})] As in (\rmnum{2}), but we suppose that $C$ is \'etale over $A$ at $\p$ and $k\to B/\m B$ is an isomorphism.
    \item[(\rmnum{4})] The "Hensel lemma" is valid for $A$: for any monic polynomial $F\in A[X]$, denote by $\bar{F}\in k[X]$ the induced polynomial, then for any decomposition
    \[\bar{F}=\bar{F}_1\bar{F}_2\]
    of $\bar{F}$ into two coprime monoic polynomials in $k[X]$, there exists liftings $F_1,F_2\in A[X]$ such that $F=F_1F_2$.
\end{enumerate}
(for a proof of the equivalence of these conditions and some general properties for henselian rings, cf. \cite{EGA4-4} 18.5.11). Recall that if $A$ is a local ring, then we can form a local homomorphism
\[A\to A^h\]
where $A^h$ is henselian, which is universal in the sense that any local homomorphism from $A$ to a local henselian ring factors through $A^h$. The ring $A^h$ is called the henselization of $A$, whose construction is given (in \cite{EGA4-4} 18.6) by
\[A^h=\rlim_iA_i\]
where $A_i$ runs through $A$-algebras essentially of finite type and essentially \'etale over $A$ (i.e. the localization of an \'etale algebra over $A$) such that $A\to A_i$ is a local homomorphism and the extension $\kappa(A_i)/\kappa(A)$ is trivial. This construction shows in particular that $A^h$ is flat over $A$ and that if $A$ is Noetherian, so is its henselization.\par
A local ring $A$ is called \textbf{strictly local} if it is henselian and its residue field is separably closed. A scheme is called \textbf{strictly local} if it is isomorphic to the spectrum of a strictly local ring.
\begin{definition}
Let $X$ be a scheme, $\mathscr{O}_{X_\et}$ the sheaf over $X_{\et}$ defined by
\[\mathscr{O}_{X_\et}(X')=\Gamma(X',\mathscr{O}_{X'}).\]
Let $\xi:\Spec(\Omega)\to X$ be a geometric point of $X$ (located at $x\in X$). We define the \textbf{strictly local ring} of $X$ at $\xi$, denoted by $\mathscr{O}_{X,\xi}$, to be the fiber of the sheaf $\mathscr{O}_{X_\et}$ at the point $\xi$. Its spectrum is called the \textbf{strict localization} of $X$ at $\xi$.
\end{definition}
In view of \cref{scheme etale site fiber functor expression}, we see that the fiber $\mathscr{O}_{X,\xi}$ of $X$ at $\xi$ has the description:
\begin{equation}\label{scheme strict localization description-1}
\mathscr{O}_{X,\xi}=\rlim\Gamma(Y,\mathscr{O}_Y),
\end{equation}
where $Y$ runs through the filtered opposite category of \'etale neighborhoods of $\xi$, i.e. an \'etale scheme $Y\to X$ endowed with an $X$-morphism $\xi\to Y$. By the transitivity of inductive limits, we can replace the right hand side $\Gamma(Y,\mathscr{O}_Y)$ by $\mathscr{O}_{Y,y}$, where $y$ is the image of $\xi$ in $Y$. We thus obtain the expression
\begin{equation}\label{scheme strict localization description-2}
\mathscr{O}_{X,\xi}=\rlim_iA_i,
\end{equation}
where $A_i$ runs through algebras essentially of finite type and \'etale over $A=\mathscr{O}_{X,x}$, endowed with a $k$-homomorphism $\kappa(A_i)\to\Omega$.\par
The description (\ref{scheme strict localization description-2}) shows that the strict localization of $X$ at $\xi$ depends only on the local ring $A=\mathscr{O}_{X,x}$ and the extension $\Omega$ of $k=\kappa(x)$. This is also caleld the strict henselization of $A$ (relative to the separably closed field $\Omega$) and denoted by $A^{sh}$. For the general properties of $A^{sh}$, see (\cite{EGA4-4} 18.8). We only remark that the construction of $A^{sh}$ shows that it is flat over $A$, and is Noetherian if $A$ is. On the other hand, one can show that the local homomorphism
\[A\to A^{sh}\]
endowed with the $k$-homomorphism $\kappa(A^{sh})\to\Omega$, satisfies the following universal property: any local homomorphism $A\to A'$, with $A'$ strict local, endowed with a $k$-homomorphism $\kappa(A')\to\Omega$, must factor through $A$. In particular, $A^{sh}$ is itself a strictly local ring.\par
Now we consider an affine open neighborhood $U$ of $x$. Note that in the inductive limit (\ref{scheme strict localization description-1}), we can clearly choose $Y$ to be affine over $U$. The latter then form a filtered projective system of affine schemes, so that we are in the general situation of \autoref{scheme etale cohomology of projective system}. In view of the expression (\ref{scheme strict localization description-1}) of $\mathscr{O}_{X,\xi}$, we obtain an $X$-isomorphism
\[\Spec(\mathscr{O}_{X,\xi})\stackrel{\sim}{\to}\llim X'\]
where $X'$ runs through \'etale neighborhoods which are affine over $U$. This justifies our intuition of $\Spec(\mathscr{O}_{X,\xi})$ as being the "limit" of the \'etale neighborhoods of $\xi$.

\begin{proposition}\label{scheme strictly local etale global section isomorphic to fiber}
Let $X$ be a strictly local scheme, $x$ be its closed point, which is hence a geometric point of $X$. Then the functor
\[\Sh(X_\et)\to\Set,\quad F\mapsto\Gamma(X,F)\]
is canonically isomorphic to the fiber functor $F\mapsto F_x$, and therefore commutes with arbitrary inductive limit.
\end{proposition}
\begin{proof}
In fact, by (\cite{EGA4-4} 18.8.1), any \'etale covering of $X$ is trivial, so the final object $X$ in the category of \'etale neighborhoods of $\xi$ dominates any other object, hence $\rlim F(Y)$ is isomorphic to $F(X)$.
\end{proof}

\begin{corollary}\label{scheme strictly local etale cohomology trivial}
Under the conditions of \cref{scheme strictly local etale global section isomorphic to fiber}, for any abelian sheaf $F$ over $X$, we have
\[H^q(X,F)=0\for q\neq 0.\]
\end{corollary}
\begin{proof}
This follows from \cref{scheme strictly local etale global section isomorphic to fiber}, since the global section functor is therefore isomorphic to the fiber functor, hence is exact.
\end{proof}

\begin{corollary}\label{scheme strictly local fiber and inverse image section}
Let $X$ be a scheme, $\xi$ be a geometric point of $X$, $\widebar{X}=\Spec(\mathscr{O}_{X,\xi})$ the strict localization of $X$, $F$ be a sheaf over $X$ and $\widebar{F}$ be its inverse image over $\widebar{X}$. Then we have a functorial isomorphism
\[F_\xi\stackrel{\sim}{\to}\Gamma(\widebar{X},\widebar{F}).\]
\end{corollary}
\begin{proof}
In fact, $\xi$ can be considered as a geometric point of $\widebar{X}$, and it suffices to apply \cref{scheme strictly local etale global section isomorphic to fiber} and the transitivity of fibers.
\end{proof}

\subsection{Applications to the calculation of \texorpdfstring{$R^pf_*$}{Rf}}
Let $f:X\to Y$ be a morphism of schemes and $F$ be an abelian sheaf over $X$. In view of \cref{scheme etale site fiber functor conservative}, to determine the sheaf $R^pf_*(F)$, it suffices to determine the geometric fibers $R^pf_*(F)_{\bar{y}}$ for $y\in Y$. But by \cref{ringed topos morphism higher direct image prop}, $R^pf_*(F)$ is the sheaf associated with the presheaf
\[\mathcal{H}^p:Y'\mapsto H^p(X\times_YY',F)\]
over $Y$, so by (\ref{scheme etale site fiber functor expression-1}),
\[R^pf_*(F)_{\bar{y}}=\rlim_{Y'}\mathcal{H}^p(Y')\]
where $Y'$ runs through the opposite category of \'etale neighborhoods of $\bar{y}$ in $Y$. By choosing an affine open neighborhood of $y$ in $Y$, we can take the above limit in the cofinal subcategory of $Y'$ consisting of affine schemes over $U$, and we obtain an isomorphism
\begin{equation}\label{scheme etale site higher direct image fiber morphism-1}
R^pf_*(F)_{\bar{y}}\cong \rlim_{Y'} H^p(X\times_YY',F).
\end{equation}

We now consider the strict localization $\widebar{Y}=\Spec(\mathscr{O}_{Y,\bar{y}})=\rlim Y'$ of $Y$ at $\bar{y}$ and set $\widebar{X}=X\times_Y\widebar{Y}$. Since the projective system $X\times_YY'$ (induced from that of $Y'$ by base change) has affine transition morphisms, we see that the general conditions of (\cite{SGA4-2} \Rmnum{7} 5.1) are satisfied, so we have a caonical isomorphism
\[\widebar{X}=\llim X\times_YY'.\]
Denote by $\widebar{F}$ the sheaf over $\widebar{X}$ induced by $F$, we then obtain a canonical homomorphism
\[\rlim_{Y'}H^p(X\times_YY',F)\to H^p(\widebar{X},\widebar{F})\]
whence by composing with (\ref{scheme etale site higher direct image fiber morphism-1}), a canonical homomorphism
\begin{equation}\label{scheme etale site higher direct image fiber morphism-2}
R^pf_*(F)_{\bar{y}}\to H^p(\widebar{X},\widebar{F})
\end{equation}
which is clearly functorial on $F$.\par
Now suppose that $f:X\to Y$ is quasi-compact and quasi-separated, then so is the morphism $X'\times_YY'\to Y'$, and as $Y'$ is chosen to be affine, the $X\times_YY'$ are quasi-compact and quasi-separated. Using (\ref{scheme etale site higher direct image fiber morphism-1}) and the theorem of passing to limits (\cite{SGA4-2} \Rmnum{7} 5.8), we then obtain the following theorem:
\begin{theorem}\label{scheme qcqs etale site higher direct image fiber isomorphism}
Let $f:X\to Y$ be a quasi-compact and quasi-separated morphism, $F$ be an abelian sheaf over $X$, $y$ be a point of $\widebar{Y}$, and $\bar{y}$ be the geometric point lying over $y$. If $\widebar{Y}=\Spec(\mathscr{O}_{Y,\bar{y}})$ is the corresponding strict localization scheme, $\widebar{X}=X\times_Y\widebar{Y}$, and $\widebar{F}$ is the inverse image of $F$ over $\widebar{X}$, then the canonical homomorphism (\ref{scheme etale site higher direct image fiber morphism-2}) is an isomorphism
\[R^pf_*(F)_{\bar{y}}\stackrel{\sim}{\to} H^p(\widebar{X},\widebar{F}).\]
\end{theorem}

This statement brings the determination of the fibers of $R^pf_*(F)$ to the determination of the cohomology of a scheme above a strictly local scheme, and will be used constantly thereafter. Technically, it's \cref{scheme qcqs etale site higher direct image fiber isomorphism} that explains the important role of Henselian rings and strictly local rings in the study of \'etale cohomology.\par

Suppose that $f:X\to Y$ is a finite morphism. Then $\bar{f}:\widebar{X}\to\widebar{Y}$ is also a finite morphism, and as $\widebar{Y}$ is strictly local, the scheme $\widebar{X}$ is a finite sum of strictly local schemes $\widebar{X}_i$ (cf. \cite{EGA4-4} 18.8.10). Therefore, using \cref{scheme strictly local etale cohomology trivial}, we have
\begin{equation}\label{scheme morphism etale finite direct image char-1}
H^p(\widebar{X},\widebar{F})=0\for p>0.
\end{equation}
On the other hand, we note that the components $\widebar{X}_i$ of $\widebar{X}$ corresponds to points $\bar{x}_i$ of $\widebar{X}$ lying over the closed point $\bar{y}$ of $\widebar{Y}$, i.e. to points of $\widebar{X}_{\bar{y}}=X_y\otimes_{\kappa(y)}\widebar{\kappa(y)}$. Therefore, these poitns can be considered as geometric points of $X$, and $\widebar{X}_i$ is then none other than the strict localization of $X$ at $\bar{x}_i$. By \cref{scheme strictly local fiber and inverse image section}, we then have $H^0(\widebar{X}_i,\widebar{F})\cong F_{\bar{x}_i}$, whence
\begin{equation}\label{scheme morphism etale finite direct image char-2}
H^0(\widebar{X},\widebar{F})=\prod_iF_{\bar{x}_i},
\end{equation}
which is a functorial isomorphism on the sheaf $F$. The previous formule (\ref{scheme etale site higher direct image fiber morphism-1}) and (\ref{scheme etale site higher direct image fiber morphism-2}) then proves the following assertion:
\begin{proposition}\label{scheme morphism etale finite direct image char}
Let $f:X\to Y$ be a finite morphism of schemes and $y$ be a point of $Y$. Then for any sheaf $F$ over $X$, we have a canonical isomorphism
\begin{equation}\label{scheme morphism etale finite direct image char-3}
f_*(F)_{\bar{y}}\stackrel{\sim}{\to} \prod_{\bar{x}\in X_y\otimes_{\kappa(y)}\widebar{\kappa(y)}}F_{\bar{x}},
\end{equation}
(therefore the formation of $f_*$ commutes with base change) and if $F$ is an abelian sheaf, we have 
\begin{equation}\label{scheme morphism etale finite direct image char-4}
R^pf_*(F)=0\for p>0.
\end{equation}
\end{proposition}

We note that the first formula of \cref{scheme morphism etale finite direct image char} is in fact independent of the result of \cref{scheme qcqs etale site higher direct image fiber isomorphism} and the theorem of passing to limits (\cite{SGA4-2} \Rmnum{7} 5.7), and that it implies (thanks to \cref{scheme etale site fiber functor conservative}) that $f_*$ is an exact functor on the category of abelian sheaves, whence $R^pf_*(F)=0$ for $p>0$.

\begin{corollary}\label{scheme morphism etale integral direct image vanish}
Let $f:X\to Y$ be an integral morphism. Then for any abelian sheaf $F$ over $X$, we have $R^pf_*(F)=0$ for $p>0$. Moreover, the functor $f_*$ over the sheaf of sets commutes with base change.
\end{corollary}
\begin{proof}
In fact, we can reduce (thanks to \cref{scheme etale site fiber functor conservative}) to the case where $Y$ is strict local. But then $Y=\Spec(A)$, $X=\Spec(B)$, with $B$ being an integral algebra over $A$, and as $B=\rlim B_i$, where $B_i$ runs through subalgebras of finite type (hence finite over $A$) of $B$, we have $X=\llim_iX_i$, where $X_i=\Spec(B_i)$. In view of (\cite{SGA4-2} \Rmnum{7} 5.13), we can then assume that $f$ is finite, and the claim follows from \ref{scheme morphism etale finite direct image char}.
\end{proof}

\begin{corollary}\label{scheme immersion etale pushpull isomorphism}
Let $f:X\to Y$ be an immersion. Then for any sheaf $F$ over $X$, the canonical morphism $f^*f_*(F)\to F$ is an isomorphism.
\end{corollary}
\begin{proof}
As $f$ factors into a closed immersion with an open immersion, and the corollary is trivial for open immersions (\cite{SGA4-1} \Rmnum{4}), we may assume that $f$ is closed. Then for any $x\in X$, by transitivity, the fiber $(f^*f_*(F))_{\bar{x}}$ is equal to $(f_*(F))_{\bar{x}}$, so it suffices to prove that the canonical homomorphism
\[(f_*(F))_{\bar{x}}\to F_{\bar{x}}\]
is bijective, which follows from \cref{scheme morphism etale finite direct image char}.
\end{proof}

\subsection{Localization functors and supports}
Let $U$ be a Zariski open of a scheme $X$. Then $U\in\Ob(X_\et)$, and in fact that $U$ is a sub-object of the final object $X$ of $X_\et$, hence defines a sub-object $\widetilde{U}$ of the final object of $\Sh(X_\et)$, i.e. an open of the \'etale topos $X_\et$ of $X$ (cf. \cite{SGA4-1} 8.3).
\begin{proposition}\label{scheme etale topos open given by Zariski}
The preceding map $U\mapsto\widetilde{U}$ is an isomorphism from the ordered set of (Zariski) open subsets of $X$ to the set of open subtopoi of the \'etale topos $X_\et$.
\end{proposition}
\begin{proof}
As $X_\et\to\Sh(X_\et)$ is fully faithful, we see that the map $U\mapsto\widetilde{U}$ is order preserving, and in particular injective. To see that it is surjective, consider a subsheaf $F$ of the final sheaf $\widetilde{X}$, and consider the objects of $(X_{\et})_{/F}$, i.e. the \'etale schemes $X'$ over $X$ such that $F(X')\neq\emp$ (note that, since $F$ is a subobject of $\widetilde{X}$, $F(U)$ is either empty or a singleton). As $X'\to X$ is \'etale, it is an open map (\cite{EGA4-2} 2.4.6), and in particular its image is open in $X$. Let $U$ be the union of the images of $X'\in\Ob((X_{\et})_{/F})$. As the family $\{X'\to U:X'\in\Ob((X_{\et})_{/F})\}$ is surjective, hence covering, we conclude by the sheaf condition that there is a unique element in $F(U)$ which maps to the unique element of $F(X')$ for each $X'$. In other words, $U$ is an object of $(X_{\et})_{/F}$, so $(X_\et)_{/F}=(X_\et)_{/U}$, and $F=U$.
\end{proof}

By \cref{scheme etale topos open given by Zariski}, we can therefore unambiguously speak of an "open" of $X$, without specifying whether we are considering the usual Zariski topology or the \'etale topology.

\begin{corollary}\label{scheme etale topos comma on open char}
Let $U$ be an open of $X$ and $j:U\to X$ be the canonical inclusion. Then the functor 
\[j^*:\Sh(X_\et)\to\Sh(U_\et)\]
induces an equivalence of categories
\[\Sh(X_\et)_{/\widetilde{U}} \stackrel{\sim}{\to} \Sh(U_\et).\]

\end{corollary}
\begin{proof}
In general, for any site $\mathcal{C}$ where finite projective limit exists, and for any sub-object $U$ of the final object $e$ of $\mathcal{C}$, consider the functor $j:\mathcal{C}\to\mathcal{C}_{/U}$ defined by $j(S)=S\times U$. Then $g$ is a morphism of sites and $j^*:\Sh(\mathcal{C})\to\Sh(\mathcal{C}_{/U})$ induces an equivalence $\Sh(\mathcal{C})_{/\widetilde{U}}\stackrel{\sim}{\to}\Sh(\mathcal{C}/_{U})$. The corollary then follows from the fact that $U_\et$ is canonically isomorphic to $(X_\et)_{/U}$.
\end{proof}

In a pictorial way, we can express \cref{scheme etale topos comma on open char} by saying that the operations of "restriction to opens" in the usual sense of diagrams on the one hand, and in the sense of topos on the other, are compatible. Here is an analogous compatibility for "restriction to a closed":
\begin{theorem}\label{scheme closed immersion etale topos restriciton prop}
Let $X$ be a scheme, $Z$ be a closed subscheme of $X$, $U=X-Z$ be the open complement, $i:Z\to X$ and $j:U\to X$ be the canonical immersions. Then the functor
\[i_*:\Sh(Z_\et)\to\Sh(X_\et)\]
is fully faithful, and for any sheaf $F$ over $X$, $F$ is isomorphic to a sheaf of the form $i_*(G)$ if and only if $j^*(F)$ is isomorphic to the final sheaf $\widetilde{U}$ over $U$.
\end{theorem}
\begin{proof}
As $i_*$ and $i^*$ are adjoints of each other, the fact that $i_*$ is faithfully exact is equivalent to the fact that the functorial homomorphism
\[i^*(i_*(G))\to G\]
is an isomorphism, which follows from \cref{scheme immersion etale pushpull isomorphism}. On the other hand, if $G\in\Sh(Z_\et)$, then we verify that for any $V\in U_\et$,
\[i_*(G)(V)=G(V\times_XZ)=G(\emp)\]
so $j^*(i_*(G))$ is the final sheaf over $U$ (\cref{scheme etale topos comma on open char}). Conversely, if $F\in\Sh(X_\et)$ is such that $j^*(F)$ is the final sheaf, to prove that $F$ is of the form $i_*(G)$, it suffices to prove that the canonical morphism
\[F\to i_*(i^*(F))\]
is an isomorphism, or equivalently it induces isomorphism on fibers for any $x\in X$. If $x\in U$, this follows from the hypothesis on $F$, and if $x\in Z$, by (\ref{scheme fiber functor transitivity}), we are reduced to verify that the homomorphism induced by
\[i^*(F)\to i^*(i_*(i^*(G)))\]
is an isomorphism at $\bar{x}$. But this follows from \cref{scheme immersion etale pushpull isomorphism} applied to $i^*(F)$ and $i$, whence the claim.
\end{proof}

\begin{corollary}\label{scheme closed immersion etale topos char}
The functor $i_*$ induces an equivalence from the category of abelian sheaves over $Z$ to the category of abelian sheaves over $X$ whose restriction to $U=X-Z$ is zero.
\end{corollary}

In view of \cref{scheme etale topos open given by Zariski}, we can identify open subtopoi of the topos $\Sh(X_\et)$ with open subsets $U$ of $X$, and \cref{scheme closed immersion etale topos restriciton prop} tells us that the complement topos $\mathcal{E}_{U^c}$ of (\cite{SGA4-1} \Rmnum{4} 3) is canonically equivalent to the topos $\Sh(Z_\et)$, where $Z=X-U$ is endowed with the induced reduced scheme structure. We can therefore apply the results of (\cite{SGA4-1} \Rmnum{4} 3), which allows us to view a sheaf $F$ over $X$ as a triple $(F,G,u)$, where $F$ is a sheaf over $U$, $F$ is a sheaf over $U$ and $u:F\to i^*(j_*(G))$ is a homomorphism. We can also use the functors $i^!$ and $j_!$ defined in (\cite{SGA4-1} \Rmnum{5} 3):
\[j_!:\Ab(U_\et)\to \Ab(X_\et),\quad i^!:\Ab(X_\et)\to \Ab(Z_\et)\]
where $\Ab$ means the category of abelian sheaves. In view of the preceding arguments, we introduce, for an abelian sheaf $F$ on $X$ (resp. a section $s$ of a sheaf) the notion of the support of $F$ (resp. of $\varphi$), which is defined to be the complement of the largets open subset of $X$ on which the restriction of $F$ (resp. $\varphi$) is zero. Also, we apply the notations $H_Y^p(X,F)$ and $\mathcal{H}^p_Y(F)$ to denote $H^p(\mathcal{Z},F)$ and $\mathcal{H}^p_{\mathcal{Z}}(F)$, where $\mathcal{Z}$ is the complement of $\mathcal{E}_{/U}$. In particular, we have $\mathcal{H}^p_Y=R^pi_!$, etc. One may consult (\cite{SGA4-1} \Rmnum{5} 6) for the general properties of these functors.

\subsection{Specialization functors of fiber functors}
In \autoref{*}, we have associated for any geometric point $\xi$ of a scheme $X$, a strictly local $x$-scheme
\[\widebar{X}(\xi)=\Spec(\mathscr{O}_{X,\xi}),\]
which depends, in fact, only on the geometric point $\xi$ defined by the separable closure $\widebar{\kappa(x)}$ of $\kappa(x)$ in $\Omega=\kappa(\xi)$. We often restrict ourselves to geometric points $\xi=\Spec(\Omega)$ which are separable over $X$, i.e. such that $\Omega$ is a separable closure of $\kappa(x)$, or equivalently $\xi=\bar{x}$. An $X$-scheme $Z$ is called a \textbf{strict localization} of $X$ if it is $X$-isomorphic to a scheme of the form $\Spec(\mathscr{O}_{X,\bar{x}})$, and we then see that
\[\xi\mapsto\Spec(\mathscr{O}_{X,\xi})=\widebar{X}(\xi)\]
is a functor from the category of separable geometric points over $X$ to the category of $X$-schemes that are strict localizations of $X$. This is not an equivalence of categories if we consider the $X$-morphisms in the second category, since there may be $X$-morphisms that are not isomorphisms. We therefore make the following definition:
\begin{definition}
Let $\xi$, $\xi'$ be two geometric points of the scheme $X$. A \textbf{specialization} $\xi'\rightsquigarrow\xi$ is defined to be an $X$-morphism 
\[\widebar{X}(\xi')\to\widebar{X}(\xi)\]
of the corresponding strict localizations. We say that $\xi$ is a specialization of $\xi'$, or that $\xi'$ is a generalization of $\xi$, if there exists a specialization from $\xi'$ to $\xi$.
\end{definition}
It is clear that compositions of specilizations make sense, so the geometric points of $X$ form a category, which is equivalent to the full subcategory of $\mathbf{Sch}_{/X}$ formed by strict localizations of $X$.

\begin{lemma}\label{scheme strict localization morphism to scheme lemma}
Let $X$ be a scheme, $Z$ be an $X$-scheme which is isomorphic to a filtered projective limit of \'etale $X$-schemes $X_i$ with affine transition morphisms, $\xi'$ be a geometric point of $X$, $Z'=\widebar{X}(\xi')$ be the corresponding strict localization.
\begin{enumerate}
    \item[(a)] The restriction map 
    \[\Hom_X(Z',Z)\to\Hom_X(\xi',Z)\]
    is bijective.
    \item[(b)] For the two members in (a) to be nonempty, it is necessary and sufficient that the image $x'$ of $\xi'$ in $X$ is contained in that of $Z$.
    \item[(c)] Let $T$ be a $Z$-scheme, for that $T$ is a strict localization of $Z$, it is necessary and sufficient that it is a strict localization of $X$.
\end{enumerate}
\end{lemma}
\begin{proof}
To prove (a), we can assume that $Z$ is one of the $X_i$, i.e. where $Z$ us \'etale over $X$. In this case, we have the following canonical bijections
\[\Hom_X(Z',Z)\cong \Hom_{Z'}(Z',Z'\times_XZ),\quad \Hom_X(\xi',Z)\cong \Hom_{\xi'}(\xi',\xi'\times_XZ).\]
It then suffices to show for any etale $Z'$-scheme $W$ that the canonical map
\[\Hom_{Z'}(Z',W)\stackrel{\sim}{\to} \Hom_{\xi'}(\xi',\xi'\times_{Z'}W)\]
is bijective, which follows from \cref{scheme unramified connected section correspond connected component} and (Fulei, 2.8.3(\rmnum{7})).\par
As for (b), we note that if $x'$ is the image of a point $z$ of $Z$, then $\kappa(z)$ is a separable extension of $\kappa(x')$, so there exists a $\kappa(x')$-homomorphism from $\kappa(z)$ into $\kappa(\xi')$. The last assertion follows from (\cref{*}).
\end{proof}

\begin{proposition}\label{scheme geometric point specialization bijection to Hom}
Let $\xi$, $\xi'$ be two geometric points of a scheme $X$. Then the restriction map defines a bijection from the set $\Hom_X(\widebar{X}(\xi'),\widebar{X}(\xi))$ of specilization morphisms from $\xi'$ to $\xi$ to the set of $X$-morphisms $\Hom_X(\xi',\widebar{X}(\xi))$.
\end{proposition}
\begin{proof}
This follows from \cref{scheme strict localization morphism to scheme lemma}, as $\widebar{X}(\xi')$ satisfies the conditions of \cref{scheme strict localization morphism to scheme lemma}.
\end{proof}

\begin{corollary}\label{scheme geometric point specialization iff underlying point}
For that $\xi$ is a specialization of $\xi'$, it is necessary and sufficient that the same is true for the images $x$, $x'$ of $\xi$, $\xi'$ in $X$, i.e. that $\x'\rightsquigarrow x$.
\end{corollary}
\begin{proof}
As the morphism $\Spec(\mathscr{O}_{X,\xi})\to\Spec(\mathscr{O}_{X,x})$ is faithfully flat, hence surjective, it suffices to apply \cref{scheme strict localization morphism to scheme lemma}~(b) (cf. \cref{scheme local canonical morphism prop}).
\end{proof}

\begin{corollary}\label{scheme geometric point category equivalence}
For any scheme $X$, let $\Pt(X)$ be the category of geometric points of $X$, with morphisms given by specializations. Let $\xi$ be a geometric point and $\widebar{X}(\xi)$ be the corresponding strict localization. Then we have an equivalence of categories:
\[\Pt(\widebar{X}(\xi))\stackrel{\sim}{\to} \Pt(X)_{/\xi}\]
obtained by associating any geometric point $\xi'$ of $\widebar{X}(\xi)$ with the corresponding geometric point of $X$ and the specialization induced by the structural morphism $\xi'\to\widebar{X}(\xi)$.
\end{corollary}
\begin{proof}
By \cref{scheme geometric point specialization bijection to Hom} the described functor is fully faithful, and it is essentially surjective by definition.
\end{proof}

In other words, giving a generalization $\xi'$ of a geometric point $\xi$ is essentially equivalent to giving a geometric point of $\widebar{X}(\xi)$. We also note that in view of \cref{scheme strict localization morphism to scheme lemma}~(c), the corresonding morphism $\widebar{X}(\xi')\to\widebar{X}(\xi)$ makes $\widebar{X}(\xi')$ into a strict localization of $\widebar{X}(\xi)$ relative to $\xi'$.\par


Now for any geometric point $\xi$ of $X$ and any sheaf $F$ over $X$, the fiber $F_\xi$ can be interprete as $\Gamma(\widebar{X}(\xi),\widebar{F}(\xi))$, where $\widebar{F}(\xi)$ is the inverse image of $F$ over $\widebar{X}(\xi)$. Then we see that any specialization
\[u:\xi'\to\xi\]
induces a canonical homomorphism
\[u^*:F_\xi\to F_{\xi'}\]
called the \textbf{specialization homomorphism} associated with the specialization $u$. It is evident, in view of the transitivity of inverse images, that the associated specialization homomorphism are transitive: $(wu)^*=u^*w^*$.\par
Let $\mathcal{X}$ be a topos, recall that a "\textit{fiber functor}", of (by abusing of languages) a "\textit{point}" of the topos $\mathcal{X}$, is defined to be a morphism from the topos $\mathbf{Set}$ (which is isomorphic to the sheaf category over a space reduced to a point) into $\mathcal{X}$. Equivalently, since $\mathbf{Set}$ is initial among topoi, this is given by a functor
\[\varphi^*:\mathcal{X}\to\mathbf{Set}\]
which commutes with inductive limits and finite projective limits. We can consider the set of fiber functors of $\mathcal{X}$ as objects of a full subcategory $\sHom(\mathcal{X},\mathbf{Set})$, called the \textbf{category of fiber functors of the topos $\mathcal{X}$}. Its opposite category is called the \textbf{category of points of $\mathcal{X}$}, and denoted by $\Pt(\mathcal{X})$ (cf. \cite{SGA4-1} \Rmnum{4} 6.1).\par
If $\mathcal{X}$ is of the form $\Sh(X_\et)$ where $X$ is a scheme, we then have a functor
\begin{equation}\label{scheme etale site fiber functor category isomorphism-1}
\Pt(X)\to\Pt(\Sh(X_\et))
\end{equation}
sending a geometric point $\xi$ of $X$ to the fiber functor $F\mapsto F_\xi$ it corresponds.

\begin{theorem}\label{scheme etale site fiber functor category isomorphism}
Let $X$ be a scheme. The functor (\ref{scheme etale site fiber functor category isomorphism}) is an equivalence from the category of geometric points of $X$ to the category of points of the \'etale topos $\Sh(X_\et)$.
\end{theorem}
\begin{proof}

\end{proof}

\subsection{Spectral sequences for integral morphisms}
\begin{proposition}[\textbf{Descent Spectral Sequence}]\label{scheme etale cohomology descent spectral sequence}
Let $f:X\to Y$ be a surjective integral morphism and $F$ be an abelian sheaf over $Y$. For any integer $p\geq 0$, let $\mathcal{H}^p(F)$ be the presheaf over $\mathbf{Sch}_{/Y}$ defined by
\[\mathcal{H}^p(F)(Z)=H^i(Z,F_Z)\]
where $F_Z$ is the inverse image of $F$ on $Z$. Then there exists a functorial spectral sequence
\[E_2^{p,q}=H^p(X/Y,\mathcal{H}^p(F))\Rightarrow H^{p+q}(X,F).\]
\end{proposition}
Here the symbol $H^p(X/Y,G)$, for a presheaf $F$ over $\mathbf{Sch}_{/Y}$, denotes the \textit{relative $p$-th \v{C}ech cohomology group} defined by the complex 
\[C^n(X/Y,F)=F(X_{n+1})\]
where $X_{n+1}$ is the $(n+1)$-fold fiber product of $X$ over $Y$\footnote{If $f:X\to Y$ is \'etale, this is equal to the \v{C}ech cohomology group $H^p(R,F)$, where $R$ is the sieve generated by the covering $f:X\to Y$.}. To establish \cref{scheme etale cohomology descent spectral sequence}, let $p_n:X_{n+1}\to Y$ be the canonical projection, and put
\[A^n=(p_n)_*(\Z_{X_{n+1}})\]
where $\Z_{X_{n+1}}$ denotes the constant sheaf $\Z$ on $X_{n+1}$. Then $(A^n)_{n\in\N}$ form a simplicial abelian sheaf over $Y$, whence a complex $A^\bullet$ of abelian sheaves over $Y$. It is evident that we have a canonical homomorphism
\begin{equation}\label{scheme etale descent spectral sequence-1}
\varepsilon:\Z_Y\to A^0.
\end{equation}
\begin{lemma}\label{scheme etale generalized Cech resolution}
The complex $A^\bullet$, endowed with the homomorphism (\ref{scheme etale descent spectral sequence-1}), is a resolution of $\Z_Y$. More generally, for any abelian sheaf $F$ over $Y$, $A^\bullet\otimes_\Z F$ is a resolution of $F$.
\end{lemma}
\begin{proof}
We can suppose that $Y$ is affine, so $Y=\Spec(A)$, $X=\Spec(B)$, where $B$ is an integral $A$-algebra. We then have $B=\rlim B_i$, where $B_i$ runs through finite subalgebras of $B$, so $X=\llim X_i$, where $X_i=\Spec(B_i)$. Using (\cite{SGA4-2} \Rmnum{7}, 5.11), we see that the agumented complex $A^\bullet(X/Y)$ is the inductive limit of the augmented complex $A^\bullet(X_i/Y)$ (where $A^\bullet(X_i/Y)$ is the similar complex defined for $X_i$), so we may assume that $f$ is finite. It suffices to prove that for any geometric point $\bar{y}$ of $Y$, the complex $A_{\bar{y}}^\bullet$ is a resolution of $\Z_{\bar{y}}$. But if $X_{\bar{y}}$ is the fiber of $X$ at $\bar{y}$, it follows from \cref{scheme morphism etale finite direct image char} that the complex $A^\bullet_{\bar{y}}$ is none other than the analogue complex $A^\bullet(X_{\bar{y}}/\bar{y})$, so we may assume that $Y$ is the spectrum of a separably closed field $k$. Using \cref{scheme etale site equivalence if integral surj radical}, we can also suppose that $k$ is algebraically closed and $X$ is reduced, so $X$ is of the form $I_Y$, where $I$ is a finite set. But then the complex $A^\bullet\otimes_\Z F$ is identified with the trivial cochain complex of the index set $I$ with coefficients in $F_{\bar{y}}$, so it is a resolution of $F_{\bar{y}}$.
\end{proof}
\begin{proof}
As a concequence of \cref{scheme etale generalized Cech resolution}, we obtain a hypercohomology spectral sequence
\[E_2^{p,q}=H^p(H^q(Y,A^\bullet\otimes_{\Z}F))\Rightarrow H^{p+q}(Y,A^\bullet\otimes_{\Z}F)=H^{p+q}(Y,F).\]
On the other hand, by reducing to the case where $f$ is finite and using \cref{scheme morphism etale finite direct image char}, we have a canonical isomorphism $A^n\otimes_{\Z}F\stackrel{\sim}{\to} (p_n)_*(p_n^*(F))$, so
\[H^q(Y,A^\bullet\otimes_{\Z}F)\cong H^q(X_{n+1},p_n^*(F))=\mathcal{H}^q(F)(X_{n+1})\]
which gives the desired spectral sequence.
\end{proof}

\begin{remark}
If we are given a locally finite closed covering $(Y_i)$ of $Y$ and $X=\coprod_iY_i$, then the canonical morphism $f:X\to Y$ is clearly finite, and the $E_2$ page of spectral sequence of (\ref{scheme etale cohomology descent spectral sequence}) is given by the cohomology of the complex
\[C^n(X/Y,\mathcal{H}^p(F))=H^p(X_n,F|_{X_n})=\bigoplus H^q(Y_{i_0\dots i_p},F|_{Y_{i_0\dots i_p}}),\]
where $Y_{i_0\dots i_p}=Y_{i_0}\cap\cdots\cap Y_{i_p}$. This is therefore the analogue of the Leray spectral sequence for a locally finite closed cover of an ordinary topological space.
\end{remark}

\begin{remark}
One should note the analogy of the spectral sequence of \cref{scheme etale cohomology descent spectral sequence} with the Leray spectral sequence for a covering $(X_i)$ of $Y$ (in this case $X_i$ is \'etale over $Y$). The latter would be obtained formally by writing the spectral sequence \cref{scheme etale cohomology descent spectral sequence} for $X=\coprod_iX_i$. It is possible in fact that these two spectral sequences admit a common generalization, which would be valid whenever we have a family of morphisms $\{X_i\to Y\}$, which is a "universally effective descent family" for the fibre category of \'etale sheaves. 
\end{remark}

\begin{proposition}[\textbf{Hochschild-Serre Spectral Sequence}]\label{scheme etale Hochschild-Serre spectral sequence}
Let $Y$ be a scheme, $G$ be a profinite group, $(G_i)$ be a projective system of finite quotient groups of $G$, and $(X_i)$ be a projective system of principal $G_i$-bundles of $Y$ over the system $(G_i)$. Let $X=\llim_iX_i$ (cf. \cite{SGA4-2} \Rmnum{7} 5.1) and $F$ be an abelian sheaf over $Y$. Then we have a spectral sequence
\[E_2^{p,q}=H^p(G,\llim H^q(X_i,F_i))\Rightarrow H^{p+q}(Y,F),\]
where $F_i$ is the inverse image of $F$ over $X_i$, and $H^p(G,-)$ is the Galois cohomology.
\end{proposition}
\begin{proof}
Then $f:X\to Y$ is a covering in $Y_\et$, so we can apply the Leray spectral sequence for this morphism. In view of the canonical isomorphism $X_{n+1}\cong X\times G^n$, we see that for any presheaf $F$ over $\mathbf{Sch}_{/Y}$, the complex $C^\bullet(X/Y,F)$ is equal to the complex of cochains on $F(X)$ with coefficients in $G$, whence the proposition. 
\end{proof}

\begin{corollary}\label{scheme qcqs etale Hochschild-Serre spectral sequence}
Suppose that $Y$ is quasi-compact and quasi-separated, then the spectral sequence (\ref{scheme etale Hochschild-Serre spectral sequence}) becomes
\[E_2^{p,q}=H^p(G,H^q(X,F_X))\Rightarrow H^{p+q}(Y,F).\]
\end{corollary}
\begin{proof}
In fact, in view of (\cite{SGA4-2} \Rmnum{7}, 5.8), we then have a canonical isomorphism
\begin{equation*}
\rlim_iH^q(X_i,F_i)\cong H^q(X,F_X).\qedhere
\end{equation*}
\end{proof}

\begin{corollary}\label{scheme local Henselian etale cohomology to closed point}
Let $Y$ be a local Henselian scheme with closed point $y$, $F$ be an abelian sheaf over $Y$, and $F_0$ the induced sheaf over $Y_0=\Spec(\kappa(y))$. Then the canonical homomorphisms
\[H^p(Y,F)\to H^p(Y_0,F_0)\]
are isomorphisms.
\end{corollary}
\begin{proof}
Let $\bar{y}$ be a geometric point over $y$, corresponding to a separably closure $\kappa(\bar{y})$ of $\kappa(y)$. As $Y$ is Henselian, the strict localization $X$ of $Y$ at $\bar{y}$ is the projective limit of Galois \'etale neighborhoods $X_i$ of $\bar{y}$, so we can apply \cref{scheme etale Hochschild-Serre spectral sequence}. As $H^q(X,F_X)=0$ for $q>0$ in view of \cref{scheme strictly local etale cohomology trivial}, we then conclude the isomorphisms
\[H^p(G,F(X)) \stackrel{\sim}{\to} H^p(Y,F),\]
where $G$ is the Galois group of $X$ over $Y$, isomorphic to $\Gal(\kappa(\bar{y})/\kappa(y))$. Similarly, we have
\[H^p(G,F_0(X_0)) \stackrel{\sim}{\to} H^p(Y_0,F_0),\]
where $X_0=X\times_{Y_0}Y\cong\Spec(\kappa(\bar{y}))$. Now the restriction homomorphism $F(X)\to F_0(X_0)$ is an isomorphism by \cref{scheme strictly local fiber and inverse image section}, whence the assertion of the corollary.
\end{proof}
\subsection{Appendix: representability lemma}
\begin{lemma}[\textbf{Representability Lemma}]\label{scheme etale representability lemma}
A sheaf $F$ over a scheme $X$ is representable if and only if the following conditions are satisfied:
\begin{enumerate}
    \item[(a)] The stalks of $F$ are finite,
    \item[(b)] For each \'etale scheme $U\to X$ over $X$ and two sections $s,t\in F(U)$, the set of points $x\in U$ such that the fibers $s_{\bar{x}}$, $t_{\bar{x}}$ are different in $F_{\bar{x}}$ is an open subset.
\end{enumerate}
\end{lemma}

\section{Constructible sheaves and cohomology of curves}
Let $X$ be a topological space. A sheaf $\mathscr{F}$ over $X$ is called \textbf{locally constant} if each point of $X$ has an open neighbourhood $U$ such that the restriction of $\mathscr{F}$ to $U$ is isomorphic (in the category of sheaves on $U$) to a constant sheaf. It is a well-known fact that for a sufficiently good space, the category of locally constant sheaves of sets on $X$ is equivalent to the category of coverings of $X$. Since \'etale morphisms are regarded as covering morphisms, we are therefore interested in the description of locally constant sheaves in the \'etale topology, together with their cohomology. However, the class of locally constant sheaves is well-bahaved (for example it is not closed under direct images with respect to proper maps, even closed immersions), so it become necessary to consider the smallest useful class of sheaves containing the finite constant sheaves (since we only consider finite \'etale coverings), which turns out to be \textit{constructible sheaves}. The constructible sheaves over a scheme $X$ form an ableian category, and is Noetherian if $X$ is quasi-compact. Form another perspective, constructible sheaves are precisely those that can be represented by \'etale algebraic spaces of finite type.
\subsection{Torsion sheaves}
Let $\mathcal{X}$ be a topos and $F$ be an abelian sheaf over $\mathcal{X}$. We can then define the multiplication by $n$ (where $n$ is an integer) on $F$, induced by the same operation on $\mathbf{Ab}$, and we denote by $F[n]$ the kernel of this multiplication. In other words, for any object $X$ of $\mathcal{X}$, $F[n](X)$ is the $n$-torsion subgroup of $F(X)$. If $n$ and $m$ are two integers such that $n\mid m$, then there is a natrual inclusion map
\[F[n]\to F[m]\]
which sends, for any object $X$ of $\mathcal{X}$, the subgroup $F[n](X)$ into $F[m](X)$.

\begin{definition}
Let $p$ be a prime number (or a set of prime numbers). A sheaf $F$ is said to be \textbf{$p$-torsion}, or a \textbf{$p$-sheaf}, if the canonical morphism
\begin{align}\label{topos torsion abelian sheaf def}
\rlim_nF[n]\to F
\end{align}
is bijective, where $n$ runs through the set of integers such that $p\dashv n$, i.e. such that every prime divisor of $n$ belongs to $p$ (if $p$ is a prime number, this means $n$ is a power of $p$). If $p$ is equal to the set of all prime numbers, then $F$ is simply called a \textbf{torsion-sheaf}.
\end{definition}

The most important torsion sheaves within our consideration are constant sheaves induced by finite abelian groups: in fact, if $G$ is a finite abelian group, then the constant sheaf defined by $G$ is $p$-torsion, where $p$ is the set of prime divisors of $n$. In practice, we often take $G=\Z/n\Z$, where $n$ is coprime to the characterstic of the base field.

\begin{proposition}\label{topos p-torsion abelian sheaf prop}
Let $\mathcal{X}$ be a topos, $F$ be a sheaf on $\mathcal{X}$, and $p$ be a set of prime numbers.
\begin{enumerate}
    \item[(a)] The sheaf $F$ is $p$-torsion if and only if $F$ is the sheaf associated with a presheaf with values in $p$-torsion abelian groups\footnote{An abelian group $G$ is said to be $p$-torsion if the canonical homomorphism $\rlim_{p\dashv n} G[n]\to G$ is an isomorphism, where $n$ runs through the set of integers such that all prime divisors of $n$ belong to $p$.}. In this case, this presheaf is isomorphic to the inductive limit $\rlim_n F[n]$, taken in the category of presheaves.
    \item[(b)] If $F$ is $p$-torsion and $X$ is a quasi-compact\footnote{An object $X$ of a topos is called \textbf{quasi-compact} if any covering family $\{X_i\to X\}$ can be dominated by a finite covering family. A morphism of topos if called quasi-compact if the inverse image of any quasi-compact object is still quasi-compact.} object of $\mathcal{X}$, then $F(X)$ is a $p$-torsion group.
    \item[(c)] If $\mathcal{X}$ is locally of finite type (cf. \cite{SGA4-2} \Rmnum{6} 1.1), then $F$ is $p$-torsion if and only if for any quasi-compact object $X$ of $\mathcal{X}$, $F(X)$ is a $p$-torsion group. In this case, for any quasi-compact object $X$ of $\mathcal{X}$ and any integer $p\geq 0$, we have
    \[\rlim_{p\dashv n} H^p(X,F[n])\stackrel{\sim}{\to} H^p(X,F).\]
    \item[(d)] If $u:\mathcal{X}\to\mathcal{Y}$ is a morphism of topos and $G$ is a $p$-torsion sheaf over $\mathcal{Y}$, then the inverse image $u^*(G)$ is $p$-torsion over $\mathcal{X}$.
    \item[(e)] If $u:\mathcal{X}\to\mathcal{Y}$ is a quasi-compact morphism of topos locally of finite type and $F$ is a $p$-torsion sheaf over $\mathcal{X}$, then $R^pu_*(F)$ is a $p$-torsion sheaf over $\mathcal{Y}$ for any $p\geq 0$.
\end{enumerate}
\end{proposition}
\begin{proof}
It is clear that if a sheaf $F$ is $p$-torsion, then $F$ is the sheaf associated with the presheaf $P$ whose section group $P(X)$ is the subgroup of $p$-torsion elements of $F(X)$. Conversely, let $F=P^\#$, where $P$ is a presheaf with values in the category of $p$-torsion groups. From the exact sequence
\[\begin{tikzcd}
0\ar[r]&P[n]\ar[r]&P\ar[r,"n"]&P
\end{tikzcd}\]
we then deduce an exact sequence
\[\begin{tikzcd}
0\ar[r]&(P[n])^\#\ar[r]&F\ar[r,"n"]&F
\end{tikzcd}\]
whence $(P[n])^\#=F[n]$. As $\#$ commutes with inductive limits and $\rlim_{p\dashv n}P[n]\stackrel{\sim}{\to}P$, with limit taken in the category of presheaves, we then deduce that
\[\rlim_{p\dashv n}F[n]\stackrel{\sim}{\to} F\]
so $F$ is $p$-torsion. The last assertion of (a) also follows easily from this isomorphism.\par
Now let $F$ be $p$-torsion and $X$ be a quasi-compact object of $\mathcal{X}$. Put $P=\rlim_nF[n]$, with limit taken in the category of presheaves. Then $P$ can be considered as a sub-presheaf of $F$, so it is a separated and we have
\[P^\#(X)=\rlim\Big(\ker\big(\prod_iP(X_i)\rightrightarrows \prod_{i,j}P(X_i\times_XX_j)\big)\Big)\]
where the limit is taken for all covering families $\{X_i\to X\}$. But as $X$ is quasi-compact, it suffices to take finite covering familes, and for such families $\prod_iP(X_i)$ is $p$-torsion, so the corresponding kernel is $p$-torsion. Therefore $P^\#(X)=F(X)$ is a $p$-torsion abelian group, and this proves assertion (b).\par
Now assume that $\mathcal{X}$ is locally of finite type. To verify that $\rlim_nF[n]\to F$ is bijective, it suffices to consider their values over a generating family of $\mathcal{X}$. We are then reduced to the situation of (b), and this proves the first assertion of (c); the second assertion follows from (a). Finally, (d) follows from the fact that $u^*(G^\#)=(u^\star(G))^\#$, and (e) is a concequence of (c).
\end{proof}

We also need a non-abelian variant of $p$-torsion sheaves, which turns our to be techniquely subtle. We therefore restrict ourselves to \'etale topos over a scheme $X$.

\begin{definition}
Let $p$ be a prime number (or a set of prime numbers). A group $G$ is called a \textbf{$p$-group} if it is finite with order $n$ such that $p\dashv n$, and is called a \textbf{ind-$p$-group} if any finite subset of $G$ generates a $p$-group. Equivalently, this means that the finite sub-$p$-groups $G_\alpha$ form a filtered set and that $G=\rlim G_\alpha$. If $p$ is equal to the set of all prime numbers, then $G$ is simply called a \textbf{ind-finite group}.
\end{definition}

\begin{proposition}\label{scheme etale topos ind p-group prop}
Let $p$ be a prime number (or a set of prime numbers).
\begin{enumerate}
    \item[(a)] A subgroup or a quotient group of a ind-$p$-group is also a ind-$p$-group.
    \item[(b)] A filtered inductive limit of ind-$p$-groups is an ind-$p$-group.
    \item[(c)] A finite projective limit of ind-$p$-groups is an ind-$p$-group.
\end{enumerate}
\end{proposition}
\begin{proof}

\end{proof}

\begin{definition}
Let $X$ be a scheme. A sheaf $F$ of group over $X$ is called a sheaf of ind-$p$-groups (resp. a sheaf of ind-finite groups) if for any \'etale morphism $U\to X$, where $U$ is quasi-compact, $F(U)$ is an ind-$p$-group (resp. a ind-finite group).
\end{definition}

\begin{proposition}\label{scheme etale sheaf ind p-group prop}
Let $F$ be a \'etale sheaf of groups over a scheme $X$ and $p$ be a prime number (or a set of prime numbers).
\begin{enumerate}
    \item[(a)] $F$ is a sheaf of ind-$p$-groups if and only if for any geometric point $\xi$ of $X$, the fiber $F_\xi$ is an ind-$p$-group.
    \item[(b)] If $f:X\to Y$ is a morphism and $G$ is a sheaf of ind-$p$-groups, then $f^*(G)$ is a sheaf of ind-$p$-groups.
    \item[(c)] If $f:X\to Y$ is a quasi-compact morphism and $F$ is a ind-$p$-group over $X$, then $f_*(F)$ is a sheaf of ind-$p$-groups.
\end{enumerate}
\end{proposition}
\begin{proof}
In view of (\ref{scheme fiber functor transitivity}), assertion (b) follows from (a), and (c) is trivial by (\ref{scheme etale morphism induced on topos-2}) and \cref{scheme morphism qc permanence prop}. Suppose that $F$ is a sheaf of ind-$p$-groups, and let $\xi$ be a geometric point of $X$. Then $F_\xi=\rlim F(X')$, where $X'$ runs throught \'etale neighborhoods of $\xi$ in $X$ (\cref{scheme etale site fiber functor expression}). It is evident that the affine neighborhoods form a cofinal system, so $F_\xi$ is an inductive limit of ind-$p$-groups, whence an ind-$p$-groups by \cref{scheme etale topos ind p-group prop}. Conversely, suppose that for any geometric point $\xi$, the fiber $F_\xi$ is an ind-$p$-group and let $U\to X$ be an \'etale morphism, where $U$ is quasi-compact. Let $S\sub F(U)$ be a finite subset. For any given geometric point $\xi$ of $U$, the image of $S$ in $F_\xi$ then generates a finite $p$-group. As a finite group is of finite presentation, we conclude that there exists an \'etale neighborhood $U_\xi$ of $\xi$ in $U$ such that $S$ generates a finite $p$-group in $F(U_\xi)$\footnote{Not clear for the reference (\cite{SGA4-2} \Rmnum{8}, 4).}. Since $U$ is quasi-compact, finitely many $U_\xi$ cover $U$, say $\{U_1,\dots, U_n\}$. The image of $S$ in $\prod F(U_i)$ then genetates a finite group with order divisible by $p$, and as $F(U)\sub\prod F(U_i)$, we conclude that $S$ generates a finite $p$-subgroup in $F(U)$, so $F$ is a sheaf of ind-$p$-groups.
\end{proof}

\subsection{Constructible sheaves}
Let $\mathcal{X}$ be a topos and $e$ be its final object. If $S$ is a set, we can define a sheaf $S_\mathcal{X}$ associated with the presheaf $X\mapsto S$ for any object $X$ in $\mathcal{X}$. The object of $\mathcal{X}$ representing $S_\mathcal{X}$ is then $\coprod_{s\in S}e$, and the sheaf $S_\mathcal{X}$ is called the \textbf{constant sheaf} with value $S$. Similarly, we can define the notion of constant groups, constant $A$-modules ($A$ being a ring), and constant abelian sheaves. A morphism $f_\mathcal{X}:S_\mathcal{X}\to T_\mathcal{X}$ of constant sheaves is called \textbf{constant} if it is induced by a map of sets $f:S\to T$\footnote{In general, the functor $\mathbf{Set}\to\mathcal{X}$ sending $S$ to $S\times e$ is not fully faithful.}.\par
A sheaf $F$ is called \textbf{locally constant} if there exists a covering $\{e_i\to e\}$ of $e$ such that $F$ is constant over each $e_i$. We define similarly the notion of locally constant sheaves of groups or $A$-modules, and locally constant morphism $f:F\to G$, if $F,G$ are locally constant sheaves. Finally, a locally constant sheaf of sets is called \textbf{finite} if its local values are finite sets, and a locally constant sheaf of groups or $A$-modules is said to be \textbf{of finite type} (resp. \textbf{of finite presentation}) if its local values are finitely generated groups or $A$-modules (resp. finitely presented groups or $A$-modules).

\begin{lemma}\label{topos locally constant sheaf morphism prop}
Let $\mathcal{X}$ be a topos and $F,G$ be sheaves over $\mathcal{X}$.
\begin{enumerate}
    \item[(a)] Let $f:F\to G$ be a morphism of localy constant sheaves of sets over $\mathcal{X}$, and suppose that $F$ is finite. Then $f$ is locally constant.
    \item[(b)] Let $f:F\to G$ be a morphism of locally constant sheaves of $A$-modules, where $F$ is of finite type. Then $f$ is locally constant, and the kernel and cokernel of $f$ are locally constant.
    \item[(c)] Let $0\to F'\to F\to F''\to 0$ be an exact sequence of sheaves of $A$-modules (resp. groups), where $F'$ and $F''$ are locally constant and $F''$ is of finite presentation. Then $F$ is locally constant.
\end{enumerate}
\end{lemma}
\begin{proof}
To prove (a) and (b), we may assume that $F$ and $G$ are constant, so let $F=M_\mathcal{X}$, $G=N_\mathcal{X}$ ($M$ and $N$ are $A$-modules), and let $S\sub M$ be a finite generating subset of $M$. Then $f$ is determined by its restriction to $S_\mathcal{X}$ and $f$ is locally constant if $f|_{S_\mathcal{X}}$. The first assertion of (b) then follows from (a), and the second assertion is a trivial concequence of the first one.\par
It now remains to prove (a). Suppose that $F=S_\mathcal{X}$, $G=T_\mathcal{X}$ are constant, and denote also by $f$ the morphism of objects $S\times e\to T\times e$ induced by $f$ (recall that $S_\mathcal{X}$ is represented by $S\times e$). Let $i_s:\{s\}\times e\to T\times e$ ($s\in S$) be the components of the morphism $f$. Since $S$ is finite, it evidently suffcies to consider the case $f=i_s$, that is, where $S$ is a singleton. Let $X_t\to e$ ($t\in T$) be the family of morphisms fitting the Cartesian diagram
\[\begin{tikzcd}
X_t\ar[r]\ar[d]&e\ar[d,"i_t"]\\
e\ar[r,"f"]&T\times e
\end{tikzcd}\]
where $i_t:e\to T\times e$ is the inclusion in the $t$-th component. The family $\{i_t\}$ is trivially covering, so $\{X_t\to e\}$ is also a covering. It is immediate to verify that the restriction of $f$ to $X_t$ is constant, whence the assertion of (a).\par
To prove (c), we may consider the case of $A$-modules. We can suppose that $F'=M'_\mathcal{X}$ and $F''=M''_\mathcal{X}$ are constant, where $M''$ is an $A$-module of finite presentation. If $M''$ is free, then the morphism $F\to F''$ is locally constant by (a), so locally the extension $F$ of $F''$ by $F'$ splits, which proves that $F$ is locally isomorphic to $F'\times F''$, hence is locally constant. In the general case, choosing a surjective homomorphism $\varphi:L''\to M''$, where $L''$ is free of finite rank; the kernel $R$ of $\varphi$ is of finite type, and we consider the pull back diagram
\[\begin{tikzcd}
0\ar[r]&G\ar[r]\ar[d]&L\ar[r]\ar[d]&L''_\mathcal{X}\ar[d]\ar[r]&0\\
0\ar[r]&M'_\mathcal{X}\ar[r]&F\ar[r]&M''_\mathcal{X}\ar[r]&0
\end{tikzcd}\]
where $L=L''_\mathcal{X}\times_{M''_\mathcal{X}}F$ and $G=L''_\mathcal{X}\times_{M''_\mathcal{X}}M'_\mathcal{X}$. Then $L$ is an extension of $L''_\mathcal{X}$ by $G$, hence locally constant by the preceding arguments.
\end{proof}

We now return to the \'etale topos of a scheme $X$. As we shall see,  locally constant sheaves over $X$ corresponds to \'etale covering spaces of $X$.
\begin{proposition}\label{scheme etale locally constant sheaf represented by etale cover}
Let $X$ be a scheme and $F$ be a sheaf of sets over $X$. If $F$ is locally constant, then it is represented by a \'etale scheme $U$ over $X$. Moreover, if $F$ has finite (resp. nonempty) fibers, then $U$ is a finite (resp. surjective) \'etale covering of $X$. Conversely, if $U$ is finite \'etale over $X$, then the sheaf represented by $U$ is locally constant.
\end{proposition}
\begin{proof}
Descent (\cite{SGA1} \Rmnum{9} 4.1 if $F$ has finite fibers, and \cite{SGA3} \Rmnum{10} 5.4 in the general case).
\end{proof}

\begin{definition}
A sheaf of sets (resp. groups, resp. $A$-modules) is called \textbf{constructible} if for any affine open subset $U\sub X$, there exists a finite stratification of $U$ by locally closed constructible subschemes $U=\coprod_iU_i$ such that $F|_{U_i}$ is locally constant and finite (resp. finite, resp. finitely presentated\footnote{If $A$ is not assumed to be Noetherian, then it is preferable, for the sake of Homological Algebra, to require that the $A$-module $M$ has a resolution by free $A$-modules of finite rank.}).
\end{definition}

The finiteness hypothesis on local values amounts to saying that for each geometric point $\xi$ of $X$, the fiber $F_\xi$ is finite (resp. finite, resp. of finite presentation). It then follows from \cref{topos locally constant sheaf morphism prop}~(a) that a sheaf of groups $F$ is constructible if and only if the underlying sheaf of sets is constructible. Note that if $F$ is an abelian sheaf, then it is constructible as a sheaf of groups (or a sheaf of sets) if and only if it is constructible as a sheaf of $\Z$-modules, \textit{and its fibers are finite}. Therefore, the sheaf $\Z_X$ is constructible as a $\Z$-module, but not as a sheaf of groups.

\begin{proposition}\label{scheme etale constructible sheaf prop}
Let $X$ be a scheme.
\begin{enumerate}
    \item[(a)] If $X$ is quasi-compact and quasi-separated, then a sheaf of sets (resp. groups, resp. $A$-modules) is constructible if and only if there exists a stratification of $X$ into finitely many locally closed and constructible subsets $X=\coprod_iX_i$ such that $F|_{X_i}$ is locally constant and finite (resp. finite, resp. finitely presented).
    \item[(b)] If $(U_i)$ is an open covering of $X$, then for a sheaf $F$ to be constructible, it suffices that $F|_{U_i}$ is constructible for each $i$.
    \item[(c)] Let $f:Y\to X$ be a morphism and $F$ be a constructible sheaf over $Y$, then $f^*(F)$ is constructible.
    \item[(d)] Let $f:F\to G$ be a morphism of constructible sheaves of sets over $X$. Then the set of points $x\in X$ where $F_{\bar{x}}\to G_{\bar{x}}$ is surjective (resp. injective, resp. is isomorphic to a given map of sets) is a locally constructible subset of $X$.
    \item[(e)] If $X$ is locally Noetherian, then a sheaf of sets (resp. groups, resp. $A$-modules) $F$ over $X$ is constructible if and only if for any $x\in X$, there exists a nonempty open neighborhood of the closure $\widebar{\{x\}}$ of $x$ such that $F|_U$ is locally constant and finite (resp. finite, resp finitely presented).
\end{enumerate}
\end{proposition}
\begin{proof}
Evidently, if $f:Y\to X$ is a morphism and there exists a morphism and there exists a stratification of $X$ into finitely many locally closed and constructible subsets $X=\coprod_iX_i$ such that $F$ is locally constant over $X_i$, then the same holds for $Y$ and $f^*(F)$ (cf. \cite{EGA4-4} 1.8.2). Conversely, suppose that $X$ is quasi-compact and quasi-separated, and let $\{U_1,\dots,U_n\}$ be an affine open covering of $X$ such that $F|_{U_i}$ is constructible for each $i$. To find a stratification of $X$ as in (a), it suffices to consider such stratifications for $U_n$ and $Y=X-U_n$ (with the reduced induced scheme structure), since they are constructible by the hypothesis that $X$ is quasi-separated. Now such a stratification exists for $U_n$ by hypothesis, and $Y$ is a union of $n-1$ affine opens $V_i=Y\cap U_i$ with $F|_{V_i}$ being constructible, whence the assertion of (a) by induction on $n$. The same reasoning proves (b), in fact, the hypothesis in (b) implies that $F|_U$ is constructible for any sufficiently small affine opens, and we can cover an arbitrary open affine $V$ by a finite number of such opens. Since assertion (b) implies that the notion of constructibility is local, (c) and (d) then follows immediately from \cref{topos locally constant sheaf morphism prop}. Fianlly, the implication $\Rightarrow$ in (e) is immediate, and does not depend on the Noetherian hypothesis. On the other hand, if $X$ is Noetherian, we can then prove the implication $\Leftarrow$ by Noetherian induction.
\end{proof}

\begin{proposition}\label{scheme qcqs etale constructible sheaf filtration}
Let $X$ be a quasi-compact and quasi-separated scheme and $F$ be a constructible sheaf of groups (resp. $A$-modules) over $X$. Then there exists a finite filtration of $F$ whose successive quotients are of the form $i_!(G)$, where $i:U\to X$ is the inclusion of a locally closed and constructible subset and $G$ is a locally constant and constructible sheaf over $U$. If $X$ is Noetherian, we can further assume that the $U$ are irreducible.
\end{proposition}
\begin{proof}
By \cref{scheme etale constructible sheaf prop}~(a), there exists a stratification of $X$ into finitely many locally closed and constructible subsets $X=\coprod_iX_i$ such that $F|_{X_i}$ is locally constant with finite (resp. finitely presented) fibers. We write $X_i=U_i\cap V_i^c$, where $U_i$ and $V_i$ are constructible open subsets, and let $n$ be the number of open subsets of $X$ in the subtopology $\mathcal{T}$ generated by $\{U_i,V_i\}$. We proceed by induction on $n$: if $W$ is a minimal nonempty element of $\mathcal{T}$, it is evident that $F|_W$ is locally constant and of finite presentation. Let $i:W\to X$ be the inclusion morphism and $Y=X-W$, we then have an exact sequence
\[\begin{tikzcd}
0\ar[r]&i_!(i^*(F))\ar[r]&F\ar[r]&F|_Y\ar[r]&0
\end{tikzcd}\]
and we are th erefore reduced to the same assertion for $Y$ and for the sheaf $F|_Y$ (\cref{scheme etale constructible sheaf prop}~(c)), where we can apply the induction hypothesis.
\end{proof}

\begin{proposition}\label{scheme etale constructible sheaf category prop}
Suppose that $A$ is a Noetherian ring.
\begin{enumerate}
    \item[(a)] A finite projective (resp. inductive) limit of constructible sheaves of sets or $A$-modules is constructible. In particular, the kernel, cokernel and image of a morphism of constructible sheaves of $A$-modules are constructible.
    \item[(a')] A finite projective limit of constructible sheaves of groups is constructible, and if $f:F\to G$ is a morphisms of constructible sheaves of groups, the kernel, image and cokernel (if the image is normal) are constructible.
    \item[(b)] Let $0\to M'\to M\to M''\to 0$ be an exact sequence of sheaves of $A$-modules (resp. groups), with $M'$, $M''$ constructible. Then $M$ is constructible.
    \item[(c)] Let $M_1\to M_2\to M_3\to M_4\to M_5$ be an exact sequence of sheaves of $A$-modules. Then if $M_i$ are constructible for $i=1,2,4,5$, so is $M_3$.
\end{enumerate}
\end{proposition}
\begin{proof}
We only consider the case for sheaves of $A$-modules, the corresponding assertions for sheaves of sets or groups can be done similarly. In this case, it suffices to prove that the kernel and cokernel of a morphism $f:F\to G$ of sheaves of $A$-module are constructible. Since the question is local over $X$, we can suppose that $X$ is affine, hence quasi-compact and quasi-separated. Then by \cref{scheme etale constructible sheaf prop}~(a), we are reduced to the case where $F$ and $G$ are locally constant, and we are done by using \cref{topos locally constant sheaf morphism prop}~(b) and the Noetherian hypothesis on $A$. Similarly, we can prove assertion (b) by using \cref{topos locally constant sheaf morphism prop}~(c). Finally, (c) follows from (a) and (b).
\end{proof}

\begin{proposition}\label{scheme qcqs etale constructible iff cokernel of represented}
Let $X$ be a quasi-compact and quasi-separated scheme and $F$ be a sheaf of sets (resp. $A$-modules). For $F$ to be constructible, it is necessary and sufficient that it is isomorphic to the cokernel of morphisms $H\rightrightarrows G$, where $H$ and $G$ are sheaves of sets represented by \'etale schemes of finite presentation over $X$ (resp. that $F$ is isomorphic to the cokernel of a homomorphism $A_{V}\to A_{U}$, where $U,V$ are \'etale schemes of finite presentation over $X$).
\end{proposition}
\begin{proof}
This condition is sufficient in view of \cref{scheme etale constructible sheaf category prop}~(a), so suppose that $F$ is a constructible sheaf of sets. Using the existence of infinite direct sums in the \'etale site $X_\et$, we see that we can find an epimorphism $\widetilde{G}\to F$, where $G$ is an \'etale scheme over $X$, which we can assume to be a sum of affine schemes $G_i$ ($i\in I$), hence separated over $X$. For any finite subset $J$ of $I$, let $G_J$ be the sum of $G_i$ for $i\in J$, and $F_J$ be its image in $F$. As $G_J$ and $F$ are constructible, so is $F_J$ (\cref{scheme etale locally constant sheaf represented by etale cover} and \cref{scheme etale constructible sheaf category prop}~(a)), so the set $X_J$ of $x\in X$ such that the fibers of $F$ and $F_J$ at a geometric point of $X$ over $x$ is equal, is locally constructible (\cref{scheme etale constructible sheaf prop}~(d)). As the family $X_J$ is increasing with union $X$, and $X$ is quasi-compact, one of the $X_J$ is equal to $X$ (\cite{EGA4-1} 1.9.9). Therefore, by replacing $G$ with $G_J$, we can assume that $G$ is affine, hence separated over $X$, and quasi-compact over $X$ since $X$ is quasi-separated (\cref{scheme morphism qc permanence prop}). Let $H=\widetilde{G}\times_F\widetilde{G}$, which is a subsheaf of the representable sheaf $\widetilde{G\times_XG}$, hence representable by \cref{scheme etale representability lemma}. As $H$ are constructible by \cref{scheme etale constructible sheaf category prop}~(a), it follows from the previous arguments that it is quasi-compact, hence of finite presentation over $X$. This prove the first assertion of the proposition, and the second one can be proved by the same method.
\end{proof}

\begin{corollary}\label{scheme qcqs etale represented constructible iff fp}
Let $X$ be a quasi-compact and quasi-separated scheme scheme and $U$ be an \'etale scheme over $X$. For the \'etale sheaf $\widetilde{U}$ to be constructible, it is necessary and sufficient that $U$ is of finite presentation over $X$.
\end{corollary}

\begin{corollary}\label{scheme qcqs etale sheaf limit of constructible}
Let $X$ be a quasi-compact and quasi-separated scheme. Then any sheaf of sets (resp. ind-$p$-groups, resp. $A$-modules) over $X$ is the inductive limit of a filtered system of constructible sheaves of sets (resp. ind-$p$-groups, resp. $A$-modules).
\end{corollary}

\begin{corollary}\label{scheme qcqs etale sheaf Hom on constructible commutes with limit}
Let $X$ be a quasi-compact and quasi-separated scheme and $F$ be a constructible sheaf of sets (resp. ind-$p$-groups, resp. $A$-modules) over $X$. Then the functor $\Hom(F,-)$ commutes with inductive limits. In the case where $F$ is a sheaf of $A$-modules and $A$ is Noetherian, the functors $\Ext^i(X;F,-)$ also commute with inductive limits.
\end{corollary}

\begin{corollary}\label{scheme constructible sheaf cat under limit prop}
Let $\mathcal{I}$ be a filtered category and $i\mapsto X_i$ be a diagram of affine morphisms of quasi-compact and quasi-separated schemes indexed by $\mathcal{I}$. For any scheme $Y$, let $\Sh_c(Y)$ be the category of constructible sheaves of sets (resp. ind-$p$-groups, resp. $A$-modules) over $Y$. Then we have an equivalence of categories
\[\rlim_i\Sh_c(X_i) \stackrel{\sim}{\to} \Sh_c(X)\]
where $X=\llim_iX_i$. In particular, any constructible sheaf of sets (resp. ind-$p$-groups, resp. $A$-modules) over $X$ is isomorphic to the inverse image of a constrictible sheaf of sets (resp. ind-$p$-groups, resp. $A$-modules) over $X_i$.
\end{corollary}

\begin{proposition}\label{scheme constructible sheaf under surj local fp prop}
Let $f:X\to Y$ be a surjective morphism which is locally of finite presentation and $F$ be a sheaf of sets (resp. groups, resp. $A$-modules). Then $F$ is constructible if and only if $f^*(F)$ is constructible.
\end{proposition}

\begin{proposition}\label{scheme Noe constructible sheaf iff Noe}
Let $X$ be a Noetherian scheme and $A$ be a Notherian ring.
\begin{enumerate}
    \item[(a)] The category of sheaves of sets (resp. ind-$p$-group, resp. $A$-modules) over $X$ is locally Noetherian, that is, possesses a set of generators formed by Noetherian objects.
    \item[(b)] A sheaf $F$ of sets (resp. ind-$p$-group, resp. $A$-modules) over $X$ is constructible if and only if it is Noetherian. If $F$ is a sheaf of $A$-modules, then $F$ is constructible if and only if it is the quotient of a finite sum of sheaves of the form $A_{U}$, where $U\to X$ is \'etale and of finite type.
    \item[(c)] The constructible subsheaves of a sheaf $F$ of sets (resp. ind-$p$-group, resp. $A$-modules) form an inductive system, and $F$ is its inductive limit.
\end{enumerate}
\end{proposition}

\begin{proposition}\label{scheme constructible iff stable under specialization}
Let $X$ be a scheme, $F$ be a constructible sheaf of sets (resp. ind-$p$-group, resp. $A$-modules) (if $F$ is a sheaf of sets, suppose further that $F$ has finite fibers). Let $x\in X$ and $\bar{x}$ be a geometric point over $x$. For $F$ to be locally constant in a neighborhood of $x$, it is necessary and sufficient that for any geometric point $\bar{x}'$ and any specialization $\bar{x}'\rightsquigarrow\bar{x}$, the specialization homomorphism $F_{\bar{x}}\to F_{\bar{x}'}$ is an isomorphism.
\end{proposition}

\begin{definition}
A scheme $X$ is called \textbf{arc connected} if for any couple $(\xi,\eta)$ of geometric points of $X$, there exist geometric points $\xi=\xi_0,\dots,\xi_n$, $\eta_1,\dots,\eta_n=\eta$ and specializations $\xi_i\rightsquigarrow\eta_i$ and $\xi_{i-1}\rightsquigarrow\eta_i$. We say that $X$ is locally arc connected (for the \'etale topology) if for any \'etale morphism $U\to X$ there exists an \'etale covering $\{U_i\to U\}$ of $U$ such that $U_i$ is arc connected for each $i$.
\end{definition}

We verity immediately that a locally Noetherian scheme is locally arc connected.

\begin{proposition}
Let $X$ be a scheme and $F$ be a sheaf of sets (resp. groups, resp. $A$-modules) over $X$.
\begin{enumerate}
    \item[(a)] Suppose that $X$ is locally arc connected and the fibers of $F$ are finite (resp. finite, resp. finitely presented). Then $F$ is locally constant if and only if for any specialization $\xi\to\eta$ of geometric points, the specialization homomorphism $F_\eta\to F_\xi$ is bijective.
    \item[(b)] Suppose that $X$ is locally Noetherian and the fibers of $F$ are finite (resp. finite, resp. finitely presented). Then, if for any specialization $\xi\to\eta$, the specialization homomorphism $F_\eta\to F_\xi$ is injective, then $F$ is constructible.
    \item[(c)] Suppose that $X$ is locally Noetherian and $F$ is a sheaf of sets with finite fibers. Let $d:X\to\N$ be the function $d(x)=|F_{\bar{x}}|$. Then $F$ is constructible if and only if $d$ is a constructible function, i.e. if and only if $d^{-1}(n)$ is constructible for any $n\in\N$.
\end{enumerate}
\end{proposition}

\begin{proposition}\label{scheme etale constructible iff embedded into direct image}
Let $X$ be a scheme.
\begin{enumerate}
    \item[(a)] For any finite and finitely presented morphism $f:X'\to X$ and any constructible sheaf $F$ of sets (resp. ind-$p$-groups, resp. $A$-modules) over $X'$, $f_*(F)$ is constructible.
    \item[(b)] Suppose that $X$ is quasi-compact and quasi-separated, and let $F$ be a sheaf of sets (resp. ind-$p$-groups, resp. $A$-modules) over $X$. Then there exists a finite family $\{p_i:U_i\to X\}$ of finite morphisms and for each $i$, a constant sheaf $F_i$ of sets (resp. ind-$p$-groups, resp. $A$-modules) over $U_i$, and a monomorphism
    \[F\hookrightarrow \prod_i(p_i)_*(C_i).\]
    Moreover, if $X$ is Noetherian, we can suppose that each $U_i$ is integral.
\end{enumerate}
\end{proposition}

\subsection{The theories of Kummer and Artin-Schreier}
We denote by $\G_{m,X}$ the sheaf represented by the multiplicative group $\Spec(\mathscr{O}_X[t,t^{-1}])$ over $X$. For any \'etale morphism $U\to X$, the section of $\G_{m,X}$ over $U$ is then the invertible elements $\Gamma(U,\mathscr{O}_U^\times)$ of $\Gamma(U,\mathscr{O}_U)$. Let $n\in\N$, the kernel of the $n$-th power of $\G_{m,X}$ is called the "sheaf of $n$-th unit roots", and denoted by $\bm{\mu}_{n,X}$. We then have an exact sequence
\begin{equation}\label{scheme etale Kummer exact sequence-1}
\begin{tikzcd}
0\ar[r]&\bm{\mu}_{n,X}\ar[r]&\G_{m,X}\ar[r,"n"]&\G_{m,X}  
\end{tikzcd}
\end{equation}
If $n\in\N$ is invertible over $X$ (that is, if $n$ is coprime to the characteristic of each residue field of $X$), then taking $n$-th power is a surjective morphism of sheaves:
\begin{theorem}[\textbf{Kummer}]\label{scheme etale Kummer exact sequence}
If $n$ is invertible over $X$, then we have an exact sequence
\begin{equation}\label{scheme etale Kummer exact sequence-2}
\begin{tikzcd}
0\ar[r]&\bm{\mu}_{n,X}\ar[r]&\G_{m,X}\ar[r,"n"]&\G_{m,X}\ar[r]&0
\end{tikzcd}
\end{equation}
\end{theorem}
\begin{proof}
Let $u\in\G_{m,X}(U)$, where $U\to X$ is an \'etale morphism. Since $n$ is invertible over $U$, the equation $T^n-u=0$ is separable over $U$, i.e.
\[U'=\Spec(\mathscr{O}_U[T]/(T^n-u))\]
is \'etale over $Y$. As $U'\to U$ is surjective, it is covering and the restriction of $u$ to $U'$ therefore admits an $n$-th root, whence the assertion.
\end{proof}

\begin{proposition}\label{scheme etale n-th root sheaf locally constant}
Let $X$ be a scheme and $n$ be a positive integer invertible over $X$. Then the sheaf $\bm{\mu}_{n,X}$ is locally constant. If $X$ is a scheme over a strictly local ring $A$ such that $n$ is invertible in $A$, then $\bm{\mu}_{n,X}$ is isomorphic to the constant sheaf $\Z/n\Z$.
\end{proposition}
\begin{proof}
We note that for any \'etale scheme $U$ over $X$, we have a bijection
\[\Hom_X(U,\Spec(\mathscr{O}_X[T]/(T^n-1))) \stackrel{\sim}{\to} \{s\in\Gamma(U,\mathscr{O}_U^\times):s^n=1\},\]
so $\bm{\mu}_{n,X}$ is represented by the $X$-scheme $\Spec(\mathscr{O}_X[T]/(T^n-1))$, which is finite and \'etale over $X$ since $n$ is invertible over $X$. By \cref{scheme etale locally constant sheaf represented by etale cover}, we conclude that $\bm{\mu}_{n,X}$ is locally constant. If $A$ is strictly Henselian and $n$ is invertible in $A$, then $T^n-1$ splits into a product of linear polynomials in $A[T]$ by (LeiFu 2.8.3~(\rmnum{5})). For any $A$-scheme $X$, $\Spec(\mathscr{O}_X[T]/(T^n-1))$ is then a trivial \'etale covering of $X$ of degree $n$. Hence $\bm{\mu}_{n,X}$ is isomorphic to the constant sheaf $\Z/n\Z$.
\end{proof}
In view of \cref{scheme etale n-th root sheaf locally constant}, we conclude that for any geometric point $\xi$ of $X$, the fiber $(\bm{\mu}_{n,X})_\xi$ is isomorphic to $\Z/n\Z$, so the sheaf $\bm{\mu}_{n,X}$ is locally isomorphic to $(\Z/n\Z)_X$. Kummer's theory thus gives information about the cohomology of $X$ with values in certain constant sheaves. In fact, we have by definition
\[H^0(X,\G_{m,X})=\Gamma(X,\mathscr{O}_{X_\et}^\times)\]
and for dimension $1$, we have the following:
\begin{theorem}[\textbf{Hilbert's Theorem 90}]\label{scheme etale Hilbert theorem 90}
We have an isomorphism
\[H^1(X,\G_{m,X}) \stackrel{\sim}{\to} \Pic(X)\]
where $\Pic(X)$ is the group of invertible (Zariski) sheaves over $X$.
\end{theorem}
\begin{proof}
Since as a Zariski sheaf $\G_{m,X}$ is isomorphic to $\mathscr{O}_X^\times$, it suffices to prove that the canonical homomorphism
\[H^1(X_\Zar,\G_{m,X})\to H^1(X_\et,\G_{m,X})\]
is bijective, which is equivalent to saying that $R^1i_*(\G_{m,X})=0$, where $i:X_\et\to X_\Zar$ is the canonical morphism. We are therefore reduced to the case where $X$ is affine and prove that $H^1(X_\et,\G_{m,X})=0$ (cf. \cref{ringed topos morphism higher direct image prop}). As we can calculte $H^1$ by \v{C}ech cohomology (\cref{ringed site Cech to derive spectral sequence}), it suffices to consider an \'etale covering $\mathfrak{U}=\{U_i\to X\}$ (where each $X_i$ is affine and we can assume that this is a finite family) and an element $\xi\in H^1(\mathfrak{U},X)$. By definition, $\xi$ is represented by a cocycle $(\xi_{ij})\in\prod_{ij}\G_m(U_{ij})$, where $U_{ij}=U_i\times_XU_j$. To apply a descent argument, we consider the $X$-scheme $U=\coprod_iU_i$, which is faithfully flat and quasi-compact over $X$; let $p:U\to X$ be the structual morphism and
\[U'=U\times_XU=\coprod_{ij}U_{ij},\quad U'''=U\times_XU\times_XU=\coprod_{ijk}U_{ijk}.\]
Using the elements $\xi_{ij}$, we now define an isomorphism $\phi:p_1^*(\mathscr{O}_U)\stackrel{\sim}{\to}p_2^*(\mathscr{O}_U)$ such that on each $U_{ij}$, the following diagram is commutative:
\[\begin{tikzcd}
p_1^*(\mathscr{O}_U)|_{U_{ij}}\ar[r,"\phi"]\ar[d,"\sim"]&p_2^*(\mathscr{O}_U)|_{U_{ij}}\ar[d,"\sim"]\\
\mathscr{O}_{U_{ij}}\ar[r,"\xi_{ij}"]&\mathscr{O}_{ij}
\end{tikzcd}\]
(where $p_i$ and $p_{ij}$ are the canonical projections, and the bottom morphism is given by multiplication by $\xi_{ij}$) The cocycle condition on $\xi_{ij}$ implies that $\phi$ gives a descent data on $\mathscr{O}_U$ relative to $U\to X$, so by (\cite{SGA1} \Rmnum{8} 1.1), there exists a quasi-coherent $\mathscr{O}_X$-module $\mathscr{L}$ and an isomorphism $\sigma:p^*(\mathscr{L})\stackrel{\sim}{\to}\mathscr{O}_U$ such that $\phi\circ p_1^*(\sigma)=p_2^*(\sigma)$. By (\cite{SGA1} \Rmnum{8} remarque 1.12), we see that $\mathscr{L}$ is invertible over $X$, so there exists an open covering $\{V_j\to X\}$ (which we can choose to be a refinement of $\mathfrak{U}$) such that $\mathscr{L}|_{V_j}\cong\mathscr{O}_{V_j}$ for each $j$. This isomorphism, together with the inverse image of the isomorphism $\sigma:p^*(\mathscr{L})\cong\mathscr{O}_U$, provide for each $j$ a unique element $\alpha_j\in\G_m(V_j)$, and since $\mathfrak{V}$ refines $\mathfrak{U}$, the transition functions of the $\alpha_j$ are given by $\xi_{ij}$, so $\xi_{ij}$ is the coboundary defined by $\alpha_j$, and this proves our assertion.
\end{proof}

Now suppose that $X$ is a Noetherian scheme without embedded components, and let $x_j$ be the generic points of irreducible components of $X$. Let $R_j$ be the local ring of $X$ at $x_j$ (which is Artinian) and $i_j:\Spec(R_j)\to X$ be the inclusion morphism. We have a canonical injection
\[\G_{m,X}\to\prod_j(i_j)_*(\G_{m,\Spec(R_j)})\]
of sheaves over $X_\et$ (resp. $X_\Zar$). The cokernel of this morphism is called the \textbf{sheaves of Cartier divisors} over $X_\et$ (resp. $X_\Zar$).

\begin{corollary}\label{scheme Noe etale Cartier divisor sheaf direct image of Zar}
Let $X$ be Noetherian without embedded components, $i:X_\et\to X_\Zar$ be the canonical morphism of sites, and $D$ be the sheaf of Cartier divisors over $X_\et$. Then $i_*(D)$ is the sheaf $D_\Zar$ of Cartier divisors over $X_\Zar$, and we have
\[H^0(X_\et,D)=H^0(X_\Zar,D_\Zar).\]
\end{corollary}
\begin{proof}
If we apply $i_*$ to the exact sequence
\[\begin{tikzcd}
0\ar[r]&\G_{m,X}\ar[r]&\prod_j(i_j)_*(\G_{m,\Spec(R_j)})\ar[r]&D\ar[r]&0
\end{tikzcd}\]
we then obtain an exact sequence since $R^1i_*(\G_{m,X})=0$, whence the assertion.
\end{proof}

In the case where $X$ admits a characteristic $p>0$, we have the following replacement of \cref{scheme etale Kummer exact sequence} for the study of $p$-torsions:
\begin{theorem}[\textbf{Artin-Schreier}]\label{scheme etale Artin-Schreier exact sequence}
If $X$ is of characteristic $p>0$, we have an exact sequence
\[\begin{tikzcd}
0\ar[r]&(\Z/p\Z)_X\ar[r]&\mathscr{O}_X\ar[r,"\wp"]&\mathscr{O}_X\ar[r]&0
\end{tikzcd}\]
where $\wp$ is the morphism of abelian groups defined by $\wp(s)=s^p-s$.
\end{theorem}
\begin{proof}
Let $U=\Spec(A)$ be an affine \'etale scheme over $X$ and $a\in\Gamma(U,\mathscr{O}_{X_\et})=A$ be a section. Then the canonical morphism
\[V=\Spec(A[T]/(T^p-T-a))\to U=\Spec(A)\]
is \'etale and surjective, hence an \'etale covering of $U$. The restriction of $a$ to $V$ is the image of $T$ under the homomorphism $\wp$, so $\wp:\mathscr{O}_{X_\et}\to\mathscr{O}_{X_\et}$ is surjective. Note that for any \'etale scheme $U$ over $X$, we have a bijection
\[\Hom_X(U,\Spec(\mathscr{O}_X[T]/(T^p-T)))\stackrel{\sim}{\to} \{s\in\Gamma(U,\mathscr{O}_U):s^p-s=0\}\]
so $\ker\wp$ is represented by the $X$-scheme $\Spec(\mathscr{O}_X[T]/(T^p-T))$. Since we have $T^p-T=\prod_{i\in\Z/p\Z}(T-i)$ over $X$, it follows that $\ker\wp\cong\Z/p\Z$.
\end{proof}

\begin{proposition}\label{scheme etale cohomology of torsion-free at point}
Let $X$ be a scheme and $G$ be a torsion-free abelian group.
\begin{enumerate}
    \item[(a)] Let $i:x\to X$ be the inclusion of a point. Then
    \[H^1(X,i_*(G_x))=0\]
    where $G_x$ is the constant sheaf with value $G$.
    \item[(b)] If $X$ is irreducible and for any geometric point $\bar{x}$ of $X$ the strict localization $X_{\bar{x}}$ at $\bar{x}$ is irreducible (i.e. $X$ is "geometrically unibranch"), then we have
    \[H^1(X,G_X)=0.\] 
\end{enumerate}
\end{proposition}
\begin{proof}
As for (a), the Leray spectral sequence
\[E_2^{p,q}=H^p(X,R^qi_*(G_x))\Rightarrow H^{p+q}(x,G_x)\]
provides an injection $H^1(X,i_*(G_x))\to H^1(x,G_x)$. Now since $x=\Spec(\kappa(x))$ is the spectrum of a field, we have $H^1(x,G_x)=0$\footnote{We have $H^1(x,G_x)=\rlim H^1(\Gal(k'/k),G)$, where $k=\kappa(x)$ and $k'$ runs through finite Galois extensions of $k$. Now $H^1(\Gal(k'/k),G)=\Hom(\Gal(k'/k),G)=0$ since $\Gal(k'/k)$ is a finite group, hence torsion.}, whence the assertion in (a). To prove (b), let $i:x\to X$ be the inclusion of the genetric point of $X$. We see immediately from the hypothesis of (b) that the canonical morphism $G_X\to i_*(G_x)$ is bijective, so (b) follows from (a).
\end{proof}

\subsection{Cohomology of algebraic curves}
Let $X$ be a Noetherian scheme of dimension $1$, $K(X)$ be the ring of rational functions of $X$, and $i:\Spec(K(X))\to X$ be the canonical morphism. Let $F$ be an abelian sheaf over $\Spec(K(X))$ and consider the sheaves $R^pi_*(F)$ over $X$, where $p>0$. If $\eta$ is the generic point of an irreducible component of $X$, $\bar{\eta}$ is the geometric point lying over $\eta$, and $X_{\bar{\eta}}=\Spec(\mathscr{O}_{X,\bar{\eta}})$ is the corresponding strict localization, then by \cref{scheme qcqs etale site higher direct image fiber isomorphism}, we have
\[(R^pi_*(F))_{\bar{\eta}}=H^p(\Spec(K(X))\times_XX_\eta,\widebar{F})=H^p(\Spec(K(X)\otimes_{\mathscr{O}_X}\mathscr{O}_{X,\bar{\eta}}),\widebar{F})\]
where $\widebar{F}$ is the inverse image of $F$ over $\Spec(K(X)\otimes_{\mathscr{O}_X}\mathscr{O}_{X,\bar{\eta}})$. Since
\[K(X)\otimes_{\mathscr{O}_X}\mathscr{O}_{X,\bar{\eta}}\cong K(X_{\bar{\eta}})\cong \mathscr{O}_{X,\bar{\eta}},\]
it follows from \cref{scheme strictly local etale cohomology trivial} that $(R^pi_*(F))_{\bar{\eta}}$ is zero. Since $X$ is of dimension $1$, such a sheaf is very special in nature:
\begin{lemma}\label{scheme Noe skyscraper sheaf char}
Let $X$ be a Noetherian scheme and $F$ be a sheaf over $X$. The following conditions are equivalent:
\begin{enumerate}
    \item[(\rmnum{1})] The fiber of $F$ at any geometric point $\bar{x}$ of $X$ over a nonclosed point $x\in X$ is zero.
    \item[(\rmnum{2})] Every section $s\in F(X')$ (where $X'$ is \'etale of finite type over $X$) is zero except at a finite number of closed points of $X$.
    \item[(\rmnum{3})] The canonical morphism $F\to\prod_{x\in X}(i_x)_*(i_x)^*(F)$ induces an isomorphism
    \[F \stackrel{\sim}{\to} \bigoplus_{x\in X_0}(i_x)_*(i_x)^*(F)\]
    where $X_0$ is the set of closed points of $X$ and $i_x:x\to X$ is the inclusion.
\end{enumerate}
A sheaf over $X$ satisfying the above equivalent conditions is called a \textbf{skyscraper sheaf}.
\end{lemma}
\begin{proof}
Suppose that (\rmnum{1}) is satisfied, and let $z\in F(X')$, where $X'$ is \'etale of finite type over $X$. Then by hypothesis, the support of $z$ is a closed subset of $X'$ formed by closed points, hence finite ($X'$ being Noetherian), whence (\rmnum{1})$\Rightarrow$(\rmnum{2}). The implication (\rmnum{2})$\Rightarrow$(\rmnum{1}) follows trivially from calculation on fibers (\cref{scheme etale site fiber functor expression-1}), and (\rmnum{3})$\Rightarrow$(\rmnum{1}) since for any family $(G_x)$ of sheaves over closed point $x$ of $X$, the sheaf $F=\bigoplus_i(i_x)_*(G_x)$ over $X$ satisfies (\rmnum{1}), as it follows from the fact that the fiber functor commutes with direct sums and that the support of $(i_x)_*(G_x)$ is equal to $\{x\}$ (cf. \cref{scheme morphism etale finite direct image char}).\par
It remains to prove that (\rmnum{2})$\Rightarrow$(\rmnum{3}), so consider the canonical morphism
\[F\to \prod_{x\in X_0}(i_x)_*(i_x)^*(F).\]
By (\rmnum{2}), the image of $F$ is contained in $\bigoplus_x(i_x)_*(i_x)^*(F)$, so we obtain a morphism
\[F\to\bigoplus_{x\in X_0}(i_x)_*(i_x)^*(F).\]
This is an isomorphism since we have the formula
\[((i_x)_*(i_x)^*(F))_{\bar{y}}=\begin{cases}
F_{\bar{x}}&y=x,\\
0&y\neq x
\end{cases}\]
for any closed point $x$ and any $y\in X$.
\end{proof}

If $X$ is a Noetherian scheme of dimension $1$, then the non-closed points of $X$ are exactly maximal points of $X$, so applying \cref{scheme Noe skyscraper sheaf char} we see that for an abelian sheaf $F$ over $\Spec(K(X))$, the higher direct images $R^pi_*(F)$ is a skyscraper sheaf on $X$ and we have
\[R^pi_*(F) \stackrel{\sim}{\to} \bigoplus_{x\in X_0}(i_x)_*(i_x)^*(R^pi_*(F))\]
On the other hand, as we have already remarked, the fiber of $R^pi_*(F)$ at a geometric point $\bar{x}$ of $X$ is 
\[(R^pi_*(F))_{\bar{x}}\cong H^p(\Spec(\mathscr{O}_{X,\bar{x}}),\widebar{F}).\]
Suppose now that the residue field of any closed point $x$ of $X$ is separably closed. By \cref{scheme separably closed field etale topos is set}, we then have
\begin{align*}
H^p(X,R^qi_*(F))&\cong H^p(X,\bigoplus_{x\in X_0}(i_x)_*(i_x)^*(R^pi_*(F)))\cong \bigoplus_{x\in X_0}H^p(X,(i_x)_*(i_x)^*(R^qi_*(F)))\\
&\cong \bigoplus_{x\in X_0}H^p(x,(i_x)^*(R^qi_*(F)))\\
&\cong\begin{cases}
\bigoplus_{x\in X_0}H^q(\Spec(\mathscr{O}_{X,\bar{x}}),F)&\text{if $p=0$},\\
0&\text{if $p>0$}.
\end{cases}
\end{align*}

\begin{corollary}\label{scheme Noe dim 1 etale cohomology over K(X) prop}
Let $X$ be a Noetherian scheme of dimension $1$ such that for any closed point of $x$ of $X$, the residue field $\kappa(x)$ is separably closed. Let $F$ be an abelian sheaf over $\Spec(K(X))$ and consider the Leray spectra lsequence
\[E_2^{p,q}=H^p(X,R^qi_*(F))\Rightarrow H^{p+q}(\Spec(K(X)),F).\]
Then we have 
\[E_2^{p,q}=\begin{cases}
\displaystyle\bigoplus_{x\in X_0} H^q(\Spec(\mathscr{O}_{X,\bar{x}}),F)&\text{if $p=0$},\\[8pt]
0&\text{if $p>0$}.
\end{cases}\]
where $X_x$ is the strict localization of $X$ at $x$. Therefore, we obtain a long exact sequence
\[\begin{tikzcd}[column sep=3.6mm]
0\ar[r]&H^1(X,i_*(F))\ar[r]&H^1(\Spec(K(X)),F)\ar[r]&\bigoplus_{x\in X_0} H^q(\Spec(\mathscr{O}_{X,\bar{x}}),F)\ar[r]&H^2(X,i_*(F))\ar[r]&\cdots
\end{tikzcd}\]
\end{corollary}

We now suppose that the global $\ell$-dimension of $\Spec(K(X))$ is less than $1$ for any prime number $\ell$ (that is, $H^q(\Spec(K(X)),F)=0$ for $q>1$ and any $\ell$-torsion sheaf over $\Spec(K(X))$). Let $K_1,\dots,K_n$ be the residue fields of $K(X)$, i.e. the residue fields of the maximal points of $X$. In view of \cref{scheme field etale cohomology is Galois cohomology}, we have 
\[\gldim_\ell(\Spec(K(X)))=\sup_i\{\gldim_\ell(\Gal(\widebar{K}_i/K_i))\}\]
where $\gldim_\ell(G)$ is the global $\ell$-dimension of the profinite group $G$. The residue field $K_x$ of $K(X_{\bar{x}})$, for the strict localization $X_{\bar{x}}$ of $X$, is clearly identified with a (infinite) separable extension of $K_i$, so we have
\[\gldim_\ell(\Gal(\widebar{K}_x/K_x))\leq\gldim_\ell(\Gal(\widebar{K}_i/K_i))\]
by (CG, \Rmnum{2} 4.1, Prop 10). Therefore, the global $\ell$-dimension of $K(X_{\bar{x}})$ is also less or equal than $1$. By applying \cref{scheme Noe dim 1 etale cohomology over K(X) prop} to an $\ell$-adic sheaf $F$, we then obtain
\begin{equation}\label{scheme Noe dim 1 etale cohomology ell-dimension 1 prop-1}
H^q(X,i_*(F))=0\for q>2,
\end{equation}
and an exact sequence
\begin{equation}\label{scheme Noe dim 1 etale cohomology ell-dimension 1 prop-2}
\begin{tikzcd}[column sep=3.5mm]
0\ar[r]&H^1(X,i_*(F))\ar[r]&H^1(\Spec(K(X)),F)\ar[r]&\bigoplus_xH^1(\Spec(K(X_{\bar{x}})),F)\ar[r]&H^2(X,i_*(F))\ar[r]&0
\end{tikzcd}
\end{equation}

\begin{theorem}\label{scheme Noe dim 1 etale cohomology ell-dimension 1 prop}
Let $X$ be a Noetherian scheme of dimension $1$ and $n$ be an integer that is invertible over $X$. Suppose that $\gldim_\ell(K(X))\leq 1$ for any prime divisor $\ell$ of $n$ and that for any closed point $x$ of $X$, the residue field $\kappa(x)$ is separably closed. Then we have $H^q(X,\bm{\mu}_{n,X})=0$ for $q>2$ and an exact sequence
\begin{equation}\label{scheme Noe dim 1 etale cohomology ell-dimension 1 prop-3}
\begin{tikzcd}[row sep=5mm, column sep=5mm]
0\ar[r]&H^0(X,\bm{\mu}_{n,X})\ar[r]&\Gamma(X,\mathscr{O}_X^\times)\ar[r,"n"]&\Gamma(X,\mathscr{O}_{X}^\times)\ar[out=-10, in=170]{dll}&\\
&H^1(X,\bm{\mu}_{n,X})\ar[r]&\Pic(X)\ar[r,"n"]&\Pic(X)\ar[r]&H^2(X,\bm{\mu}_{n,X})\ar[r]&0
\end{tikzcd}
\end{equation}
\end{theorem}
\begin{proof}
Suppose that $\ell$ is a prime divisor of $n$, then by applying \cref{scheme etale Hilbert theorem 90} and [CG, \Rmnum{1}, prop.12], we conclude that $H^1(\Spec(K(X)),\G_m)=0$, and $H^q(\Spec(K(X)),\G_m)$ has no $\ell$-torsion for $q\geq 2$. By replacing $K(X)$ with $K(X_{\bar{x}})$, we also have a similar result for $H^q(\Spec(K(X_{\bar{x}})),i_*(\G_m))$. Now in view of \cref{scheme Noe skyscraper sheaf char}, for any sheaf $F$ over $X$, the kernel $P$ and cokernel $Q$ of the canonical homomorphism $F\mapsto i_*(i^*(F))$ (where $i:\Spec(K(X))\to X$ is the inclusion) is a skyscraper sheaf, so we have (since the residue fields of the closed points of $X$ are supposed to be separably closed)
\[H^i(X,P)=H^i(X,Q)=0\for i>0.\]
This implies, in view of the long exact sequence on cohomology, that
\[H^i(X,F)\to H^i(X,i_*(i^*(F)))\]
is an isomorphism for $i\geq 2$, so $H^i(X,\G_m)$ has no $\ell$-torsion for $i\geq 2$. Since $H^q(X,\bm{\mu}_{n,X})$ is $n$-torsion for any $q\geq 2$, we conclude the exact sequence (\ref{scheme Noe dim 1 etale cohomology ell-dimension 1 prop-3}), and $H^q(X,\bm{\mu}_{n,X})=0$ for $q\geq 3$\footnote{For this, one can consider the snake diagram induced by multiplication by $n$, and use skane lemma.}.
\end{proof}

\begin{corollary}\label{scheme complete algebraic cureve cohomology of mu_n}
Let $X$ be a complete and irreducible algebraic curve over a separably closed field $k$, with characteristic $p>0$. If $n$ is coprime to $p$, then we have
\begin{align*}
H^0(X,\bm{\mu}_{n,X})&\cong\bm{\mu}_n(k),\\
H^1(X,\bm{\mu}_{n,X})&\cong \Pic(X)_n=\{\mathscr{L}\in\Pic(X):\mathscr{L}^{\otimes n}\cong\mathscr{O}_X\},\\
H^2(X,\bm{\mu}_{n,X})&\cong \Pic(X)/n\Pic(X)\cong\Z/n\Z,
\end{align*}
and $H^q(X,\bm{\mu}_{n,X})=0$ for $q\geq 3$.
\end{corollary}
\begin{proof}
We have $\Gamma(X,\mathscr{O}_X^\times)=k^\times$, and the homomorphism $x\mapsto x^n$ is surjective, so it follows from the exact sequence (\ref{scheme Noe dim 1 etale cohomology ell-dimension 1 prop-3}) that
\begin{align*}
H^0(X,\bm{\mu}_{n,X})&\cong\bm{\mu}_n(k),\\
H^1(X,\bm{\mu}_{n,X})&\cong \Pic(X)_n=\{\mathscr{L}\in\Pic(X):\mathscr{L}^{\otimes n}\cong\mathscr{O}_X\},\\
H^2(X,\bm{\mu}_{n,X})&\cong \Pic(X)/n\Pic(X).
\end{align*}
To see that $\Pic(X)/n\Pic(X)\cong\Z/n\Z$, let $\deg:\Pic(X)\to\Z$ be the degree homomorphism. Then the map $\deg$ is surjective, so let $\Pic^0(X)$ be its kernel. We have a commutative diagram of short exact sequences
\[\begin{tikzcd}
0\ar[r]&\Pic^0(X)\ar[r]\ar[d,"n"]&\Pic(X)\ar[r,"\deg"]\ar[d,"n"]&\Z\ar[r]\ar[d,"n"]&0\\
0\ar[r]&\Pic^0(X)\ar[r]&\Pic(X)\ar[r,"\deg"]&\Z\ar[r]&0
\end{tikzcd}\]
By the snake lemma, we obtain an exact sequence
\[\begin{tikzcd}[row sep=6mm,column sep=6mm]
0\ar[r]&\Pic^0(X)_n\ar[r]&\Pic(X)_n\ar[r]&0\ar[out=-10, in=170]{dll}\\
&\Pic^0(X)/n\Pic^0(X)\ar[r]&\Pic(X)/n\Pic(X)\ar[r]&\Z/n\Z\ar[r]&0
\end{tikzcd}\]
Now $\Pic^0(X)$ is isomorphic to the group of $k$-points $\Jac_X(k)$ of the Jacobian $\Jac_X$ of $X$, and the homomorphism $n:\Jac_X(k)\to\Jac_X(k)$ is surjective with kernel isomorphic to $(\Z/n\Z)^{2g}$, where $g$ is the genus of $X$, so we have
\begin{gather*}
H^1(X,\bm{\mu}_{n,X})\cong\Pic(X)_n\cong\Pic^0(X)_n\cong\Jac_X(k)_n\cong(\Z/n\Z)^{2g},\\
H^2(X,\bm{\mu}_{n,X})\cong\Pic(X)/n\Pic(X)\cong\Z/n\Z.
\end{gather*}
By \cref{scheme Noe dim 1 etale cohomology ell-dimension 1 prop}, we have $H^q(X,\bm{\mu}_{n,X})=0$ for $q\geq 3$, so the claim follows.
\end{proof}

\subsection{The trace method}
Let $X$ be a scheme and $f:X'\to X$ be a \'etale morphism. Then we have an adjoint triple $(f_!,f^*,f_*)$ (the functor $f_!$ will be defined later). The adjunction map $\id\to f_*f^*$ is called the \textbf{restriction map}, and the adjunction map $f_!f^*\to\id$ is called the \textbf{trace map}. If $f$ is finite, then the functor $f_!$ coincides with $f_*$, and in this case the trace morphism $f_*f^*\to\id$ can be characterized by the following properties:
\begin{enumerate}
    \item[(\rmnum{1})] It commutes with \'etale localization on $X$.
    \item[(\rmnum{2})] If $X'$ is the direct sum of $d$ copies of $X$, so that $f_*f^*(F)\cong F^{\oplus d}$, then $\tr$ is the sum morphism $F^{\oplus d}\to F$.
\end{enumerate}
Since any \'etale covering is locally given by a direct sum of $X$ (\cref{scheme etale locally constant sheaf represented by etale cover}), the uniquenss of such morphism is clear. The existence is ensured by the usual argument of descent.\par
From condition (\rmnum{2}), we see that for any sheaf $F$ over $X$, the composition
\[\begin{tikzcd}
F\ar[r,"\res"]&f_*f^*(F)\ar[r,"\tr"]&F
\end{tikzcd}\]
is the multiplication by the local degree of $f$. If this degree is a constant $d$, then this is given by the multiplication by $d$. The "m\'ethode de la trace" is the following observation: if $F$ is an abelian sheaf on $X$ such that multiplication by $d$ is an isomorphism on $F$, then the map
\[\res:H^q(X,F)\to H^q(X,f_*f^*(F))=H^q(X',f^*(F))\]
is injective. In fact, we have $H^q(X,f_*f^*(F))=H^q(X',f^*(F))$ by the vanishing of the higher direct images (\cref{scheme morphism etale finite direct image char}) and the Leray spectral sequence (\cref{ringed topos Leray spectral sequence for morphism}). In particular, if $H^q(Y,f^*(F))=0$, then $H^q(X,F)=0$ as well.\par
As an example of this observation, we have the following corollary.
\begin{corollary}\label{scheme p-torsion etale sheaf trace method}
Let $f:X'\to X$ be an \'etale covering of constant degree $d$. If $F$ is a $p$-torsion sheaf over $X$ with $\gcd(p,d)=1$, then $H^q(X',f^*(F))=0$ implies $H^q(X,F)=0$.
\end{corollary}
\begin{proof}
In fact, in this case multiplication by $d$ is an isomorphism on $F$.
\end{proof}

Now let $i:U\to X$ be an immersion and $f:U'\to U$ be a finite \'etale morphism of degree $d$, which is assumed to be induced from a finite morphism $g:X'\to X$ by base change, i.e. we have a Cartesian diagram
\begin{equation}\label{scheme qcqs semi-exact functor on etale zero iff-1}
\begin{tikzcd}
U'\ar[d,swap,"f"]\ar[r,"i'"]&X'\ar[d,"g"]\\
U\ar[r,"i"]&X
\end{tikzcd}
\end{equation}
For an abelian sheaf $F$ over $U$, we have
\[\begin{tikzcd}
F\ar[rr,bend right=20pt,swap,"\cdot d"]\ar[r,"\res"]&f_*f^*(F)\ar[r,"\tr"]&F
\end{tikzcd}\]
Since $i_*f_*=g_*i'_*$ and $i_!f_*\cong g_*i'_!$, we have
\begin{equation}\label{scheme Cartesian diagram trace morphism diagram-1}
\begin{tikzcd}
i_*(F)\ar[rr,bend right=20pt,swap,"\cdot d"]\ar[r,"\res"]&g_*i'_*f^*(F)\ar[r,"\tr"]&i_*(F)
\end{tikzcd}\quad\quad \begin{tikzcd}
i_!(F)\ar[rr,bend right=20pt,swap,"\cdot d"]\ar[r,"\res"]&g_*i'_!f^*(F)\ar[r,"\tr"]&i_!(F)
\end{tikzcd}
\end{equation}
Applying this to the cohomology group, we then obtain
\begin{equation}\label{scheme Cartesian diagram trace morphism diagram-2}
\begin{tikzcd}
H^q(X,i_*(F))\ar[rr,bend right=10pt,swap,"\cdot d"]\ar[r,"\res"]&H^q(X',i'_*f^*(F))\ar[r,"\tr"]&H^q(X,i_*(F))
\end{tikzcd}
\end{equation}
\vspace*{-2mm}
\begin{equation}\label{scheme Cartesian diagram trace morphism diagram-3}
\begin{tikzcd}
H^q(X,i_!(F))\ar[rr,bend right=10pt,swap,"\cdot d"]\ar[r,"\res"]&H^q(X',i'_!f^*(F))\ar[r,"\tr"]&H^q(X,i_!(F))
\end{tikzcd}
\end{equation}

\begin{proposition}\label{scheme qcqs semi-exact functor on etale zero iff}
Let $X$ be a quasi-compact and quasi-separated scheme, $\ell$ be a prime number, and $H$ be a semi-exact functor on the category of $\ell$-torsion sheaves over $X$ with values in $\mathbf{Ab}$, which is compatible with filtrant inductive limits. Then the following conditions are equivalent:
\begin{enumerate} 
    \item[(\rmnum{1})] $H=0$.
    \item[(\rmnum{2})] $H(f_*i_!(\Z/\ell\Z))=0$ for any finite morphism $f:Y\to X$ and any immersion $i:U\to Y$ such that $U$ is of finite presentation over $X$. If $X$ is Noetherian, we can restrict to the case where $Y$ is integral.
\end{enumerate}
 
\end{proposition}
\begin{proof}
By \cref{scheme qcqs etale sheaf limit of constructible} and \cref{scheme qcqs etale constructible sheaf filtration}, it suffices to verify that $H(F)=0$ for $F=i_!(G)$, where $i:U\to X$ is the inclusion of a finitely presented subscheme of $X$ and $G$ is a locally constant $\ell$-torsion sheaf over $U$. Let $U''\to U$ be a principal \'etale covering with group $g$ such that $G$ is constant over $U''$, and let $A$ be the $\ell$-group such that $G|_{U''}\cong A_{U''}$. Note that the group $g$ acts on $A$, and this action determines the structure of $G$. Let $h$ be a Sylow $\ell$-subgroup of $g$, and $U'=U''/h$ be the principal covering corresponding to $h$, so that the degree $d$ of $U'$ over $U$ is coprime to $\ell$. By Zariski's Main Theorem (\cite{EGA4-3}, 8.12.6), we may choose a diagram
\[\begin{tikzcd}
U'\ar[d,swap,"f"]\ar[r,"i'"]&X'\ar[d,"g"]\\
U\ar[r,"i"]&X
\end{tikzcd}\]
where $g:X'\to X$ be a finite morphism and $i':U'\to X'$ is an open immersion. Moreover, since the composition $U'\to X$ is finitely presented, we can take the scheme-theoretic closure of $i'$ in $X'$, and thus assume that $i'$ has dense image. Since $f$ is finite and $U'$ is dense in $X'$, we conclude that the induced morphism $U'\to U\times_XX'$ is a finite open immersion with dense image, so it is an isomorphism and the above diagram is Cartesian. From the diagram (\ref{scheme Cartesian diagram trace morphism diagram-1}) and the fact that $\gcd(d,\ell)=1$, we are reduced to showing that $H(g_*i'_!f^*(G))=0$.\par
Now it is well known that the only abelian group of $\ell$-torsion which is simple under an operation of an $\ell$-group $h$ is $\Z/\ell\Z$ with the trivial operation, so it follows that there is a filtration of $A$ as an $h$-module, whose successive quotients are isomorphic to $\Z/\ell\Z$ with trivial operation. This filtration gives a corresponding filtration of $f^*(G)$ by descent, and it is therefore sufficient to prove that $H(g_*i'_!(\Z/\ell\Z))=0$; this proves the claim.
\end{proof}

\begin{proposition}\label{scheme Noe etale sheaf higher cohomology vanish by increasing function iff}
Let $X$ be a Noetherian scheme, $\ell$ be a prime number, and $\varphi$ be a function defined on the set of finite integral schemes over $X$ with values in $\N$. Suppose that $\varphi(Y)\leq\varphi(Y')$ if there exists an $X$-morphism $Y\to Y'$, and the inequality is strict if $Y$ is a closed proper subscheme of $Y'$. For any $X$-scheme $Y$ finite over $X$, we define $\varphi(Y)=\sup_i\varphi(Y_i)$, where $Y_i$ are the irreducible components of $Y$, endowed with the reduced scheme structure. Then the following assertions are equivalent:
\begin{enumerate}
    \item[(\rmnum{1})] For any scheme $Y$ finite over $X$ and any $\ell$-torsion sheaf $F$ over $Y$, we have $H^q(Y,F)=0$ for $q>\varphi(Y)$.
    \item[(\rmnum{2})] For any scheme $Y$ which is finite and integral over $X$, we have $H^q(Y,\Z/\ell\Z)=0$ for $q>\varphi(Y)$.
\end{enumerate}
\end{proposition}
\begin{proof}
It suffices to prove that (\rmnum{2})$\Rightarrow$(\rmnum{1}). If (\rmnum{2}) is satisfied, we can apply \cref{scheme qcqs semi-exact functor on etale zero iff} to the functor $H^q$, since it commutes with inductive limits and direct images under finite morphisms. We then reduce the verification of (\rmnum{1}) to the case where $Y$ is finite and integral over $X$ and $F=i_!((\Z/\ell\Z)_U)$, where $i:U\to Y$ is an immersion. Now we have an exact sequence
\[\begin{tikzcd}
0\ar[r]&i_!((\Z/\ell\Z)_U)\ar[r]&(\Z/\ell\Z)_Y\ar[r]&(\Z/\ell\Z)_Z\ar[r]&0
\end{tikzcd}\]
where $Z=Y\setminus U$. By induction on $\varphi(Y)$ and the assumption on the function $\varphi$, we may suppose that $H^q(Z,\Z/\ell\Z)=0$ for $q>\varphi(Y)-1$, whence $H^q(i_!(\Z/\ell\Z))=0$ for $q>\varphi(Y)$ in view of the long exact sequence on cohomology.
\end{proof}

\begin{corollary}\label{scheme curve over separably closed field cohomology of ell-sheaf vanish >2}
Let $X$ be an algebraic curve over a separably closed field $k$ with characteristic $p>0$ and $\ell$ be a prime number which is coprime to $p$. Then for any $\ell$-torsion sheaf $F$ over $X$, we have $H^q(X,F)=0$ for $p>2$. If $X$ is affine, then $H^q(X,F)=0$ for $q>1$.
\end{corollary}
\begin{proof}
For $Y$ finite and integral over $X$, we define $\varphi(Y)=2\dim(Y)$ (resp. $\varphi(Y)=\dim(Y)$ if $X$, and hence $Y$, is affine). By \cref{scheme Noe etale sheaf higher cohomology vanish by increasing function iff}, it suffices to show that $H^q(Y,\Z/\ell\Z)=0$ for $q>\varphi(Y)$. This is trivial for $\dim(Y)=0$, so it suffices to show that $H^q(Y,\Z/\ell\Z)=0$ if $q>2$ for an integral curve $Y$. This follows from \cref{scheme Noe dim 1 etale cohomology ell-dimension 1 prop}, since $\bm{\mu}_{\ell,Y}\cong(\Z/\ell\Z)_Y$.\par
Suppose that $X$ is affine. Since purely inseparable extensions do not affect the cohomology (\cref{scheme etale integral surj radical eg}~(b)), we may assume that $k$ is algebraically closed. Let $f:X'\to X$ be the normalization of $X$, which is a finite morphism and an isomorphism except for a set of finitely many points of $X$, denoted by $S$. We have an exact sequence of sheaves over $X$:
\[\begin{tikzcd}
0\ar[r]&(\Z/\ell\Z)_X\ar[r]&f_*((\Z/\ell\Z)_{X'})\ar[r]&E\ar[r]&0
\end{tikzcd}\]
where $E$ is concentrated over $S$, whence $H^q(X,E)=0$ for $q>0$. By \cref{scheme morphism etale finite direct image char}, we are reduced to prove that
\[H^q(X,f_*((\Z/\ell\Z)_{X'}))\cong H^q(X',\Z/\ell\Z)=0\for q>1\]
which means we can assume that $X$ is normal from the begining. We may also suppose that $X$ is connected. Now by \cref{scheme Noe dim 1 etale cohomology ell-dimension 1 prop}, we have an exact sequence
\[\begin{tikzcd}[column sep=5mm]
\Gamma(X,\mathscr{O}_X^\times)\ar[r,"\ell"]&\Gamma(X,\mathscr{O}_X^\times)\ar[r]&H^1(X,\bm{\mu}_\ell)\ar[r]&\Pic(X)\ar[r,"\ell"]&\Pic(X)\ar[r]&H^2(X,\bm{\mu}_\ell)\ar[r]&0
\end{tikzcd}\]
We now embed $X$ into a complete smooth connected curve $\widebar{X}$, so that can identify the elements of $\Gamma(X,\mathscr{O}_X^\times)$ with the rational functions on $\widebar{X}$ whose divisors are contained in the finite set $\widebar{X}-X$. Now we observe that the map $\ell:\Pic(X)\to\Pic(X)$ in the affine case is surjective, since every divisor on $X$ can be extended to a divisor of degree $0$ on $\widebar{X}$ (as $\widebar{X}-X\neq\emp$) and we have seen in the proof of \cref{scheme complete algebraic cureve cohomology of mu_n} that the map $\ell:\Pic^0(\widebar{X})\to\Pic^0(\widebar{X})$ is surjective. We therefore conclude that $H^2(X,\bm{\mu}_{\ell,X})=0$, whence the corollary.
\end{proof}

\begin{remark}
The reasoning of \cref{scheme qcqs semi-exact functor on etale zero iff} in fact establishes the following result: Let $X$ be a quasi-compact and quasi-separate scheme, $\ell$ a prime number, $\mathcal{C}$ a strictly full subcategory of the category of constructible $\ell$-torsion abelian sheaves which is stable under direct factor and extensions. Suppose that for any finite morphism $f:Y\to X$ and any open immersion $i:U\to Y$ of $Y$ that is finite presented over $X$, we have $f_*(i_!((\Z/\ell\Z)_U))\in\mathcal{C}$, then $\mathcal{C}$ contains any constructible $\ell$-torsion sheaves.
\end{remark}


