\usepackage[utf8]{inputenc}
\usepackage[colorlinks,linkcolor=blue,hyperfootnotes=false]{hyperref}
\usepackage{graphicx}
\usepackage{multicol}
\usepackage{amsmath,amssymb,amsthm,amsfonts}
\usepackage[capitalize,nameinlink]{cleveref}%动态ref定理，推论，引理等
\usepackage{textgreek,bm,upgreek,mathrsfs}
\usepackage{array} %表格列宽操作
\usepackage{longtable} %表格列宽对齐
\usepackage{arydshln} %提供画线的虚线格式
%\usepackage{textcomp}
\usepackage{stmaryrd}
\expandafter\def\csname opt@stmaryrd.sty\endcsname
{only,shortleftarrow,shortrightarrow}
\usepackage{extpfeil}
\usepackage{extarrows}
\usepackage[bottom]{footmisc}
\usepackage{enumitem}
\usepackage{epigraph}
\usepackage[many]{tcolorbox}
\usepackage[english]{babel}
\usepackage[margin=1in]{geometry}
\usepackage{setspace}
\usepackage{microtype} 
\usepackage{float}
\usepackage[framemethod=tikz]{mdframed} 
\usepackage[tikz]{bclogo}
\usepackage{wrapfig}
\usepackage{color}
\usepackage{epigraph}
\usepackage[many]{tcolorbox}
\usepackage{tikz-cd}
\usepackage{tikz}
\usepackage{fancyhdr}
\usepackage{titlesec}%定义section的格式
\usepackage{tocloft}
\usepackage{titletoc}%定义目录样式
\usepackage{sectsty}%定义section的格式
\usepackage{booktabs}
\usepackage{easybmat}%定义大型分块矩阵
\usepackage{dsfont}%定义bold 1
\usepackage{calligra}
\usepackage[
ordering=Kac,
edge-length=1cm,
root-radius=.06cm]{dynkin-diagrams}
\usepackage[T1]{fontenc}
\PassOptionsToPackage{no-math}{fontspec}
\usepackage[noBBpl]{mathpazo}
\usepackage{bbold}
\usepackage{palatino}
%\usepackage{newpxmath}
%\usepackage{txfonts}
%\usepackage{pxfonts}
\usepackage{l3draw,xparse}
\usepackage{accents}%创建新的widetilde
\usepackage{scalerel} %放大数学字体
\usepackage{calligra,mathrsfs}%for sheaf Hom
\usepackage{mathtools}%def new widetilde
\usepackage{calc}%定义箭头不同样式symbol
\usepackage{ulem}%定义合适的下划线

%-----------------------------------------------------
\DeclareMathAlphabet{\mathbbb}{U}{bbold}{m}{n}
\DeclareMathAlphabet{\mathbb}{U}{msb}{m}{n}
%-----------------------------------------------------
\DeclareFontFamily{U}{BOONDOX-cal}{\skewchar\font=45}
\DeclareFontShape{U}{BOONDOX-cal}{m}{n}{
  <-> s*[1] BOONDOX-r-cal}{}
\DeclareMathAlphabet{\mathscr}{U}{BOONDOX-cal}{m}{n}
%-----------------------------------------------------
\DeclareFontFamily{U}{BOONDOX-frak}{\skewchar\font=45}
\DeclareFontShape{U}{BOONDOX-frak}{m}{n}{
  <-> s*[1]  BOONDOX-r-frak}{}
%\DeclareMathAlphabet{\mathfrak}{U}{BOONDOX-frak}{m}{n}
%-----------------------------------------------------
%设置页面样式
%\geometry{top=3.5cm,bottom=3.5cm}
%\linespread{1.15}
\geometry{hcentering}
\pagestyle{fancy}
\setlength{\headheight}{15.0pt}
\fancyhf{}
\fancyhead[LE,RO]{\thepage}
\fancyhead[RE]{\bf\nouppercase{\rightmark}}
\fancyhead[LO]{\bf\nouppercase{\leftmark}}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
 
%-------------------------------------------------------
%定义能编号的paragraph
\usepackage{chngcntr}
\counterwithout{paragraph}{subsubsection}
\renewcommand{\theparagraph}{\arabic{chapter}.\arabic{section}.\arabic{subsection}.\arabic{paragraph}}
\setcounter{secnumdepth}{4}

%---------------------------------------------------------
%---控制enumerate编号正体
\usepackage{enumitem}
\setlist[enumerate,1]{font=\upshape}


\makeatletter%define roman numbers
\newcommand{\rmnum}[1]{\romannumeral #1}
\newcommand{\Rmnum}[1]{\expandafter\@slowromancap\romannumeral #1@}
\makeatother

\chapterfont{\centering}%chapter居中
\sectionfont{\centering}%section居中

%\titlecontents{chapter}% <section-type>增加Chapter到目录中
%  [0pt]% <left>
%  {\bfseries}% <above-code>
%  {\color{blue}\chaptername\ \thecontentslabel.\hspace{7pt}}% %<numbered-entry-format>
%  {}% <numberless-entry-format>
%  {\hfill\contentspage}% <filler-page-format>

%调整tikz箭头格式---------------------------------
\usetikzlibrary{arrows.meta}
\usetikzlibrary{bending}
\tikzset{
  commutative diagrams/.cd,
  arrow style=tikz,
  diagrams={>={Computer Modern Rightarrow[length=5pt,width=4pt]}},
  symbol/.style={
    draw=none,
    every to/.append style={
      edge node={node [sloped, allow upside down, auto=false]{$#1$}}}
  },
  row sep/normal=8mm,
  column sep/normal=8mm
}

%------------------------------------------------
%引入mathabx包的widecheck
\DeclareFontFamily{U}{mathx}{}
\DeclareFontShape{U}{mathx}{m}{n}{ <-> mathx10 }{}
\DeclareSymbolFont{mathx}{U}{mathx}{m}{n}
\DeclareFontSubstitution{U}{mathx}{m}{n}
\DeclareMathAccent{\widecheck}{0}{mathx}{"71}
\DeclareMathAccent{\widebar}{0}{mathx}{"73}

%改变下标基线--------------------------------------
%\usepackage{subdepth}
%\begingroup
%  \catcode`\_=\active
%  \gdef_#1{\ensuremath{\sb{\smash{#1}}}}
%\endgroup
%\mathcode`\_=\string"8000
%\catcode`\_=12
%%-------------------------------------------------

%-------------------mathbb大写
\def\C{\mathbb{C}}
\def\F{\mathbb{F}}
\def\K{\mathbb{K}}
\def\R{\mathbb{R}}
\def\A{\mathbb{A}}
\def\B{\mathbb{B}}
\def\Q{\mathbb{Q}}
\def\Z{\mathbb{Z}}
\def\N{\mathbb{N}}
\def\T{\mathbb{T}}
\def\H{\mathbb{H}}
\def\V{\mathbb{V}}
\def\RP{\mathbb{RP}}
\def\CP{\mathbb{CP}}
\def\P{\mathbb{P}}
%------------------------------


%-------------------mathfrak大写
\def\X{\mathfrak{X}}
\def\Y{\mathfrak{Y}}
%------------------------------


%------------------mathfrak小写
\def\m{\mathfrak{m}}
\def\n{\mathfrak{n}}
\def\p{\mathfrak{p}}
\def\q{\mathfrak{q}}
\def\a{\mathfrak{a}}
\def\b{\mathfrak{b}}
\def\c{\mathfrak{c}}
\def\g{\mathfrak{g}}
\def\h{\mathfrak{h}}
\def\d{\mathfrak{d}}
\def\s{\mathfrak{s}}
\def\z{\mathfrak{z}}
\def\l{\mathfrak{l}}
\def\r{\mathfrak{r}}
\def\t{\mathfrak{t}}
\def\f{\mathfrak{f}}
\def\x{\mathfrak{x}}
\def\y{\mathfrak{y}}
\def\k{\mathfrak{k}}
\def\st{\mathfrak{st}}
\def\aff{\mathfrak{aff}}
\def\gl{\mathfrak{gl}}
\def\sl{\mathfrak{sl}}
\def\o{\mathfrak{o}}
\def\so{\mathfrak{so}}
\def\u{\mathfrak{u}}
\def\su{\mathfrak{su}}
\def\Lie{\mathfrak{Lie}}
\def\nil{\mathfrak{nil}}
\def\rad{\mathfrak{rad}}
\def\eff{\mathfrak{eff}}
%-----------------------------


%------------------mathrm大小写
\def\E{\mathrm{E}}
\def\GL{\mathrm{GL}}
\def\PGL{\mathrm{PGL}}
\def\SL{\mathrm{SL}}
\def\O{\mathrm{O}}
\def\SO{\mathrm{SO}}
\def\Sp{\mathrm{Sp}}
\def\U{\mathrm{U}}
\def\SU{\mathrm{SU}}
\def\dom{\mathrm{dom}}
\def\codom{\mathrm{codom}}
\def\End{\mathrm{End}}
\def\Hom{\mathrm{Hom}}
\def\Mor{\mathrm{Mor}}
\def\Obj{\mathrm{Obj}}
\def\Aut{\mathrm{Aut}}
\def\det{\mathrm{det}}
\def\supp{\mathrm{supp}}
\def\conv{\mathrm{conv}}
\def\mult{\mathrm{mult}}
\def\Homgr{\mathrm{Homgr}}
\def\Sh{\mathrm{Sh}}
\def\Lib{\mathrm{Lib}}
\def\Ad{\mathrm{Ad}}
\def\ad{\mathrm{ad}}
\def\Der{\mathrm{Der}}
\def\reg{\mathrm{reg}}
\def\div{\mathrm{div}}
\def\Sym{\mathrm{Sym}}
\def\Stab{\mathrm{Stab}}
\def\Tor{\mathrm{Tor}}
\def\Ext{\mathrm{Ext}}
\def\tr{\mathrm{tr}}
\def\gr{\mathrm{gr}}
\def\lcm{\mathrm{lcm}}
\def\codim{\mathrm{codim}}
\def\gldim{\mathrm{gldim}}
\def\rank{\mathrm{rank}}
\def\char{\mathrm{char}}
\def\cl{\mathrm{cl}}
\def\Cl{\mathrm{Cl}}
\def\height{\mathrm{ht}}
\def\coht{\mathrm{coht}}
\def\depth{\mathrm{depth}}
\def\sgn{\mathrm{sgn}}
\def\res{\mathrm{res}}
\def\Rees{\mathrm{Rees}}
\def\Res{\mathrm{Res}}
\def\Alt{\mathrm{Alt}}
\def\Gal{\mathrm{Gal}}
\def\Inv{\mathrm{Inv}}
\def\Inn{\mathrm{Inn}}
\def\Ann{\mathrm{Ann}}
\def\Ass{\mathrm{Ass}}
\def\Spec{\mathrm{Spec}}
\def\Spf{\mathrm{Spf}}
\def\Proj{\mathrm{Proj}}
\def\Max{\mathrm{Max}}
\def\Ind{\mathrm{Ind}}
\def\CoInd{\mathrm{CoInd}}
\def\Div{\mathrm{Div}}
\def\Pic{\mathrm{Pic}}
\def\sep{\mathrm{sep}}
\def\isep{\mathrm{isep}}
\def\Soc{\mathrm{Soc}}
\def\Rad{\mathrm{Rad}}
\def\red{\mathrm{red}}
\def\dev{\mathrm{dev}}
\def\opp{\mathrm{opp}}
\def\Nor{\mathrm{Nor}}
\def\Cyl{\mathrm{Cyl}}
\def\Cone{\mathrm{Cone}}
\def\Aff{\mathrm{Aff}}
\def\rat{\mathrm{rat}}
\def\Sing{\mathrm{Sing}}
\def\op{\mathrm{op}}
\def\inj{\mathrm{inj}}
\def\Fun{\mathrm{Fun}}
\def\sk{\mathrm{sk}}
\def\ev{\mathrm{ev}}
\def\Ob{\mathrm{Ob}}
\def\Alg{\mathrm{Alg}}
\def\rev{\mathrm{rev}}
\def\gldim{\mathrm{gl.dim}}
\def\projdim{\mathrm{proj.dim}}
\def\injdim{\mathrm{inj.dim}}
\def\pr{\mathrm{pr}}
\def\Arr{\mathrm{Arr}}
\def\Cart{\mathrm{Cart}}
\def\Cov{\mathrm{Cov}}
\def\PSh{\mathrm{PSh}}
\def\Sh{\mathrm{Sh}}
\def\Ouv{\mathrm{Ouv}}
\def\Esp{\mathrm{Esp}}
\def\Topos{\mathrm{Topos}}
%-----------------------------


%------------------operatorname定义
\def\ker{\operatorname{ker}}
\def\coker{\operatorname{coker}}
\def\im{\operatorname{im}}
\def\coim{\operatorname{coim}}
\def\id{\operatorname{id}}
\def\Int{\operatorname{Int}}
%-----------------------------

%--------------------text定义
\def\et{\textup{\'et}}
\def\Zar{\textup{Zar}}
%--------------------其他定义
\def\sub{\subseteq}
\def\sups{\supseteq}
\def\emp{\varnothing}
\def\dcheck{\check{ }\hspace{4pt}\check{}}
\def\eps{\varepsilon}
\def\llim{\varprojlim}
\def\rlim{\varinjlim}
\def\And{\hspace{8pt}\text{and}\hspace{8pt}}
\def\for{\hspace{8pt}\text{for}\hspace{6pt}}
%------------------------------

%------------------------------
\renewcommand{\Re}{\operatorname{Re}}
\renewcommand{\Im}{\operatorname{Im}}
\renewcommand{\i}{\mathrm{i}}
%------------------------------

%------------------------------花写Hom,Ext,End,Proj
\DeclareMathOperator{\sHom}{\mathcal{H}\hspace*{-0.4pt}\textit{om}\hspace{0.5pt}}
\DeclareMathOperator{\sExt}{\mathcal{E}\hspace*{-1.3pt}\textit{xt}\hspace{0.5pt}}
\DeclareMathOperator{\sEnd}{\mathcal{E}\hspace*{-1pt}\textit{nd}\hspace{0.5pt}}
\DeclareMathOperator{\sProj}{\mathscr{P}\hspace*{-0.5pt}\textit{roj}}
%------------------------------


\newcommand{\intprod}{\mathbin{\raisebox{\depth}{\scalebox{1}[-1]{$\lnot$}}}}%defining interior product
\newcommand{\bigw}{\scalebox{.95}[1]{\boldmath{$\bigwedge$}\hspace{-1pt}}}%define a nice wedge product


%调整图片和方程编号方式----------------------
%\makeatletter
%\@addtoreset{figure}{subsection}
%\makeatother
%\renewcommand{\thefigure}{\arabic{section}.\arabic{subsection}.\arabic{figure}}
\counterwithin*{figure}{section}

%\renewcommand{\theequation}{\arabic{section}.\arabic{subsection}.\arabic{equation}}
\numberwithin{equation}{section}
%-------------------------------------------




%--------------------------------------------------------
%定义widecheck


%---------------------------------------------------------
\ExplSyntaxOn%defining shuffle prodcut
\fp_new:N \l__expl_shuffle_fp
\cs_new_protected:Nn \expl_shuffle:
 {
  \draw_begin:
  \draw_linewidth:n { \l__expl_shuffle_fp }
  \draw_cap_round:
  \draw_join_round:
  \draw_path_moveto:n { 0.0ex , 1.0ex }
  \draw_path_lineto:n { 0.0ex , 0.0ex }
  \draw_path_lineto:n { 1.75ex , 0.0ex }
  \draw_path_lineto:n { 1.75ex , 1.0ex }
  \draw_path_use_clear:n { stroke }
  \draw_path_moveto:n { 0.875ex , 0.0ex }
  \draw_path_lineto:n { 0.875ex , 1.0ex }
  \draw_path_use_clear:n { stroke }
  \draw_end:
 }
\NewDocumentCommand{\shuffle}{}
 {
  \mathrel
   {
    \fp_set:Nn \l__expl_shuffle_fp { 0.08ex }
    \text{$\mspace{1mu}$ \expl_shuffle: $\mspace{1mu}$}
   }
 }
\ExplSyntaxOff 
%---------------------------------------------------------


%定义bighat----------------------------------------------------
\makeatletter
\def\pgf@stroke@inner@line{%
  \let\pgf@temp@save=\pgf@strokecolor@global
  \pgfsys@beginscope%
  {%
    \pgfsys@roundcap% <-- I add this
    \pgfsys@setlinewidth{\pgfinnerlinewidth}%
    \pgfsetstrokecolor{\pgfinnerstrokecolor}%
    \pgfsyssoftpath@invokecurrentpath%
    \pgfsys@stroke%
  }%
  \pgfsys@endscope%
  \global\let\pgf@strokecolor@global=\pgf@temp@save
}
\makeatother

\DeclareMathSymbol{\widetildesym}{\mathord}{largesymbols}{"65}
    \newcommand\lowerwidetildesym{%
      \text{\smash{\raisebox{-1.3ex}{%
        $\widetildesym$}}}}
            \newcommand\bigtilde[1]{%
              \mathchoice
                {\accentset{\displaystyle\lowerwidetildesym}{#1}}
        {\accentset{\textstyle\lowerwidetildesym}{#1}}
        {\accentset{\scriptstyle\lowerwidetildesym}{#1}}
        {\accentset{\scriptscriptstyle\lowerwidetildesym}{#1}}
}%定义bigtilde

\DeclareMathSymbol{\widehatsym}{\mathord}{largesymbols}{"62}
    \newcommand\lowerwidehatsym{%
      \text{\smash{\raisebox{-1.3ex}{%
        $\widehatsym$}}}}
            \newcommand\bighat[1]{%
              \mathchoice
                {\accentset{\displaystyle\lowerwidehatsym}{#1}}
        {\accentset{\textstyle\lowerwidehatsym}{#1}}
        {\accentset{\scriptstyle\lowerwidehatsym}{#1}}
        {\accentset{\scriptscriptstyle\lowerwidehatsym}{#1}}
}
%--------------------------------------------------------------

